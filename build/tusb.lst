ARM GAS  /tmp/ccqgw09y.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"tusb.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.tusb_init,"ax",%progbits
  18              		.align	1
  19              		.global	tusb_init
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	tusb_init:
  27              	.LFB79:
  28              		.file 1 "tinyusb/src/tusb.c"
   1:tinyusb/src/tusb.c **** /*
   2:tinyusb/src/tusb.c ****  * The MIT License (MIT)
   3:tinyusb/src/tusb.c ****  *
   4:tinyusb/src/tusb.c ****  * Copyright (c) 2019 Ha Thach (tinyusb.org)
   5:tinyusb/src/tusb.c ****  *
   6:tinyusb/src/tusb.c ****  * Permission is hereby granted, free of charge, to any person obtaining a copy
   7:tinyusb/src/tusb.c ****  * of this software and associated documentation files (the "Software"), to deal
   8:tinyusb/src/tusb.c ****  * in the Software without restriction, including without limitation the rights
   9:tinyusb/src/tusb.c ****  * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  10:tinyusb/src/tusb.c ****  * copies of the Software, and to permit persons to whom the Software is
  11:tinyusb/src/tusb.c ****  * furnished to do so, subject to the following conditions:
  12:tinyusb/src/tusb.c ****  *
  13:tinyusb/src/tusb.c ****  * The above copyright notice and this permission notice shall be included in
  14:tinyusb/src/tusb.c ****  * all copies or substantial portions of the Software.
  15:tinyusb/src/tusb.c ****  *
  16:tinyusb/src/tusb.c ****  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  17:tinyusb/src/tusb.c ****  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  18:tinyusb/src/tusb.c ****  * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  19:tinyusb/src/tusb.c ****  * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  20:tinyusb/src/tusb.c ****  * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  21:tinyusb/src/tusb.c ****  * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  22:tinyusb/src/tusb.c ****  * THE SOFTWARE.
  23:tinyusb/src/tusb.c ****  *
  24:tinyusb/src/tusb.c ****  * This file is part of the TinyUSB stack.
  25:tinyusb/src/tusb.c ****  */
  26:tinyusb/src/tusb.c **** 
  27:tinyusb/src/tusb.c **** #include "tusb_option.h"
  28:tinyusb/src/tusb.c **** 
  29:tinyusb/src/tusb.c **** #if CFG_TUH_ENABLED || CFG_TUD_ENABLED
  30:tinyusb/src/tusb.c **** 
ARM GAS  /tmp/ccqgw09y.s 			page 2


  31:tinyusb/src/tusb.c **** #include "tusb.h"
  32:tinyusb/src/tusb.c **** #include "common/tusb_private.h"
  33:tinyusb/src/tusb.c **** 
  34:tinyusb/src/tusb.c **** #if CFG_TUD_ENABLED
  35:tinyusb/src/tusb.c **** #include "device/usbd_pvt.h"
  36:tinyusb/src/tusb.c **** #endif
  37:tinyusb/src/tusb.c **** 
  38:tinyusb/src/tusb.c **** #if CFG_TUH_ENABLED
  39:tinyusb/src/tusb.c **** #include "host/usbh_pvt.h"
  40:tinyusb/src/tusb.c **** #endif
  41:tinyusb/src/tusb.c **** 
  42:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
  43:tinyusb/src/tusb.c **** // Public API
  44:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
  45:tinyusb/src/tusb.c **** 
  46:tinyusb/src/tusb.c **** bool tusb_init(void)
  47:tinyusb/src/tusb.c **** {
  29              		.loc 1 47 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
  48:tinyusb/src/tusb.c **** #if CFG_TUD_ENABLED && defined(TUD_OPT_RHPORT)
  49:tinyusb/src/tusb.c ****   // init device stack CFG_TUSB_RHPORTx_MODE must be defined
  50:tinyusb/src/tusb.c ****   TU_ASSERT ( tud_init(TUD_OPT_RHPORT) );
  38              		.loc 1 50 3 view .LVU1
  39              		.loc 1 50 3 view .LVU2
  40 0002 0020     		movs	r0, #0
  41 0004 FFF7FEFF 		bl	tud_init
  42              	.LVL0:
  43 0008 00B1     		cbz	r0, .L5
  44              	.L2:
  51:tinyusb/src/tusb.c **** #endif
  52:tinyusb/src/tusb.c **** 
  53:tinyusb/src/tusb.c **** #if CFG_TUH_ENABLED && defined(TUH_OPT_RHPORT)
  54:tinyusb/src/tusb.c ****   // init host stack CFG_TUSB_RHPORTx_MODE must be defined
  55:tinyusb/src/tusb.c ****   TU_ASSERT( tuh_init(TUH_OPT_RHPORT) );
  56:tinyusb/src/tusb.c **** #endif
  57:tinyusb/src/tusb.c **** 
  58:tinyusb/src/tusb.c ****   return true;
  59:tinyusb/src/tusb.c **** }
  45              		.loc 1 59 1 is_stmt 0 view .LVU3
  46 000a 08BD     		pop	{r3, pc}
  47              	.L5:
  50:tinyusb/src/tusb.c **** #endif
  48              		.loc 1 50 3 is_stmt 1 discriminator 1 view .LVU4
  50:tinyusb/src/tusb.c **** #endif
  49              		.loc 1 50 3 discriminator 1 view .LVU5
  50:tinyusb/src/tusb.c **** #endif
  50              		.loc 1 50 3 discriminator 1 view .LVU6
  50:tinyusb/src/tusb.c **** #endif
  51              		.loc 1 50 3 discriminator 1 view .LVU7
  52              	.LBB55:
ARM GAS  /tmp/ccqgw09y.s 			page 3


  50:tinyusb/src/tusb.c **** #endif
  53              		.loc 1 50 3 discriminator 1 view .LVU8
  54              	.LVL1:
  50:tinyusb/src/tusb.c **** #endif
  55              		.loc 1 50 3 discriminator 1 view .LVU9
  56 000c 4FF0E023 		mov	r3, #-536813568
  57 0010 D3F8F03D 		ldr	r3, [r3, #3568]
  58 0014 13F0010F 		tst	r3, #1
  59 0018 F7D0     		beq	.L2
  50:tinyusb/src/tusb.c **** #endif
  60              		.loc 1 50 3 discriminator 3 view .LVU10
  61              		.syntax unified
  62              	@ 50 "tinyusb/src/tusb.c" 1
  63 001a 00BE     		BKPT #0
  64              	
  65              	@ 0 "" 2
  66              		.thumb
  67              		.syntax unified
  68              	.LBE55:
  50:tinyusb/src/tusb.c **** #endif
  69              		.loc 1 50 3 discriminator 3 view .LVU11
  50:tinyusb/src/tusb.c **** #endif
  70              		.loc 1 50 3 discriminator 3 view .LVU12
  71 001c F5E7     		b	.L2
  72              		.cfi_endproc
  73              	.LFE79:
  75              		.section	.text.tusb_inited,"ax",%progbits
  76              		.align	1
  77              		.global	tusb_inited
  78              		.syntax unified
  79              		.thumb
  80              		.thumb_func
  81              		.fpu fpv4-sp-d16
  83              	tusb_inited:
  84              	.LFB80:
  60:tinyusb/src/tusb.c **** 
  61:tinyusb/src/tusb.c **** bool tusb_inited(void)
  62:tinyusb/src/tusb.c **** {
  85              		.loc 1 62 1 view -0
  86              		.cfi_startproc
  87              		@ args = 0, pretend = 0, frame = 0
  88              		@ frame_needed = 0, uses_anonymous_args = 0
  89 0000 08B5     		push	{r3, lr}
  90              	.LCFI1:
  91              		.cfi_def_cfa_offset 8
  92              		.cfi_offset 3, -8
  93              		.cfi_offset 14, -4
  63:tinyusb/src/tusb.c ****   bool ret = false;
  94              		.loc 1 63 3 view .LVU14
  95              	.LVL2:
  64:tinyusb/src/tusb.c **** 
  65:tinyusb/src/tusb.c **** #if CFG_TUD_ENABLED
  66:tinyusb/src/tusb.c ****   ret = ret || tud_inited();
  96              		.loc 1 66 3 view .LVU15
  97              		.loc 1 66 16 is_stmt 0 view .LVU16
  98 0002 FFF7FEFF 		bl	tud_inited
  99              	.LVL3:
ARM GAS  /tmp/ccqgw09y.s 			page 4


 100              		.loc 1 66 13 view .LVU17
 101 0006 00B1     		cbz	r0, .L7
 102 0008 0120     		movs	r0, #1
 103              	.L7:
 104              	.LVL4:
  67:tinyusb/src/tusb.c **** #endif
  68:tinyusb/src/tusb.c **** 
  69:tinyusb/src/tusb.c **** #if CFG_TUH_ENABLED
  70:tinyusb/src/tusb.c ****   ret = ret || tuh_inited();
  71:tinyusb/src/tusb.c **** #endif
  72:tinyusb/src/tusb.c **** 
  73:tinyusb/src/tusb.c ****   return ret;
 105              		.loc 1 73 3 is_stmt 1 discriminator 6 view .LVU18
  74:tinyusb/src/tusb.c **** }
 106              		.loc 1 74 1 is_stmt 0 discriminator 6 view .LVU19
 107 000a 08BD     		pop	{r3, pc}
 108              		.cfi_endproc
 109              	.LFE80:
 111              		.section	.text.tu_desc_find,"ax",%progbits
 112              		.align	1
 113              		.global	tu_desc_find
 114              		.syntax unified
 115              		.thumb
 116              		.thumb_func
 117              		.fpu fpv4-sp-d16
 119              	tu_desc_find:
 120              	.LVL5:
 121              	.LFB81:
  75:tinyusb/src/tusb.c **** 
  76:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
  77:tinyusb/src/tusb.c **** // Descriptor helper
  78:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
  79:tinyusb/src/tusb.c **** 
  80:tinyusb/src/tusb.c **** uint8_t const * tu_desc_find(uint8_t const* desc, uint8_t const* end, uint8_t byte1)
  81:tinyusb/src/tusb.c **** {
 122              		.loc 1 81 1 is_stmt 1 view -0
 123              		.cfi_startproc
 124              		@ args = 0, pretend = 0, frame = 0
 125              		@ frame_needed = 0, uses_anonymous_args = 0
 126              		@ link register save eliminated.
  82:tinyusb/src/tusb.c ****   while(desc+1 < end)
 127              		.loc 1 82 3 view .LVU21
 128              		.loc 1 82 8 is_stmt 0 view .LVU22
 129 0000 01E0     		b	.L11
 130              	.L16:
  83:tinyusb/src/tusb.c ****   {
  84:tinyusb/src/tusb.c ****     if ( desc[1] == byte1 ) return desc;
  85:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 131              		.loc 1 85 5 is_stmt 1 view .LVU23
 132              		.loc 1 85 17 is_stmt 0 view .LVU24
 133 0002 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 134              		.loc 1 85 10 view .LVU25
 135 0004 1844     		add	r0, r0, r3
 136              	.LVL6:
 137              	.L11:
  82:tinyusb/src/tusb.c ****   while(desc+1 < end)
 138              		.loc 1 82 8 is_stmt 1 view .LVU26
ARM GAS  /tmp/ccqgw09y.s 			page 5


  82:tinyusb/src/tusb.c ****   while(desc+1 < end)
 139              		.loc 1 82 13 is_stmt 0 view .LVU27
 140 0006 431C     		adds	r3, r0, #1
  82:tinyusb/src/tusb.c ****   while(desc+1 < end)
 141              		.loc 1 82 8 view .LVU28
 142 0008 8B42     		cmp	r3, r1
 143 000a 03D2     		bcs	.L15
  84:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 144              		.loc 1 84 5 is_stmt 1 view .LVU29
  84:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 145              		.loc 1 84 14 is_stmt 0 view .LVU30
 146 000c 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
  84:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 147              		.loc 1 84 8 view .LVU31
 148 000e 9342     		cmp	r3, r2
 149 0010 F7D1     		bne	.L16
 150 0012 00E0     		b	.L10
 151              	.L15:
  86:tinyusb/src/tusb.c ****   }
  87:tinyusb/src/tusb.c ****   return NULL;
 152              		.loc 1 87 10 view .LVU32
 153 0014 0020     		movs	r0, #0
 154              	.LVL7:
 155              	.L10:
  88:tinyusb/src/tusb.c **** }
 156              		.loc 1 88 1 view .LVU33
 157 0016 7047     		bx	lr
 158              		.cfi_endproc
 159              	.LFE81:
 161              		.section	.text.tu_desc_find2,"ax",%progbits
 162              		.align	1
 163              		.global	tu_desc_find2
 164              		.syntax unified
 165              		.thumb
 166              		.thumb_func
 167              		.fpu fpv4-sp-d16
 169              	tu_desc_find2:
 170              	.LVL8:
 171              	.LFB82:
  89:tinyusb/src/tusb.c **** 
  90:tinyusb/src/tusb.c **** uint8_t const * tu_desc_find2(uint8_t const* desc, uint8_t const* end, uint8_t byte1, uint8_t byte2
  91:tinyusb/src/tusb.c **** {
 172              		.loc 1 91 1 is_stmt 1 view -0
 173              		.cfi_startproc
 174              		@ args = 0, pretend = 0, frame = 0
 175              		@ frame_needed = 0, uses_anonymous_args = 0
 176              		@ link register save eliminated.
  92:tinyusb/src/tusb.c ****   while(desc+2 < end)
 177              		.loc 1 92 3 view .LVU35
 178              		.loc 1 92 8 is_stmt 0 view .LVU36
 179 0000 02E0     		b	.L18
 180              	.L19:
  93:tinyusb/src/tusb.c ****   {
  94:tinyusb/src/tusb.c ****     if ( desc[1] == byte1 && desc[2] == byte2) return desc;
  95:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 181              		.loc 1 95 5 is_stmt 1 view .LVU37
 182              		.loc 1 95 17 is_stmt 0 view .LVU38
ARM GAS  /tmp/ccqgw09y.s 			page 6


 183 0002 90F800C0 		ldrb	ip, [r0]	@ zero_extendqisi2
 184              		.loc 1 95 10 view .LVU39
 185 0006 6044     		add	r0, r0, ip
 186              	.LVL9:
 187              	.L18:
  92:tinyusb/src/tusb.c ****   while(desc+2 < end)
 188              		.loc 1 92 8 is_stmt 1 view .LVU40
  92:tinyusb/src/tusb.c ****   while(desc+2 < end)
 189              		.loc 1 92 13 is_stmt 0 view .LVU41
 190 0008 00F1020C 		add	ip, r0, #2
  92:tinyusb/src/tusb.c ****   while(desc+2 < end)
 191              		.loc 1 92 8 view .LVU42
 192 000c 8C45     		cmp	ip, r1
 193 000e 08D2     		bcs	.L23
  94:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 194              		.loc 1 94 5 is_stmt 1 view .LVU43
  94:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 195              		.loc 1 94 14 is_stmt 0 view .LVU44
 196 0010 90F801C0 		ldrb	ip, [r0, #1]	@ zero_extendqisi2
  94:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 197              		.loc 1 94 8 view .LVU45
 198 0014 9445     		cmp	ip, r2
 199 0016 F4D1     		bne	.L19
  94:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 200              		.loc 1 94 34 discriminator 1 view .LVU46
 201 0018 90F802C0 		ldrb	ip, [r0, #2]	@ zero_extendqisi2
  94:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 202              		.loc 1 94 27 discriminator 1 view .LVU47
 203 001c 9C45     		cmp	ip, r3
 204 001e F0D1     		bne	.L19
 205 0020 00E0     		b	.L17
 206              	.L23:
  96:tinyusb/src/tusb.c ****   }
  97:tinyusb/src/tusb.c ****   return NULL;
 207              		.loc 1 97 10 view .LVU48
 208 0022 0020     		movs	r0, #0
 209              	.LVL10:
 210              	.L17:
  98:tinyusb/src/tusb.c **** }
 211              		.loc 1 98 1 view .LVU49
 212 0024 7047     		bx	lr
 213              		.cfi_endproc
 214              	.LFE82:
 216              		.section	.text.tu_desc_find3,"ax",%progbits
 217              		.align	1
 218              		.global	tu_desc_find3
 219              		.syntax unified
 220              		.thumb
 221              		.thumb_func
 222              		.fpu fpv4-sp-d16
 224              	tu_desc_find3:
 225              	.LVL11:
 226              	.LFB83:
  99:tinyusb/src/tusb.c **** 
 100:tinyusb/src/tusb.c **** uint8_t const * tu_desc_find3(uint8_t const* desc, uint8_t const* end, uint8_t byte1, uint8_t byte2
 101:tinyusb/src/tusb.c **** {
 227              		.loc 1 101 1 is_stmt 1 view -0
ARM GAS  /tmp/ccqgw09y.s 			page 7


 228              		.cfi_startproc
 229              		@ args = 4, pretend = 0, frame = 0
 230              		@ frame_needed = 0, uses_anonymous_args = 0
 231              		.loc 1 101 1 is_stmt 0 view .LVU51
 232 0000 00B5     		push	{lr}
 233              	.LCFI2:
 234              		.cfi_def_cfa_offset 4
 235              		.cfi_offset 14, -4
 236 0002 9DF804E0 		ldrb	lr, [sp, #4]	@ zero_extendqisi2
 102:tinyusb/src/tusb.c ****   while(desc+3 < end)
 237              		.loc 1 102 3 is_stmt 1 view .LVU52
 238              		.loc 1 102 8 is_stmt 0 view .LVU53
 239 0006 02E0     		b	.L25
 240              	.L26:
 103:tinyusb/src/tusb.c ****   {
 104:tinyusb/src/tusb.c ****     if (desc[1] == byte1 && desc[2] == byte2 && desc[3] == byte3) return desc;
 105:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 241              		.loc 1 105 5 is_stmt 1 view .LVU54
 242              		.loc 1 105 17 is_stmt 0 view .LVU55
 243 0008 90F800C0 		ldrb	ip, [r0]	@ zero_extendqisi2
 244              		.loc 1 105 10 view .LVU56
 245 000c 6044     		add	r0, r0, ip
 246              	.LVL12:
 247              	.L25:
 102:tinyusb/src/tusb.c ****   while(desc+3 < end)
 248              		.loc 1 102 8 is_stmt 1 view .LVU57
 102:tinyusb/src/tusb.c ****   while(desc+3 < end)
 249              		.loc 1 102 13 is_stmt 0 view .LVU58
 250 000e 00F1030C 		add	ip, r0, #3
 102:tinyusb/src/tusb.c ****   while(desc+3 < end)
 251              		.loc 1 102 8 view .LVU59
 252 0012 8C45     		cmp	ip, r1
 253 0014 0CD2     		bcs	.L31
 104:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 254              		.loc 1 104 5 is_stmt 1 view .LVU60
 104:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 255              		.loc 1 104 13 is_stmt 0 view .LVU61
 256 0016 90F801C0 		ldrb	ip, [r0, #1]	@ zero_extendqisi2
 104:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 257              		.loc 1 104 8 view .LVU62
 258 001a 9445     		cmp	ip, r2
 259 001c F4D1     		bne	.L26
 104:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 260              		.loc 1 104 33 discriminator 1 view .LVU63
 261 001e 90F802C0 		ldrb	ip, [r0, #2]	@ zero_extendqisi2
 104:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 262              		.loc 1 104 26 discriminator 1 view .LVU64
 263 0022 9C45     		cmp	ip, r3
 264 0024 F0D1     		bne	.L26
 104:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 265              		.loc 1 104 53 discriminator 2 view .LVU65
 266 0026 90F803C0 		ldrb	ip, [r0, #3]	@ zero_extendqisi2
 104:tinyusb/src/tusb.c ****     desc += desc[DESC_OFFSET_LEN];
 267              		.loc 1 104 46 discriminator 2 view .LVU66
 268 002a F445     		cmp	ip, lr
 269 002c ECD1     		bne	.L26
 270 002e 00E0     		b	.L24
ARM GAS  /tmp/ccqgw09y.s 			page 8


 271              	.L31:
 106:tinyusb/src/tusb.c ****   }
 107:tinyusb/src/tusb.c ****   return NULL;
 272              		.loc 1 107 10 view .LVU67
 273 0030 0020     		movs	r0, #0
 274              	.LVL13:
 275              	.L24:
 108:tinyusb/src/tusb.c **** }
 276              		.loc 1 108 1 view .LVU68
 277 0032 5DF804FB 		ldr	pc, [sp], #4
 278              		.loc 1 108 1 view .LVU69
 279              		.cfi_endproc
 280              	.LFE83:
 282              		.section	.text.tu_edpt_claim,"ax",%progbits
 283              		.align	1
 284              		.global	tu_edpt_claim
 285              		.syntax unified
 286              		.thumb
 287              		.thumb_func
 288              		.fpu fpv4-sp-d16
 290              	tu_edpt_claim:
 291              	.LVL14:
 292              	.LFB84:
 109:tinyusb/src/tusb.c **** 
 110:tinyusb/src/tusb.c **** 
 111:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
 112:tinyusb/src/tusb.c **** // Endpoint Helper for both Host and Device stack
 113:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
 114:tinyusb/src/tusb.c **** 
 115:tinyusb/src/tusb.c **** bool tu_edpt_claim(tu_edpt_state_t* ep_state, osal_mutex_t mutex)
 116:tinyusb/src/tusb.c **** {
 293              		.loc 1 116 1 is_stmt 1 view -0
 294              		.cfi_startproc
 295              		@ args = 0, pretend = 0, frame = 0
 296              		@ frame_needed = 0, uses_anonymous_args = 0
 297              		@ link register save eliminated.
 298              		.loc 1 116 1 is_stmt 0 view .LVU71
 299 0000 0246     		mov	r2, r0
 117:tinyusb/src/tusb.c ****   (void) mutex;
 300              		.loc 1 117 3 is_stmt 1 view .LVU72
 118:tinyusb/src/tusb.c **** 
 119:tinyusb/src/tusb.c ****   // pre-check to help reducing mutex lock
 120:tinyusb/src/tusb.c ****   TU_VERIFY((ep_state->busy == 0) && (ep_state->claimed == 0));
 301              		.loc 1 120 3 view .LVU73
 302              		.loc 1 120 3 view .LVU74
 303 0002 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 304 0004 13F00100 		ands	r0, r3, #1
 305              	.LVL15:
 306              		.loc 1 120 3 is_stmt 0 view .LVU75
 307 0008 17D1     		bne	.L35
 308              		.loc 1 120 3 discriminator 2 view .LVU76
 309 000a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 310 000c 13F0040F 		tst	r3, #4
 311 0010 14D1     		bne	.L33
 312              		.loc 1 120 3 is_stmt 1 discriminator 4 view .LVU77
 121:tinyusb/src/tusb.c ****   (void) osal_mutex_lock(mutex, OSAL_TIMEOUT_WAIT_FOREVER);
 313              		.loc 1 121 3 discriminator 4 view .LVU78
ARM GAS  /tmp/ccqgw09y.s 			page 9


 122:tinyusb/src/tusb.c **** 
 123:tinyusb/src/tusb.c ****   // can only claim the endpoint if it is not busy and not claimed yet.
 124:tinyusb/src/tusb.c ****   bool const available = (ep_state->busy == 0) && (ep_state->claimed == 0);
 314              		.loc 1 124 3 discriminator 4 view .LVU79
 315              		.loc 1 124 35 is_stmt 0 discriminator 4 view .LVU80
 316 0012 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 317              		.loc 1 124 48 discriminator 4 view .LVU81
 318 0014 13F0010F 		tst	r3, #1
 319 0018 05D1     		bne	.L36
 320              		.loc 1 124 60 discriminator 1 view .LVU82
 321 001a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 322              		.loc 1 124 48 discriminator 1 view .LVU83
 323 001c 13F0040F 		tst	r3, #4
 324 0020 09D0     		beq	.L37
 325              		.loc 1 124 48 view .LVU84
 326 0022 0023     		movs	r3, #0
 327 0024 00E0     		b	.L34
 328              	.L36:
 329 0026 0023     		movs	r3, #0
 330              	.L34:
 331              	.LVL16:
 125:tinyusb/src/tusb.c ****   if (available)
 332              		.loc 1 125 3 is_stmt 1 discriminator 6 view .LVU85
 333              		.loc 1 125 6 is_stmt 0 discriminator 6 view .LVU86
 334 0028 1846     		mov	r0, r3
 335 002a 3BB1     		cbz	r3, .L33
 126:tinyusb/src/tusb.c ****   {
 127:tinyusb/src/tusb.c ****     ep_state->claimed = 1;
 336              		.loc 1 127 5 is_stmt 1 view .LVU87
 337              		.loc 1 127 23 is_stmt 0 view .LVU88
 338 002c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 339              	.LVL17:
 340              		.loc 1 127 23 view .LVU89
 341 002e 43F00403 		orr	r3, r3, #4
 342 0032 1370     		strb	r3, [r2]
 343 0034 7047     		bx	lr
 344              	.L37:
 124:tinyusb/src/tusb.c ****   if (available)
 345              		.loc 1 124 48 view .LVU90
 346 0036 0123     		movs	r3, #1
 347 0038 F6E7     		b	.L34
 348              	.L35:
 120:tinyusb/src/tusb.c ****   (void) osal_mutex_lock(mutex, OSAL_TIMEOUT_WAIT_FOREVER);
 349              		.loc 1 120 3 view .LVU91
 350 003a 0020     		movs	r0, #0
 351              	.L33:
 128:tinyusb/src/tusb.c ****   }
 129:tinyusb/src/tusb.c **** 
 130:tinyusb/src/tusb.c ****   (void) osal_mutex_unlock(mutex);
 131:tinyusb/src/tusb.c **** 
 132:tinyusb/src/tusb.c ****   return available;
 133:tinyusb/src/tusb.c **** }
 352              		.loc 1 133 1 view .LVU92
 353 003c 7047     		bx	lr
 354              		.cfi_endproc
 355              	.LFE84:
 357              		.section	.text.tu_edpt_release,"ax",%progbits
ARM GAS  /tmp/ccqgw09y.s 			page 10


 358              		.align	1
 359              		.global	tu_edpt_release
 360              		.syntax unified
 361              		.thumb
 362              		.thumb_func
 363              		.fpu fpv4-sp-d16
 365              	tu_edpt_release:
 366              	.LVL18:
 367              	.LFB85:
 134:tinyusb/src/tusb.c **** 
 135:tinyusb/src/tusb.c **** bool tu_edpt_release(tu_edpt_state_t* ep_state, osal_mutex_t mutex)
 136:tinyusb/src/tusb.c **** {
 368              		.loc 1 136 1 is_stmt 1 view -0
 369              		.cfi_startproc
 370              		@ args = 0, pretend = 0, frame = 0
 371              		@ frame_needed = 0, uses_anonymous_args = 0
 372              		@ link register save eliminated.
 373              		.loc 1 136 1 is_stmt 0 view .LVU94
 374 0000 0346     		mov	r3, r0
 137:tinyusb/src/tusb.c ****   (void) mutex;
 375              		.loc 1 137 3 is_stmt 1 view .LVU95
 138:tinyusb/src/tusb.c **** 
 139:tinyusb/src/tusb.c ****   (void) osal_mutex_lock(mutex, OSAL_TIMEOUT_WAIT_FOREVER);
 376              		.loc 1 139 3 view .LVU96
 140:tinyusb/src/tusb.c **** 
 141:tinyusb/src/tusb.c ****   // can only release the endpoint if it is claimed and not busy
 142:tinyusb/src/tusb.c ****   bool const ret = (ep_state->claimed == 1) && (ep_state->busy == 0);
 377              		.loc 1 142 3 view .LVU97
 378              		.loc 1 142 29 is_stmt 0 view .LVU98
 379 0002 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 380              		.loc 1 142 45 view .LVU99
 381 0004 12F0040F 		tst	r2, #4
 382 0008 07D1     		bne	.L43
 383 000a 0022     		movs	r2, #0
 384              	.L39:
 385              	.LVL19:
 143:tinyusb/src/tusb.c ****   if (ret)
 386              		.loc 1 143 3 is_stmt 1 discriminator 6 view .LVU100
 387              		.loc 1 143 6 is_stmt 0 discriminator 6 view .LVU101
 388 000c 1046     		mov	r0, r2
 389              	.LVL20:
 390              		.loc 1 143 6 discriminator 6 view .LVU102
 391 000e 1AB1     		cbz	r2, .L40
 144:tinyusb/src/tusb.c ****   {
 145:tinyusb/src/tusb.c ****     ep_state->claimed = 0;
 392              		.loc 1 145 5 is_stmt 1 view .LVU103
 393              		.loc 1 145 23 is_stmt 0 view .LVU104
 394 0010 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 395              	.LVL21:
 396              		.loc 1 145 23 view .LVU105
 397 0012 6FF38202 		bfc	r2, #2, #1
 398 0016 1A70     		strb	r2, [r3]
 399              	.L40:
 146:tinyusb/src/tusb.c ****   }
 147:tinyusb/src/tusb.c **** 
 148:tinyusb/src/tusb.c ****   (void) osal_mutex_unlock(mutex);
 400              		.loc 1 148 3 is_stmt 1 view .LVU106
ARM GAS  /tmp/ccqgw09y.s 			page 11


 149:tinyusb/src/tusb.c **** 
 150:tinyusb/src/tusb.c ****   return ret;
 401              		.loc 1 150 3 view .LVU107
 151:tinyusb/src/tusb.c **** }
 402              		.loc 1 151 1 is_stmt 0 view .LVU108
 403 0018 7047     		bx	lr
 404              	.LVL22:
 405              	.L43:
 142:tinyusb/src/tusb.c ****   if (ret)
 406              		.loc 1 142 57 discriminator 1 view .LVU109
 407 001a 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 142:tinyusb/src/tusb.c ****   if (ret)
 408              		.loc 1 142 45 discriminator 1 view .LVU110
 409 001c 12F0010F 		tst	r2, #1
 410 0020 01D0     		beq	.L42
 142:tinyusb/src/tusb.c ****   if (ret)
 411              		.loc 1 142 45 view .LVU111
 412 0022 0022     		movs	r2, #0
 413 0024 F2E7     		b	.L39
 414              	.L42:
 415 0026 0122     		movs	r2, #1
 416 0028 F0E7     		b	.L39
 417              		.cfi_endproc
 418              	.LFE85:
 420              		.section	.text.tu_edpt_validate,"ax",%progbits
 421              		.align	1
 422              		.global	tu_edpt_validate
 423              		.syntax unified
 424              		.thumb
 425              		.thumb_func
 426              		.fpu fpv4-sp-d16
 428              	tu_edpt_validate:
 429              	.LVL23:
 430              	.LFB86:
 152:tinyusb/src/tusb.c **** 
 153:tinyusb/src/tusb.c **** bool tu_edpt_validate(tusb_desc_endpoint_t const * desc_ep, tusb_speed_t speed)
 154:tinyusb/src/tusb.c **** {
 431              		.loc 1 154 1 is_stmt 1 view -0
 432              		.cfi_startproc
 433              		@ args = 0, pretend = 0, frame = 0
 434              		@ frame_needed = 0, uses_anonymous_args = 0
 435              		@ link register save eliminated.
 155:tinyusb/src/tusb.c ****   uint16_t const max_packet_size = tu_edpt_packet_size(desc_ep);
 436              		.loc 1 155 3 view .LVU113
 437              	.LBB56:
 438              	.LBI56:
 439              		.file 2 "tinyusb/src/common/tusb_types.h"
   1:tinyusb/src/common/tusb_types.h **** /*
   2:tinyusb/src/common/tusb_types.h ****  * The MIT License (MIT)
   3:tinyusb/src/common/tusb_types.h ****  *
   4:tinyusb/src/common/tusb_types.h ****  * Copyright (c) 2019 Ha Thach (tinyusb.org)
   5:tinyusb/src/common/tusb_types.h ****  *
   6:tinyusb/src/common/tusb_types.h ****  * Permission is hereby granted, free of charge, to any person obtaining a copy
   7:tinyusb/src/common/tusb_types.h ****  * of this software and associated documentation files (the "Software"), to deal
   8:tinyusb/src/common/tusb_types.h ****  * in the Software without restriction, including without limitation the rights
   9:tinyusb/src/common/tusb_types.h ****  * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  10:tinyusb/src/common/tusb_types.h ****  * copies of the Software, and to permit persons to whom the Software is
ARM GAS  /tmp/ccqgw09y.s 			page 12


  11:tinyusb/src/common/tusb_types.h ****  * furnished to do so, subject to the following conditions:
  12:tinyusb/src/common/tusb_types.h ****  *
  13:tinyusb/src/common/tusb_types.h ****  * The above copyright notice and this permission notice shall be included in
  14:tinyusb/src/common/tusb_types.h ****  * all copies or substantial portions of the Software.
  15:tinyusb/src/common/tusb_types.h ****  *
  16:tinyusb/src/common/tusb_types.h ****  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  17:tinyusb/src/common/tusb_types.h ****  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  18:tinyusb/src/common/tusb_types.h ****  * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  19:tinyusb/src/common/tusb_types.h ****  * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  20:tinyusb/src/common/tusb_types.h ****  * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  21:tinyusb/src/common/tusb_types.h ****  * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  22:tinyusb/src/common/tusb_types.h ****  * THE SOFTWARE.
  23:tinyusb/src/common/tusb_types.h ****  *
  24:tinyusb/src/common/tusb_types.h ****  * This file is part of the TinyUSB stack.
  25:tinyusb/src/common/tusb_types.h ****  */
  26:tinyusb/src/common/tusb_types.h **** 
  27:tinyusb/src/common/tusb_types.h **** /** \ingroup group_usb_definitions
  28:tinyusb/src/common/tusb_types.h ****  *  \defgroup USBDef_Type USB Types
  29:tinyusb/src/common/tusb_types.h ****  *  @{ */
  30:tinyusb/src/common/tusb_types.h **** 
  31:tinyusb/src/common/tusb_types.h **** #ifndef _TUSB_TYPES_H_
  32:tinyusb/src/common/tusb_types.h **** #define _TUSB_TYPES_H_
  33:tinyusb/src/common/tusb_types.h **** 
  34:tinyusb/src/common/tusb_types.h **** #include <stdbool.h>
  35:tinyusb/src/common/tusb_types.h **** #include <stdint.h>
  36:tinyusb/src/common/tusb_types.h **** #include "tusb_compiler.h"
  37:tinyusb/src/common/tusb_types.h **** 
  38:tinyusb/src/common/tusb_types.h **** #ifdef __cplusplus
  39:tinyusb/src/common/tusb_types.h ****  extern "C" {
  40:tinyusb/src/common/tusb_types.h **** #endif
  41:tinyusb/src/common/tusb_types.h **** 
  42:tinyusb/src/common/tusb_types.h **** /*------------------------------------------------------------------*/
  43:tinyusb/src/common/tusb_types.h **** /* CONSTANTS
  44:tinyusb/src/common/tusb_types.h ****  *------------------------------------------------------------------*/
  45:tinyusb/src/common/tusb_types.h **** 
  46:tinyusb/src/common/tusb_types.h **** /// defined base on EHCI specs value for Endpoint Speed
  47:tinyusb/src/common/tusb_types.h **** typedef enum
  48:tinyusb/src/common/tusb_types.h **** {
  49:tinyusb/src/common/tusb_types.h ****   TUSB_SPEED_FULL = 0,
  50:tinyusb/src/common/tusb_types.h ****   TUSB_SPEED_LOW  = 1,
  51:tinyusb/src/common/tusb_types.h ****   TUSB_SPEED_HIGH = 2,
  52:tinyusb/src/common/tusb_types.h ****   TUSB_SPEED_INVALID = 0xff,
  53:tinyusb/src/common/tusb_types.h **** }tusb_speed_t;
  54:tinyusb/src/common/tusb_types.h **** 
  55:tinyusb/src/common/tusb_types.h **** /// defined base on USB Specs Endpoint's bmAttributes
  56:tinyusb/src/common/tusb_types.h **** typedef enum
  57:tinyusb/src/common/tusb_types.h **** {
  58:tinyusb/src/common/tusb_types.h ****   TUSB_XFER_CONTROL = 0 ,
  59:tinyusb/src/common/tusb_types.h ****   TUSB_XFER_ISOCHRONOUS ,
  60:tinyusb/src/common/tusb_types.h ****   TUSB_XFER_BULK        ,
  61:tinyusb/src/common/tusb_types.h ****   TUSB_XFER_INTERRUPT
  62:tinyusb/src/common/tusb_types.h **** }tusb_xfer_type_t;
  63:tinyusb/src/common/tusb_types.h **** 
  64:tinyusb/src/common/tusb_types.h **** typedef enum
  65:tinyusb/src/common/tusb_types.h **** {
  66:tinyusb/src/common/tusb_types.h ****   TUSB_DIR_OUT = 0,
  67:tinyusb/src/common/tusb_types.h ****   TUSB_DIR_IN  = 1,
ARM GAS  /tmp/ccqgw09y.s 			page 13


  68:tinyusb/src/common/tusb_types.h **** 
  69:tinyusb/src/common/tusb_types.h ****   TUSB_DIR_IN_MASK = 0x80
  70:tinyusb/src/common/tusb_types.h **** }tusb_dir_t;
  71:tinyusb/src/common/tusb_types.h **** 
  72:tinyusb/src/common/tusb_types.h **** enum
  73:tinyusb/src/common/tusb_types.h **** {
  74:tinyusb/src/common/tusb_types.h ****   TUSB_EPSIZE_BULK_FS = 64,
  75:tinyusb/src/common/tusb_types.h ****   TUSB_EPSIZE_BULK_HS= 512,
  76:tinyusb/src/common/tusb_types.h **** 
  77:tinyusb/src/common/tusb_types.h ****   TUSB_EPSIZE_ISO_FS_MAX = 1023,
  78:tinyusb/src/common/tusb_types.h ****   TUSB_EPSIZE_ISO_HS_MAX = 1024,
  79:tinyusb/src/common/tusb_types.h **** };
  80:tinyusb/src/common/tusb_types.h **** 
  81:tinyusb/src/common/tusb_types.h **** /// Isochronous End Point Attributes
  82:tinyusb/src/common/tusb_types.h **** typedef enum
  83:tinyusb/src/common/tusb_types.h **** {
  84:tinyusb/src/common/tusb_types.h ****   TUSB_ISO_EP_ATT_NO_SYNC         = 0x00,
  85:tinyusb/src/common/tusb_types.h ****   TUSB_ISO_EP_ATT_ASYNCHRONOUS    = 0x04,
  86:tinyusb/src/common/tusb_types.h ****   TUSB_ISO_EP_ATT_ADAPTIVE        = 0x08,
  87:tinyusb/src/common/tusb_types.h ****   TUSB_ISO_EP_ATT_SYNCHRONOUS     = 0x0C,
  88:tinyusb/src/common/tusb_types.h ****   TUSB_ISO_EP_ATT_DATA            = 0x00, ///< Data End Point
  89:tinyusb/src/common/tusb_types.h ****   TUSB_ISO_EP_ATT_EXPLICIT_FB     = 0x10, ///< Feedback End Point
  90:tinyusb/src/common/tusb_types.h ****   TUSB_ISO_EP_ATT_IMPLICIT_FB     = 0x20, ///< Data endpoint that also serves as an implicit feedba
  91:tinyusb/src/common/tusb_types.h **** }tusb_iso_ep_attribute_t;
  92:tinyusb/src/common/tusb_types.h **** 
  93:tinyusb/src/common/tusb_types.h **** /// USB Descriptor Types
  94:tinyusb/src/common/tusb_types.h **** typedef enum
  95:tinyusb/src/common/tusb_types.h **** {
  96:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_DEVICE                = 0x01,
  97:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_CONFIGURATION         = 0x02,
  98:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_STRING                = 0x03,
  99:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_INTERFACE             = 0x04,
 100:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_ENDPOINT              = 0x05,
 101:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_DEVICE_QUALIFIER      = 0x06,
 102:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_OTHER_SPEED_CONFIG    = 0x07,
 103:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_INTERFACE_POWER       = 0x08,
 104:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_OTG                   = 0x09,
 105:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_DEBUG                 = 0x0A,
 106:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_INTERFACE_ASSOCIATION = 0x0B,
 107:tinyusb/src/common/tusb_types.h **** 
 108:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_BOS                   = 0x0F,
 109:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_DEVICE_CAPABILITY     = 0x10,
 110:tinyusb/src/common/tusb_types.h **** 
 111:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_FUNCTIONAL            = 0x21,
 112:tinyusb/src/common/tusb_types.h **** 
 113:tinyusb/src/common/tusb_types.h ****   // Class Specific Descriptor
 114:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_CS_DEVICE             = 0x21,
 115:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_CS_CONFIGURATION      = 0x22,
 116:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_CS_STRING             = 0x23,
 117:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_CS_INTERFACE          = 0x24,
 118:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_CS_ENDPOINT           = 0x25,
 119:tinyusb/src/common/tusb_types.h **** 
 120:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_SUPERSPEED_ENDPOINT_COMPANION     = 0x30,
 121:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_SUPERSPEED_ISO_ENDPOINT_COMPANION = 0x31
 122:tinyusb/src/common/tusb_types.h **** }tusb_desc_type_t;
 123:tinyusb/src/common/tusb_types.h **** 
 124:tinyusb/src/common/tusb_types.h **** typedef enum
ARM GAS  /tmp/ccqgw09y.s 			page 14


 125:tinyusb/src/common/tusb_types.h **** {
 126:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_GET_STATUS        = 0  ,
 127:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_CLEAR_FEATURE     = 1  ,
 128:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_RESERVED          = 2  ,
 129:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_SET_FEATURE       = 3  ,
 130:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_RESERVED2         = 4  ,
 131:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_SET_ADDRESS       = 5  ,
 132:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_GET_DESCRIPTOR    = 6  ,
 133:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_SET_DESCRIPTOR    = 7  ,
 134:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_GET_CONFIGURATION = 8  ,
 135:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_SET_CONFIGURATION = 9  ,
 136:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_GET_INTERFACE     = 10 ,
 137:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_SET_INTERFACE     = 11 ,
 138:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_SYNCH_FRAME       = 12
 139:tinyusb/src/common/tusb_types.h **** }tusb_request_code_t;
 140:tinyusb/src/common/tusb_types.h **** 
 141:tinyusb/src/common/tusb_types.h **** typedef enum
 142:tinyusb/src/common/tusb_types.h **** {
 143:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_FEATURE_EDPT_HALT     = 0,
 144:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_FEATURE_REMOTE_WAKEUP = 1,
 145:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_FEATURE_TEST_MODE     = 2
 146:tinyusb/src/common/tusb_types.h **** }tusb_request_feature_selector_t;
 147:tinyusb/src/common/tusb_types.h **** 
 148:tinyusb/src/common/tusb_types.h **** typedef enum
 149:tinyusb/src/common/tusb_types.h **** {
 150:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_TYPE_STANDARD = 0,
 151:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_TYPE_CLASS,
 152:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_TYPE_VENDOR,
 153:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_TYPE_INVALID
 154:tinyusb/src/common/tusb_types.h **** } tusb_request_type_t;
 155:tinyusb/src/common/tusb_types.h **** 
 156:tinyusb/src/common/tusb_types.h **** typedef enum
 157:tinyusb/src/common/tusb_types.h **** {
 158:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_RCPT_DEVICE =0,
 159:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_RCPT_INTERFACE,
 160:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_RCPT_ENDPOINT,
 161:tinyusb/src/common/tusb_types.h ****   TUSB_REQ_RCPT_OTHER
 162:tinyusb/src/common/tusb_types.h **** } tusb_request_recipient_t;
 163:tinyusb/src/common/tusb_types.h **** 
 164:tinyusb/src/common/tusb_types.h **** // https://www.usb.org/defined-class-codes
 165:tinyusb/src/common/tusb_types.h **** typedef enum
 166:tinyusb/src/common/tusb_types.h **** {
 167:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_UNSPECIFIED          = 0    ,
 168:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_AUDIO                = 1    ,
 169:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_CDC                  = 2    ,
 170:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_HID                  = 3    ,
 171:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_RESERVED_4           = 4    ,
 172:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_PHYSICAL             = 5    ,
 173:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_IMAGE                = 6    ,
 174:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_PRINTER              = 7    ,
 175:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_MSC                  = 8    ,
 176:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_HUB                  = 9    ,
 177:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_CDC_DATA             = 10   ,
 178:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_SMART_CARD           = 11   ,
 179:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_RESERVED_12          = 12   ,
 180:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_CONTENT_SECURITY     = 13   ,
 181:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_VIDEO                = 14   ,
ARM GAS  /tmp/ccqgw09y.s 			page 15


 182:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_PERSONAL_HEALTHCARE  = 15   ,
 183:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_AUDIO_VIDEO          = 16   ,
 184:tinyusb/src/common/tusb_types.h **** 
 185:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_DIAGNOSTIC           = 0xDC ,
 186:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_WIRELESS_CONTROLLER  = 0xE0 ,
 187:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_MISC                 = 0xEF ,
 188:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_APPLICATION_SPECIFIC = 0xFE ,
 189:tinyusb/src/common/tusb_types.h ****   TUSB_CLASS_VENDOR_SPECIFIC      = 0xFF
 190:tinyusb/src/common/tusb_types.h **** }tusb_class_code_t;
 191:tinyusb/src/common/tusb_types.h **** 
 192:tinyusb/src/common/tusb_types.h **** typedef enum
 193:tinyusb/src/common/tusb_types.h **** {
 194:tinyusb/src/common/tusb_types.h ****   MISC_SUBCLASS_COMMON = 2
 195:tinyusb/src/common/tusb_types.h **** }misc_subclass_type_t;
 196:tinyusb/src/common/tusb_types.h **** 
 197:tinyusb/src/common/tusb_types.h **** typedef enum
 198:tinyusb/src/common/tusb_types.h **** {
 199:tinyusb/src/common/tusb_types.h ****   MISC_PROTOCOL_IAD = 1
 200:tinyusb/src/common/tusb_types.h **** }misc_protocol_type_t;
 201:tinyusb/src/common/tusb_types.h **** 
 202:tinyusb/src/common/tusb_types.h **** typedef enum
 203:tinyusb/src/common/tusb_types.h **** {
 204:tinyusb/src/common/tusb_types.h ****   APP_SUBCLASS_USBTMC = 0x03,
 205:tinyusb/src/common/tusb_types.h ****   APP_SUBCLASS_DFU_RUNTIME = 0x01
 206:tinyusb/src/common/tusb_types.h **** } app_subclass_type_t;
 207:tinyusb/src/common/tusb_types.h **** 
 208:tinyusb/src/common/tusb_types.h **** typedef enum
 209:tinyusb/src/common/tusb_types.h **** {
 210:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_WIRELESS_USB               = 0x01,
 211:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_USB20_EXTENSION            = 0x02,
 212:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_SUPERSPEED_USB             = 0x03,
 213:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_CONTAINER_id               = 0x04,
 214:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_PLATFORM                   = 0x05,
 215:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_POWER_DELIVERY             = 0x06,
 216:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_BATTERY_INFO               = 0x07,
 217:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_PD_CONSUMER_PORT           = 0x08,
 218:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_PD_PROVIDER_PORT           = 0x09,
 219:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_SUPERSPEED_PLUS            = 0x0A,
 220:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_PRECESION_TIME_MEASUREMENT = 0x0B,
 221:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_WIRELESS_USB_EXT           = 0x0C,
 222:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_BILLBOARD                  = 0x0D,
 223:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_AUTHENTICATION             = 0x0E,
 224:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_BILLBOARD_EX               = 0x0F,
 225:tinyusb/src/common/tusb_types.h ****   DEVICE_CAPABILITY_CONFIGURATION_SUMMARY      = 0x10
 226:tinyusb/src/common/tusb_types.h **** }device_capability_type_t;
 227:tinyusb/src/common/tusb_types.h **** 
 228:tinyusb/src/common/tusb_types.h **** enum {
 229:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_CONFIG_ATT_REMOTE_WAKEUP = TU_BIT(5),
 230:tinyusb/src/common/tusb_types.h ****   TUSB_DESC_CONFIG_ATT_SELF_POWERED  = TU_BIT(6),
 231:tinyusb/src/common/tusb_types.h **** };
 232:tinyusb/src/common/tusb_types.h **** 
 233:tinyusb/src/common/tusb_types.h **** #define TUSB_DESC_CONFIG_POWER_MA(x)  ((x)/2)
 234:tinyusb/src/common/tusb_types.h **** 
 235:tinyusb/src/common/tusb_types.h **** //--------------------------------------------------------------------+
 236:tinyusb/src/common/tusb_types.h **** //
 237:tinyusb/src/common/tusb_types.h **** //--------------------------------------------------------------------+
 238:tinyusb/src/common/tusb_types.h **** typedef enum
ARM GAS  /tmp/ccqgw09y.s 			page 16


 239:tinyusb/src/common/tusb_types.h **** {
 240:tinyusb/src/common/tusb_types.h ****   XFER_RESULT_SUCCESS = 0,
 241:tinyusb/src/common/tusb_types.h ****   XFER_RESULT_FAILED,
 242:tinyusb/src/common/tusb_types.h ****   XFER_RESULT_STALLED,
 243:tinyusb/src/common/tusb_types.h ****   XFER_RESULT_TIMEOUT,
 244:tinyusb/src/common/tusb_types.h ****   XFER_RESULT_INVALID
 245:tinyusb/src/common/tusb_types.h **** }xfer_result_t;
 246:tinyusb/src/common/tusb_types.h **** 
 247:tinyusb/src/common/tusb_types.h **** enum // TODO remove
 248:tinyusb/src/common/tusb_types.h **** {
 249:tinyusb/src/common/tusb_types.h ****   DESC_OFFSET_LEN  = 0,
 250:tinyusb/src/common/tusb_types.h ****   DESC_OFFSET_TYPE = 1
 251:tinyusb/src/common/tusb_types.h **** };
 252:tinyusb/src/common/tusb_types.h **** 
 253:tinyusb/src/common/tusb_types.h **** enum
 254:tinyusb/src/common/tusb_types.h **** {
 255:tinyusb/src/common/tusb_types.h ****   INTERFACE_INVALID_NUMBER = 0xff
 256:tinyusb/src/common/tusb_types.h **** };
 257:tinyusb/src/common/tusb_types.h **** 
 258:tinyusb/src/common/tusb_types.h **** typedef enum
 259:tinyusb/src/common/tusb_types.h **** {
 260:tinyusb/src/common/tusb_types.h ****   MS_OS_20_SET_HEADER_DESCRIPTOR       = 0x00,
 261:tinyusb/src/common/tusb_types.h ****   MS_OS_20_SUBSET_HEADER_CONFIGURATION = 0x01,
 262:tinyusb/src/common/tusb_types.h ****   MS_OS_20_SUBSET_HEADER_FUNCTION      = 0x02,
 263:tinyusb/src/common/tusb_types.h ****   MS_OS_20_FEATURE_COMPATBLE_ID        = 0x03,
 264:tinyusb/src/common/tusb_types.h ****   MS_OS_20_FEATURE_REG_PROPERTY        = 0x04,
 265:tinyusb/src/common/tusb_types.h ****   MS_OS_20_FEATURE_MIN_RESUME_TIME     = 0x05,
 266:tinyusb/src/common/tusb_types.h ****   MS_OS_20_FEATURE_MODEL_ID            = 0x06,
 267:tinyusb/src/common/tusb_types.h ****   MS_OS_20_FEATURE_CCGP_DEVICE         = 0x07,
 268:tinyusb/src/common/tusb_types.h ****   MS_OS_20_FEATURE_VENDOR_REVISION     = 0x08
 269:tinyusb/src/common/tusb_types.h **** } microsoft_os_20_type_t;
 270:tinyusb/src/common/tusb_types.h **** 
 271:tinyusb/src/common/tusb_types.h **** enum
 272:tinyusb/src/common/tusb_types.h **** {
 273:tinyusb/src/common/tusb_types.h ****   CONTROL_STAGE_IDLE,
 274:tinyusb/src/common/tusb_types.h ****   CONTROL_STAGE_SETUP,
 275:tinyusb/src/common/tusb_types.h ****   CONTROL_STAGE_DATA,
 276:tinyusb/src/common/tusb_types.h ****   CONTROL_STAGE_ACK
 277:tinyusb/src/common/tusb_types.h **** };
 278:tinyusb/src/common/tusb_types.h **** 
 279:tinyusb/src/common/tusb_types.h **** enum
 280:tinyusb/src/common/tusb_types.h **** {
 281:tinyusb/src/common/tusb_types.h ****   TUSB_INDEX_INVALID_8 = 0xFFu
 282:tinyusb/src/common/tusb_types.h **** };
 283:tinyusb/src/common/tusb_types.h **** 
 284:tinyusb/src/common/tusb_types.h **** //--------------------------------------------------------------------+
 285:tinyusb/src/common/tusb_types.h **** // USB Descriptors
 286:tinyusb/src/common/tusb_types.h **** //--------------------------------------------------------------------+
 287:tinyusb/src/common/tusb_types.h **** 
 288:tinyusb/src/common/tusb_types.h **** // Start of all packed definitions for compiler without per-type packed
 289:tinyusb/src/common/tusb_types.h **** TU_ATTR_PACKED_BEGIN
 290:tinyusb/src/common/tusb_types.h **** TU_ATTR_BIT_FIELD_ORDER_BEGIN
 291:tinyusb/src/common/tusb_types.h **** 
 292:tinyusb/src/common/tusb_types.h **** /// USB Device Descriptor
 293:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 294:tinyusb/src/common/tusb_types.h **** {
 295:tinyusb/src/common/tusb_types.h ****   uint8_t  bLength            ; ///< Size of this descriptor in bytes.
ARM GAS  /tmp/ccqgw09y.s 			page 17


 296:tinyusb/src/common/tusb_types.h ****   uint8_t  bDescriptorType    ; ///< DEVICE Descriptor Type.
 297:tinyusb/src/common/tusb_types.h ****   uint16_t bcdUSB             ; ///< BUSB Specification Release Number in Binary-Coded Decimal (i.e
 298:tinyusb/src/common/tusb_types.h **** 
 299:tinyusb/src/common/tusb_types.h ****   uint8_t  bDeviceClass       ; ///< Class code (assigned by the USB-IF). \li If this field is rese
 300:tinyusb/src/common/tusb_types.h ****   uint8_t  bDeviceSubClass    ; ///< Subclass code (assigned by the USB-IF). These codes are qualif
 301:tinyusb/src/common/tusb_types.h ****   uint8_t  bDeviceProtocol    ; ///< Protocol code (assigned by the USB-IF). These codes are qualif
 302:tinyusb/src/common/tusb_types.h ****   uint8_t  bMaxPacketSize0    ; ///< Maximum packet size for endpoint zero (only 8, 16, 32, or 64 a
 303:tinyusb/src/common/tusb_types.h **** 
 304:tinyusb/src/common/tusb_types.h ****   uint16_t idVendor           ; ///< Vendor ID (assigned by the USB-IF).
 305:tinyusb/src/common/tusb_types.h ****   uint16_t idProduct          ; ///< Product ID (assigned by the manufacturer).
 306:tinyusb/src/common/tusb_types.h ****   uint16_t bcdDevice          ; ///< Device release number in binary-coded decimal.
 307:tinyusb/src/common/tusb_types.h ****   uint8_t  iManufacturer      ; ///< Index of string descriptor describing manufacturer.
 308:tinyusb/src/common/tusb_types.h ****   uint8_t  iProduct           ; ///< Index of string descriptor describing product.
 309:tinyusb/src/common/tusb_types.h ****   uint8_t  iSerialNumber      ; ///< Index of string descriptor describing the device's serial numb
 310:tinyusb/src/common/tusb_types.h **** 
 311:tinyusb/src/common/tusb_types.h ****   uint8_t  bNumConfigurations ; ///< Number of possible configurations.
 312:tinyusb/src/common/tusb_types.h **** } tusb_desc_device_t;
 313:tinyusb/src/common/tusb_types.h **** 
 314:tinyusb/src/common/tusb_types.h **** TU_VERIFY_STATIC( sizeof(tusb_desc_device_t) == 18, "size is not correct");
 315:tinyusb/src/common/tusb_types.h **** 
 316:tinyusb/src/common/tusb_types.h **** // USB Binary Device Object Store (BOS) Descriptor
 317:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 318:tinyusb/src/common/tusb_types.h **** {
 319:tinyusb/src/common/tusb_types.h ****   uint8_t  bLength         ; ///< Size of this descriptor in bytes
 320:tinyusb/src/common/tusb_types.h ****   uint8_t  bDescriptorType ; ///< CONFIGURATION Descriptor Type
 321:tinyusb/src/common/tusb_types.h ****   uint16_t wTotalLength    ; ///< Total length of data returned for this descriptor
 322:tinyusb/src/common/tusb_types.h ****   uint8_t  bNumDeviceCaps  ; ///< Number of device capability descriptors in the BOS
 323:tinyusb/src/common/tusb_types.h **** } tusb_desc_bos_t;
 324:tinyusb/src/common/tusb_types.h **** 
 325:tinyusb/src/common/tusb_types.h **** TU_VERIFY_STATIC( sizeof(tusb_desc_bos_t) == 5, "size is not correct");
 326:tinyusb/src/common/tusb_types.h **** 
 327:tinyusb/src/common/tusb_types.h **** /// USB Configuration Descriptor
 328:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 329:tinyusb/src/common/tusb_types.h **** {
 330:tinyusb/src/common/tusb_types.h ****   uint8_t  bLength             ; ///< Size of this descriptor in bytes
 331:tinyusb/src/common/tusb_types.h ****   uint8_t  bDescriptorType     ; ///< CONFIGURATION Descriptor Type
 332:tinyusb/src/common/tusb_types.h ****   uint16_t wTotalLength        ; ///< Total length of data returned for this configuration. Include
 333:tinyusb/src/common/tusb_types.h **** 
 334:tinyusb/src/common/tusb_types.h ****   uint8_t  bNumInterfaces      ; ///< Number of interfaces supported by this configuration
 335:tinyusb/src/common/tusb_types.h ****   uint8_t  bConfigurationValue ; ///< Value to use as an argument to the SetConfiguration() request
 336:tinyusb/src/common/tusb_types.h ****   uint8_t  iConfiguration      ; ///< Index of string descriptor describing this configuration
 337:tinyusb/src/common/tusb_types.h ****   uint8_t  bmAttributes        ; ///< Configuration characteristics \n D7: Reserved (set to one)\n 
 338:tinyusb/src/common/tusb_types.h ****   uint8_t  bMaxPower           ; ///< Maximum power consumption of the USB device from the bus in t
 339:tinyusb/src/common/tusb_types.h **** } tusb_desc_configuration_t;
 340:tinyusb/src/common/tusb_types.h **** 
 341:tinyusb/src/common/tusb_types.h **** TU_VERIFY_STATIC( sizeof(tusb_desc_configuration_t) == 9, "size is not correct");
 342:tinyusb/src/common/tusb_types.h **** 
 343:tinyusb/src/common/tusb_types.h **** /// USB Interface Descriptor
 344:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 345:tinyusb/src/common/tusb_types.h **** {
 346:tinyusb/src/common/tusb_types.h ****   uint8_t  bLength            ; ///< Size of this descriptor in bytes
 347:tinyusb/src/common/tusb_types.h ****   uint8_t  bDescriptorType    ; ///< INTERFACE Descriptor Type
 348:tinyusb/src/common/tusb_types.h **** 
 349:tinyusb/src/common/tusb_types.h ****   uint8_t  bInterfaceNumber   ; ///< Number of this interface. Zero-based value identifying the ind
 350:tinyusb/src/common/tusb_types.h ****   uint8_t  bAlternateSetting  ; ///< Value used to select this alternate setting for the interface 
 351:tinyusb/src/common/tusb_types.h ****   uint8_t  bNumEndpoints      ; ///< Number of endpoints used by this interface (excluding endpoint
 352:tinyusb/src/common/tusb_types.h ****   uint8_t  bInterfaceClass    ; ///< Class code (assigned by the USB-IF). \li A value of zero is re
ARM GAS  /tmp/ccqgw09y.s 			page 18


 353:tinyusb/src/common/tusb_types.h ****   uint8_t  bInterfaceSubClass ; ///< Subclass code (assigned by the USB-IF). \n These codes are qua
 354:tinyusb/src/common/tusb_types.h ****   uint8_t  bInterfaceProtocol ; ///< Protocol code (assigned by the USB). \n These codes are qualif
 355:tinyusb/src/common/tusb_types.h ****   uint8_t  iInterface         ; ///< Index of string descriptor describing this interface
 356:tinyusb/src/common/tusb_types.h **** } tusb_desc_interface_t;
 357:tinyusb/src/common/tusb_types.h **** 
 358:tinyusb/src/common/tusb_types.h **** TU_VERIFY_STATIC( sizeof(tusb_desc_interface_t) == 9, "size is not correct");
 359:tinyusb/src/common/tusb_types.h **** 
 360:tinyusb/src/common/tusb_types.h **** /// USB Endpoint Descriptor
 361:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 362:tinyusb/src/common/tusb_types.h **** {
 363:tinyusb/src/common/tusb_types.h ****   uint8_t  bLength          ; // Size of this descriptor in bytes
 364:tinyusb/src/common/tusb_types.h ****   uint8_t  bDescriptorType  ; // ENDPOINT Descriptor Type
 365:tinyusb/src/common/tusb_types.h **** 
 366:tinyusb/src/common/tusb_types.h ****   uint8_t  bEndpointAddress ; // The address of the endpoint
 367:tinyusb/src/common/tusb_types.h **** 
 368:tinyusb/src/common/tusb_types.h ****   struct TU_ATTR_PACKED {
 369:tinyusb/src/common/tusb_types.h ****     uint8_t xfer  : 2;        // Control, ISO, Bulk, Interrupt
 370:tinyusb/src/common/tusb_types.h ****     uint8_t sync  : 2;        // None, Asynchronous, Adaptive, Synchronous
 371:tinyusb/src/common/tusb_types.h ****     uint8_t usage : 2;        // Data, Feedback, Implicit feedback
 372:tinyusb/src/common/tusb_types.h ****     uint8_t       : 2;
 373:tinyusb/src/common/tusb_types.h ****   } bmAttributes;
 374:tinyusb/src/common/tusb_types.h **** 
 375:tinyusb/src/common/tusb_types.h ****   uint16_t wMaxPacketSize   ; // Bit 10..0 : max packet size, bit 12..11 additional transaction per
 376:tinyusb/src/common/tusb_types.h ****   uint8_t  bInterval        ; // Polling interval, in frames or microframes depending on the operat
 377:tinyusb/src/common/tusb_types.h **** } tusb_desc_endpoint_t;
 378:tinyusb/src/common/tusb_types.h **** 
 379:tinyusb/src/common/tusb_types.h **** TU_VERIFY_STATIC( sizeof(tusb_desc_endpoint_t) == 7, "size is not correct");
 380:tinyusb/src/common/tusb_types.h **** 
 381:tinyusb/src/common/tusb_types.h **** /// USB Other Speed Configuration Descriptor
 382:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 383:tinyusb/src/common/tusb_types.h **** {
 384:tinyusb/src/common/tusb_types.h ****   uint8_t  bLength             ; ///< Size of descriptor
 385:tinyusb/src/common/tusb_types.h ****   uint8_t  bDescriptorType     ; ///< Other_speed_Configuration Type
 386:tinyusb/src/common/tusb_types.h ****   uint16_t wTotalLength        ; ///< Total length of data returned
 387:tinyusb/src/common/tusb_types.h **** 
 388:tinyusb/src/common/tusb_types.h ****   uint8_t  bNumInterfaces      ; ///< Number of interfaces supported by this speed configuration
 389:tinyusb/src/common/tusb_types.h ****   uint8_t  bConfigurationValue ; ///< Value to use to select configuration
 390:tinyusb/src/common/tusb_types.h ****   uint8_t  iConfiguration      ; ///< Index of string descriptor
 391:tinyusb/src/common/tusb_types.h ****   uint8_t  bmAttributes        ; ///< Same as Configuration descriptor
 392:tinyusb/src/common/tusb_types.h ****   uint8_t  bMaxPower           ; ///< Same as Configuration descriptor
 393:tinyusb/src/common/tusb_types.h **** } tusb_desc_other_speed_t;
 394:tinyusb/src/common/tusb_types.h **** 
 395:tinyusb/src/common/tusb_types.h **** /// USB Device Qualifier Descriptor
 396:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 397:tinyusb/src/common/tusb_types.h **** {
 398:tinyusb/src/common/tusb_types.h ****   uint8_t  bLength            ; ///< Size of descriptor
 399:tinyusb/src/common/tusb_types.h ****   uint8_t  bDescriptorType    ; ///< Device Qualifier Type
 400:tinyusb/src/common/tusb_types.h ****   uint16_t bcdUSB             ; ///< USB specification version number (e.g., 0200H for V2.00)
 401:tinyusb/src/common/tusb_types.h **** 
 402:tinyusb/src/common/tusb_types.h ****   uint8_t  bDeviceClass       ; ///< Class Code
 403:tinyusb/src/common/tusb_types.h ****   uint8_t  bDeviceSubClass    ; ///< SubClass Code
 404:tinyusb/src/common/tusb_types.h ****   uint8_t  bDeviceProtocol    ; ///< Protocol Code
 405:tinyusb/src/common/tusb_types.h **** 
 406:tinyusb/src/common/tusb_types.h ****   uint8_t  bMaxPacketSize0    ; ///< Maximum packet size for other speed
 407:tinyusb/src/common/tusb_types.h ****   uint8_t  bNumConfigurations ; ///< Number of Other-speed Configurations
 408:tinyusb/src/common/tusb_types.h ****   uint8_t  bReserved          ; ///< Reserved for future use, must be zero
 409:tinyusb/src/common/tusb_types.h **** } tusb_desc_device_qualifier_t;
ARM GAS  /tmp/ccqgw09y.s 			page 19


 410:tinyusb/src/common/tusb_types.h **** 
 411:tinyusb/src/common/tusb_types.h **** TU_VERIFY_STATIC( sizeof(tusb_desc_device_qualifier_t) == 10, "size is not correct");
 412:tinyusb/src/common/tusb_types.h **** 
 413:tinyusb/src/common/tusb_types.h **** /// USB Interface Association Descriptor (IAD ECN)
 414:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 415:tinyusb/src/common/tusb_types.h **** {
 416:tinyusb/src/common/tusb_types.h ****   uint8_t bLength           ; ///< Size of descriptor
 417:tinyusb/src/common/tusb_types.h ****   uint8_t bDescriptorType   ; ///< Other_speed_Configuration Type
 418:tinyusb/src/common/tusb_types.h **** 
 419:tinyusb/src/common/tusb_types.h ****   uint8_t bFirstInterface   ; ///< Index of the first associated interface.
 420:tinyusb/src/common/tusb_types.h ****   uint8_t bInterfaceCount   ; ///< Total number of associated interfaces.
 421:tinyusb/src/common/tusb_types.h **** 
 422:tinyusb/src/common/tusb_types.h ****   uint8_t bFunctionClass    ; ///< Interface class ID.
 423:tinyusb/src/common/tusb_types.h ****   uint8_t bFunctionSubClass ; ///< Interface subclass ID.
 424:tinyusb/src/common/tusb_types.h ****   uint8_t bFunctionProtocol ; ///< Interface protocol ID.
 425:tinyusb/src/common/tusb_types.h **** 
 426:tinyusb/src/common/tusb_types.h ****   uint8_t iFunction         ; ///< Index of the string descriptor describing the interface associat
 427:tinyusb/src/common/tusb_types.h **** } tusb_desc_interface_assoc_t;
 428:tinyusb/src/common/tusb_types.h **** 
 429:tinyusb/src/common/tusb_types.h **** // USB String Descriptor
 430:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 431:tinyusb/src/common/tusb_types.h **** {
 432:tinyusb/src/common/tusb_types.h ****   uint8_t  bLength         ; ///< Size of this descriptor in bytes
 433:tinyusb/src/common/tusb_types.h ****   uint8_t  bDescriptorType ; ///< Descriptor Type
 434:tinyusb/src/common/tusb_types.h ****   uint16_t unicode_string[];
 435:tinyusb/src/common/tusb_types.h **** } tusb_desc_string_t;
 436:tinyusb/src/common/tusb_types.h **** 
 437:tinyusb/src/common/tusb_types.h **** // USB Binary Device Object Store (BOS)
 438:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 439:tinyusb/src/common/tusb_types.h **** {
 440:tinyusb/src/common/tusb_types.h ****   uint8_t bLength;
 441:tinyusb/src/common/tusb_types.h ****   uint8_t bDescriptorType ;
 442:tinyusb/src/common/tusb_types.h ****   uint8_t bDevCapabilityType;
 443:tinyusb/src/common/tusb_types.h ****   uint8_t bReserved;
 444:tinyusb/src/common/tusb_types.h ****   uint8_t PlatformCapabilityUUID[16];
 445:tinyusb/src/common/tusb_types.h ****   uint8_t CapabilityData[];
 446:tinyusb/src/common/tusb_types.h **** } tusb_desc_bos_platform_t;
 447:tinyusb/src/common/tusb_types.h **** 
 448:tinyusb/src/common/tusb_types.h **** // USB WebuSB URL Descriptor
 449:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 450:tinyusb/src/common/tusb_types.h **** {
 451:tinyusb/src/common/tusb_types.h ****   uint8_t bLength;
 452:tinyusb/src/common/tusb_types.h ****   uint8_t bDescriptorType;
 453:tinyusb/src/common/tusb_types.h ****   uint8_t bScheme;
 454:tinyusb/src/common/tusb_types.h ****   char    url[];
 455:tinyusb/src/common/tusb_types.h **** } tusb_desc_webusb_url_t;
 456:tinyusb/src/common/tusb_types.h **** 
 457:tinyusb/src/common/tusb_types.h **** // DFU Functional Descriptor
 458:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED
 459:tinyusb/src/common/tusb_types.h **** {
 460:tinyusb/src/common/tusb_types.h ****   uint8_t  bLength;
 461:tinyusb/src/common/tusb_types.h ****   uint8_t  bDescriptorType;
 462:tinyusb/src/common/tusb_types.h **** 
 463:tinyusb/src/common/tusb_types.h ****   union {
 464:tinyusb/src/common/tusb_types.h ****     struct TU_ATTR_PACKED {
 465:tinyusb/src/common/tusb_types.h ****       uint8_t bitCanDnload             : 1;
 466:tinyusb/src/common/tusb_types.h ****       uint8_t bitCanUpload             : 1;
ARM GAS  /tmp/ccqgw09y.s 			page 20


 467:tinyusb/src/common/tusb_types.h ****       uint8_t bitManifestationTolerant : 1;
 468:tinyusb/src/common/tusb_types.h ****       uint8_t bitWillDetach            : 1;
 469:tinyusb/src/common/tusb_types.h ****       uint8_t reserved                 : 4;
 470:tinyusb/src/common/tusb_types.h ****     } bmAttributes;
 471:tinyusb/src/common/tusb_types.h **** 
 472:tinyusb/src/common/tusb_types.h ****     uint8_t bAttributes;
 473:tinyusb/src/common/tusb_types.h ****   };
 474:tinyusb/src/common/tusb_types.h **** 
 475:tinyusb/src/common/tusb_types.h ****   uint16_t wDetachTimeOut;
 476:tinyusb/src/common/tusb_types.h ****   uint16_t wTransferSize;
 477:tinyusb/src/common/tusb_types.h ****   uint16_t bcdDFUVersion;
 478:tinyusb/src/common/tusb_types.h **** } tusb_desc_dfu_functional_t;
 479:tinyusb/src/common/tusb_types.h **** 
 480:tinyusb/src/common/tusb_types.h **** //--------------------------------------------------------------------+
 481:tinyusb/src/common/tusb_types.h **** //
 482:tinyusb/src/common/tusb_types.h **** //--------------------------------------------------------------------+
 483:tinyusb/src/common/tusb_types.h **** 
 484:tinyusb/src/common/tusb_types.h **** typedef struct TU_ATTR_PACKED{
 485:tinyusb/src/common/tusb_types.h ****   union {
 486:tinyusb/src/common/tusb_types.h ****     struct TU_ATTR_PACKED {
 487:tinyusb/src/common/tusb_types.h ****       uint8_t recipient :  5; ///< Recipient type tusb_request_recipient_t.
 488:tinyusb/src/common/tusb_types.h ****       uint8_t type      :  2; ///< Request type tusb_request_type_t.
 489:tinyusb/src/common/tusb_types.h ****       uint8_t direction :  1; ///< Direction type. tusb_dir_t
 490:tinyusb/src/common/tusb_types.h ****     } bmRequestType_bit;
 491:tinyusb/src/common/tusb_types.h **** 
 492:tinyusb/src/common/tusb_types.h ****     uint8_t bmRequestType;
 493:tinyusb/src/common/tusb_types.h ****   };
 494:tinyusb/src/common/tusb_types.h **** 
 495:tinyusb/src/common/tusb_types.h ****   uint8_t  bRequest;
 496:tinyusb/src/common/tusb_types.h ****   uint16_t wValue;
 497:tinyusb/src/common/tusb_types.h ****   uint16_t wIndex;
 498:tinyusb/src/common/tusb_types.h ****   uint16_t wLength;
 499:tinyusb/src/common/tusb_types.h **** } tusb_control_request_t;
 500:tinyusb/src/common/tusb_types.h **** 
 501:tinyusb/src/common/tusb_types.h **** TU_VERIFY_STATIC( sizeof(tusb_control_request_t) == 8, "size is not correct");
 502:tinyusb/src/common/tusb_types.h **** 
 503:tinyusb/src/common/tusb_types.h **** 
 504:tinyusb/src/common/tusb_types.h **** TU_ATTR_PACKED_END  // End of all packed definitions
 505:tinyusb/src/common/tusb_types.h **** TU_ATTR_BIT_FIELD_ORDER_END
 506:tinyusb/src/common/tusb_types.h **** 
 507:tinyusb/src/common/tusb_types.h **** //--------------------------------------------------------------------+
 508:tinyusb/src/common/tusb_types.h **** // Endpoint helper
 509:tinyusb/src/common/tusb_types.h **** //--------------------------------------------------------------------+
 510:tinyusb/src/common/tusb_types.h **** 
 511:tinyusb/src/common/tusb_types.h **** // Get direction from Endpoint address
 512:tinyusb/src/common/tusb_types.h **** TU_ATTR_ALWAYS_INLINE static inline tusb_dir_t tu_edpt_dir(uint8_t addr)
 513:tinyusb/src/common/tusb_types.h **** {
 514:tinyusb/src/common/tusb_types.h ****   return (addr & TUSB_DIR_IN_MASK) ? TUSB_DIR_IN : TUSB_DIR_OUT;
 515:tinyusb/src/common/tusb_types.h **** }
 516:tinyusb/src/common/tusb_types.h **** 
 517:tinyusb/src/common/tusb_types.h **** // Get Endpoint number from address
 518:tinyusb/src/common/tusb_types.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_edpt_number(uint8_t addr)
 519:tinyusb/src/common/tusb_types.h **** {
 520:tinyusb/src/common/tusb_types.h ****   return (uint8_t)(addr & (~TUSB_DIR_IN_MASK));
 521:tinyusb/src/common/tusb_types.h **** }
 522:tinyusb/src/common/tusb_types.h **** 
 523:tinyusb/src/common/tusb_types.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_edpt_addr(uint8_t num, uint8_t dir)
ARM GAS  /tmp/ccqgw09y.s 			page 21


 524:tinyusb/src/common/tusb_types.h **** {
 525:tinyusb/src/common/tusb_types.h ****   return (uint8_t)(num | (dir ? TUSB_DIR_IN_MASK : 0));
 526:tinyusb/src/common/tusb_types.h **** }
 527:tinyusb/src/common/tusb_types.h **** 
 528:tinyusb/src/common/tusb_types.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_edpt_packet_size(tusb_desc_endpoint_t const* desc_e
 440              		.loc 2 528 46 view .LVU114
 441              	.LBB57:
 529:tinyusb/src/common/tusb_types.h **** {
 530:tinyusb/src/common/tusb_types.h ****   return tu_le16toh(desc_ep->wMaxPacketSize) & TU_GENMASK(10, 0);
 442              		.loc 2 530 3 view .LVU115
 443              		.loc 2 530 10 is_stmt 0 view .LVU116
 444 0000 8388     		ldrh	r3, [r0, #4]	@ unaligned
 445              		.loc 2 530 46 view .LVU117
 446 0002 C3F30A02 		ubfx	r2, r3, #0, #11
 447              	.LVL24:
 448              		.loc 2 530 46 view .LVU118
 449              	.LBE57:
 450              	.LBE56:
 156:tinyusb/src/tusb.c ****   TU_LOG2("  Open EP %02X with Size = %u\r\n", desc_ep->bEndpointAddress, max_packet_size);
 451              		.loc 1 156 91 is_stmt 1 view .LVU119
 157:tinyusb/src/tusb.c **** 
 158:tinyusb/src/tusb.c ****   switch (desc_ep->bmAttributes.xfer)
 452              		.loc 1 158 3 view .LVU120
 453              		.loc 1 158 32 is_stmt 0 view .LVU121
 454 0006 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 455 0008 03F00303 		and	r3, r3, #3
 456              		.loc 1 158 3 view .LVU122
 457 000c 022B     		cmp	r3, #2
 458 000e 1AD0     		beq	.L45
 459 0010 032B     		cmp	r3, #3
 460 0012 35D0     		beq	.L46
 461 0014 012B     		cmp	r3, #1
 462 0016 01D0     		beq	.L62
 463 0018 0020     		movs	r0, #0
 464              	.LVL25:
 465              		.loc 1 158 3 view .LVU123
 466 001a 7047     		bx	lr
 467              	.LVL26:
 468              	.L62:
 469              	.LBB58:
 159:tinyusb/src/tusb.c ****   {
 160:tinyusb/src/tusb.c ****     case TUSB_XFER_ISOCHRONOUS:
 161:tinyusb/src/tusb.c ****     {
 162:tinyusb/src/tusb.c ****       uint16_t const spec_size = (speed == TUSB_SPEED_HIGH ? 1024 : 1023);
 470              		.loc 1 162 7 is_stmt 1 view .LVU124
 471              		.loc 1 162 22 is_stmt 0 view .LVU125
 472 001c 0229     		cmp	r1, #2
 473 001e 05D0     		beq	.L63
 474 0020 40F2FF33 		movw	r3, #1023
 475              	.L48:
 476              	.LVL27:
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 477              		.loc 1 163 7 is_stmt 1 discriminator 4 view .LVU126
 478              		.loc 1 163 7 discriminator 4 view .LVU127
 479 0024 9342     		cmp	r3, r2
 480 0026 04D3     		bcc	.L64
 481              	.LBE58:
ARM GAS  /tmp/ccqgw09y.s 			page 22


 164:tinyusb/src/tusb.c ****     }
 165:tinyusb/src/tusb.c ****     break;
 166:tinyusb/src/tusb.c **** 
 167:tinyusb/src/tusb.c ****     case TUSB_XFER_BULK:
 168:tinyusb/src/tusb.c ****       if (speed == TUSB_SPEED_HIGH)
 169:tinyusb/src/tusb.c ****       {
 170:tinyusb/src/tusb.c ****         // Bulk highspeed must be EXACTLY 512
 171:tinyusb/src/tusb.c ****         TU_ASSERT(max_packet_size == 512);
 172:tinyusb/src/tusb.c ****       }else
 173:tinyusb/src/tusb.c ****       {
 174:tinyusb/src/tusb.c ****         // TODO Bulk fullspeed can only be 8, 16, 32, 64
 175:tinyusb/src/tusb.c ****         TU_ASSERT(max_packet_size <= 64);
 176:tinyusb/src/tusb.c ****       }
 177:tinyusb/src/tusb.c ****     break;
 178:tinyusb/src/tusb.c **** 
 179:tinyusb/src/tusb.c ****     case TUSB_XFER_INTERRUPT:
 180:tinyusb/src/tusb.c ****     {
 181:tinyusb/src/tusb.c ****       uint16_t const spec_size = (speed == TUSB_SPEED_HIGH ? 1024 : 64);
 182:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 183:tinyusb/src/tusb.c ****     }
 184:tinyusb/src/tusb.c ****     break;
 185:tinyusb/src/tusb.c **** 
 186:tinyusb/src/tusb.c ****     default: return false;
 187:tinyusb/src/tusb.c ****   }
 188:tinyusb/src/tusb.c **** 
 189:tinyusb/src/tusb.c ****   return true;
 482              		.loc 1 189 10 is_stmt 0 view .LVU128
 483 0028 0120     		movs	r0, #1
 484              	.LVL28:
 485              		.loc 1 189 10 view .LVU129
 486 002a 7047     		bx	lr
 487              	.LVL29:
 488              	.L63:
 489              	.LBB60:
 162:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 490              		.loc 1 162 22 view .LVU130
 491 002c 4FF48063 		mov	r3, #1024
 492 0030 F8E7     		b	.L48
 493              	.LVL30:
 494              	.L64:
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 495              		.loc 1 163 7 is_stmt 1 discriminator 1 view .LVU131
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 496              		.loc 1 163 7 discriminator 1 view .LVU132
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 497              		.loc 1 163 7 discriminator 1 view .LVU133
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 498              		.loc 1 163 7 discriminator 1 view .LVU134
 499              	.LBB59:
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 500              		.loc 1 163 7 discriminator 1 view .LVU135
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 501              		.loc 1 163 7 discriminator 1 view .LVU136
 502 0032 4FF0E023 		mov	r3, #-536813568
 503              	.LVL31:
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 504              		.loc 1 163 7 is_stmt 0 discriminator 1 view .LVU137
ARM GAS  /tmp/ccqgw09y.s 			page 23


 505 0036 D3F8F03D 		ldr	r3, [r3, #3568]
 506 003a 13F0010F 		tst	r3, #1
 507 003e 00D0     		beq	.L49
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 508              		.loc 1 163 7 is_stmt 1 discriminator 3 view .LVU138
 509              		.syntax unified
 510              	@ 163 "tinyusb/src/tusb.c" 1
 511 0040 00BE     		BKPT #0
 512              	
 513              	@ 0 "" 2
 514              		.thumb
 515              		.syntax unified
 516              	.L49:
 517              	.LBE59:
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 518              		.loc 1 163 7 discriminator 5 view .LVU139
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 519              		.loc 1 163 7 discriminator 5 view .LVU140
 520 0042 0020     		movs	r0, #0
 521              	.LVL32:
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 522              		.loc 1 163 7 is_stmt 0 discriminator 5 view .LVU141
 523 0044 7047     		bx	lr
 524              	.LVL33:
 525              	.L45:
 163:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 526              		.loc 1 163 7 discriminator 5 view .LVU142
 527              	.LBE60:
 168:tinyusb/src/tusb.c ****       {
 528              		.loc 1 168 7 is_stmt 1 view .LVU143
 168:tinyusb/src/tusb.c ****       {
 529              		.loc 1 168 10 is_stmt 0 view .LVU144
 530 0046 0229     		cmp	r1, #2
 531 0048 03D0     		beq	.L65
 175:tinyusb/src/tusb.c ****       }
 532              		.loc 1 175 9 is_stmt 1 discriminator 2 view .LVU145
 175:tinyusb/src/tusb.c ****       }
 533              		.loc 1 175 9 discriminator 2 view .LVU146
 534 004a 402A     		cmp	r2, #64
 535 004c 0ED8     		bhi	.L66
 536              		.loc 1 189 10 is_stmt 0 view .LVU147
 537 004e 0120     		movs	r0, #1
 538              	.LVL34:
 539              		.loc 1 189 10 view .LVU148
 540 0050 7047     		bx	lr
 541              	.LVL35:
 542              	.L65:
 171:tinyusb/src/tusb.c ****       }else
 543              		.loc 1 171 9 is_stmt 1 view .LVU149
 171:tinyusb/src/tusb.c ****       }else
 544              		.loc 1 171 9 view .LVU150
 545 0052 B2F5007F 		cmp	r2, #512
 546 0056 27D0     		beq	.L58
 171:tinyusb/src/tusb.c ****       }else
 547              		.loc 1 171 9 discriminator 1 view .LVU151
 171:tinyusb/src/tusb.c ****       }else
 548              		.loc 1 171 9 discriminator 1 view .LVU152
ARM GAS  /tmp/ccqgw09y.s 			page 24


 171:tinyusb/src/tusb.c ****       }else
 549              		.loc 1 171 9 discriminator 1 view .LVU153
 171:tinyusb/src/tusb.c ****       }else
 550              		.loc 1 171 9 discriminator 1 view .LVU154
 551              	.LBB61:
 171:tinyusb/src/tusb.c ****       }else
 552              		.loc 1 171 9 discriminator 1 view .LVU155
 553              	.LVL36:
 171:tinyusb/src/tusb.c ****       }else
 554              		.loc 1 171 9 discriminator 1 view .LVU156
 555 0058 4FF0E023 		mov	r3, #-536813568
 556 005c D3F8F03D 		ldr	r3, [r3, #3568]
 557 0060 13F0010F 		tst	r3, #1
 558 0064 00D0     		beq	.L51
 171:tinyusb/src/tusb.c ****       }else
 559              		.loc 1 171 9 discriminator 3 view .LVU157
 560              		.syntax unified
 561              	@ 171 "tinyusb/src/tusb.c" 1
 562 0066 00BE     		BKPT #0
 563              	
 564              	@ 0 "" 2
 565              		.thumb
 566              		.syntax unified
 567              	.L51:
 568              	.LBE61:
 171:tinyusb/src/tusb.c ****       }else
 569              		.loc 1 171 9 discriminator 5 view .LVU158
 171:tinyusb/src/tusb.c ****       }else
 570              		.loc 1 171 9 discriminator 5 view .LVU159
 571 0068 0020     		movs	r0, #0
 572              	.LVL37:
 171:tinyusb/src/tusb.c ****       }else
 573              		.loc 1 171 9 is_stmt 0 discriminator 5 view .LVU160
 574 006a 7047     		bx	lr
 575              	.LVL38:
 576              	.L66:
 175:tinyusb/src/tusb.c ****       }
 577              		.loc 1 175 9 is_stmt 1 discriminator 1 view .LVU161
 175:tinyusb/src/tusb.c ****       }
 578              		.loc 1 175 9 discriminator 1 view .LVU162
 175:tinyusb/src/tusb.c ****       }
 579              		.loc 1 175 9 discriminator 1 view .LVU163
 175:tinyusb/src/tusb.c ****       }
 580              		.loc 1 175 9 discriminator 1 view .LVU164
 581              	.LBB62:
 175:tinyusb/src/tusb.c ****       }
 582              		.loc 1 175 9 discriminator 1 view .LVU165
 175:tinyusb/src/tusb.c ****       }
 583              		.loc 1 175 9 discriminator 1 view .LVU166
 584 006c 4FF0E023 		mov	r3, #-536813568
 585 0070 D3F8F03D 		ldr	r3, [r3, #3568]
 586 0074 13F0010F 		tst	r3, #1
 587 0078 00D0     		beq	.L52
 175:tinyusb/src/tusb.c ****       }
 588              		.loc 1 175 9 discriminator 3 view .LVU167
 589              		.syntax unified
 590              	@ 175 "tinyusb/src/tusb.c" 1
ARM GAS  /tmp/ccqgw09y.s 			page 25


 591 007a 00BE     		BKPT #0
 592              	
 593              	@ 0 "" 2
 594              		.thumb
 595              		.syntax unified
 596              	.L52:
 597              	.LBE62:
 175:tinyusb/src/tusb.c ****       }
 598              		.loc 1 175 9 discriminator 5 view .LVU168
 175:tinyusb/src/tusb.c ****       }
 599              		.loc 1 175 9 discriminator 5 view .LVU169
 600 007c 0020     		movs	r0, #0
 601              	.LVL39:
 175:tinyusb/src/tusb.c ****       }
 602              		.loc 1 175 9 is_stmt 0 discriminator 5 view .LVU170
 603 007e 7047     		bx	lr
 604              	.LVL40:
 605              	.L46:
 606              	.LBB63:
 181:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 607              		.loc 1 181 7 is_stmt 1 view .LVU171
 181:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 608              		.loc 1 181 22 is_stmt 0 view .LVU172
 609 0080 0229     		cmp	r1, #2
 610 0082 04D0     		beq	.L67
 611 0084 4023     		movs	r3, #64
 612              	.L53:
 613              	.LVL41:
 182:tinyusb/src/tusb.c ****     }
 614              		.loc 1 182 7 is_stmt 1 discriminator 4 view .LVU173
 182:tinyusb/src/tusb.c ****     }
 615              		.loc 1 182 7 discriminator 4 view .LVU174
 616 0086 9342     		cmp	r3, r2
 617 0088 04D3     		bcc	.L68
 618              	.LBE63:
 619              		.loc 1 189 10 is_stmt 0 view .LVU175
 620 008a 0120     		movs	r0, #1
 621              	.LVL42:
 190:tinyusb/src/tusb.c **** }
 622              		.loc 1 190 1 view .LVU176
 623 008c 7047     		bx	lr
 624              	.LVL43:
 625              	.L67:
 626              	.LBB65:
 181:tinyusb/src/tusb.c ****       TU_ASSERT(max_packet_size <= spec_size);
 627              		.loc 1 181 22 view .LVU177
 628 008e 4FF48063 		mov	r3, #1024
 629 0092 F8E7     		b	.L53
 630              	.LVL44:
 631              	.L68:
 182:tinyusb/src/tusb.c ****     }
 632              		.loc 1 182 7 is_stmt 1 discriminator 1 view .LVU178
 182:tinyusb/src/tusb.c ****     }
 633              		.loc 1 182 7 discriminator 1 view .LVU179
 182:tinyusb/src/tusb.c ****     }
 634              		.loc 1 182 7 discriminator 1 view .LVU180
 182:tinyusb/src/tusb.c ****     }
ARM GAS  /tmp/ccqgw09y.s 			page 26


 635              		.loc 1 182 7 discriminator 1 view .LVU181
 636              	.LBB64:
 182:tinyusb/src/tusb.c ****     }
 637              		.loc 1 182 7 discriminator 1 view .LVU182
 182:tinyusb/src/tusb.c ****     }
 638              		.loc 1 182 7 discriminator 1 view .LVU183
 639 0094 4FF0E023 		mov	r3, #-536813568
 640              	.LVL45:
 182:tinyusb/src/tusb.c ****     }
 641              		.loc 1 182 7 is_stmt 0 discriminator 1 view .LVU184
 642 0098 D3F8F03D 		ldr	r3, [r3, #3568]
 643 009c 13F0010F 		tst	r3, #1
 644 00a0 00D0     		beq	.L54
 182:tinyusb/src/tusb.c ****     }
 645              		.loc 1 182 7 is_stmt 1 discriminator 3 view .LVU185
 646              		.syntax unified
 647              	@ 182 "tinyusb/src/tusb.c" 1
 648 00a2 00BE     		BKPT #0
 649              	
 650              	@ 0 "" 2
 651              		.thumb
 652              		.syntax unified
 653              	.L54:
 654              	.LBE64:
 182:tinyusb/src/tusb.c ****     }
 655              		.loc 1 182 7 discriminator 5 view .LVU186
 182:tinyusb/src/tusb.c ****     }
 656              		.loc 1 182 7 discriminator 5 view .LVU187
 657 00a4 0020     		movs	r0, #0
 658              	.LVL46:
 182:tinyusb/src/tusb.c ****     }
 659              		.loc 1 182 7 is_stmt 0 discriminator 5 view .LVU188
 660 00a6 7047     		bx	lr
 661              	.LVL47:
 662              	.L58:
 182:tinyusb/src/tusb.c ****     }
 663              		.loc 1 182 7 discriminator 5 view .LVU189
 664              	.LBE65:
 189:tinyusb/src/tusb.c **** }
 665              		.loc 1 189 10 view .LVU190
 666 00a8 0120     		movs	r0, #1
 667              	.LVL48:
 189:tinyusb/src/tusb.c **** }
 668              		.loc 1 189 10 view .LVU191
 669 00aa 7047     		bx	lr
 670              		.cfi_endproc
 671              	.LFE86:
 673              		.section	.text.tu_edpt_bind_driver,"ax",%progbits
 674              		.align	1
 675              		.global	tu_edpt_bind_driver
 676              		.syntax unified
 677              		.thumb
 678              		.thumb_func
 679              		.fpu fpv4-sp-d16
 681              	tu_edpt_bind_driver:
 682              	.LVL49:
 683              	.LFB87:
ARM GAS  /tmp/ccqgw09y.s 			page 27


 191:tinyusb/src/tusb.c **** 
 192:tinyusb/src/tusb.c **** void tu_edpt_bind_driver(uint8_t ep2drv[][2], tusb_desc_interface_t const* desc_itf, uint16_t desc_
 193:tinyusb/src/tusb.c **** {
 684              		.loc 1 193 1 is_stmt 1 view -0
 685              		.cfi_startproc
 686              		@ args = 0, pretend = 0, frame = 0
 687              		@ frame_needed = 0, uses_anonymous_args = 0
 194:tinyusb/src/tusb.c ****   uint8_t const* p_desc = (uint8_t const*) desc_itf;
 688              		.loc 1 194 3 view .LVU193
 195:tinyusb/src/tusb.c ****   uint8_t const* desc_end = p_desc + desc_len;
 689              		.loc 1 195 3 view .LVU194
 690              		.loc 1 195 18 is_stmt 0 view .LVU195
 691 0000 0A44     		add	r2, r2, r1
 692              	.LVL50:
 196:tinyusb/src/tusb.c **** 
 197:tinyusb/src/tusb.c ****   while( p_desc < desc_end )
 693              		.loc 1 197 3 is_stmt 1 view .LVU196
 694              		.loc 1 197 8 is_stmt 0 view .LVU197
 695 0002 04E0     		b	.L74
 696              	.LVL51:
 697              	.L81:
 698              	.LCFI3:
 699              		.cfi_def_cfa_offset 4
 700              		.cfi_offset 14, -4
 198:tinyusb/src/tusb.c ****   {
 199:tinyusb/src/tusb.c ****     if ( TUSB_DESC_ENDPOINT == tu_desc_type(p_desc) )
 200:tinyusb/src/tusb.c ****     {
 201:tinyusb/src/tusb.c ****       uint8_t const ep_addr = ((tusb_desc_endpoint_t const*) p_desc)->bEndpointAddress;
 202:tinyusb/src/tusb.c **** 
 203:tinyusb/src/tusb.c ****       TU_LOG(2, "  Bind EP %02x to driver id %u\r\n", ep_addr, driver_id);
 204:tinyusb/src/tusb.c ****       ep2drv[tu_edpt_number(ep_addr)][tu_edpt_dir(ep_addr)] = driver_id;
 205:tinyusb/src/tusb.c ****     }
 206:tinyusb/src/tusb.c **** 
 207:tinyusb/src/tusb.c ****     p_desc = tu_desc_next(p_desc);
 208:tinyusb/src/tusb.c ****   }
 209:tinyusb/src/tusb.c **** }
 701              		.loc 1 209 1 view .LVU198
 702 0004 5DF804FB 		ldr	pc, [sp], #4
 703              	.L80:
 704              	.LCFI4:
 705              		.cfi_def_cfa_offset 0
 706              		.cfi_restore 14
 207:tinyusb/src/tusb.c ****   }
 707              		.loc 1 207 5 is_stmt 1 view .LVU199
 708              	.LVL52:
 709              	.LBB66:
 710              	.LBI66:
 531:tinyusb/src/common/tusb_types.h **** }
 532:tinyusb/src/common/tusb_types.h **** 
 533:tinyusb/src/common/tusb_types.h **** #if CFG_TUSB_DEBUG
 534:tinyusb/src/common/tusb_types.h **** TU_ATTR_ALWAYS_INLINE static inline const char *tu_edpt_dir_str(tusb_dir_t dir)
 535:tinyusb/src/common/tusb_types.h **** {
 536:tinyusb/src/common/tusb_types.h ****   tu_static const char *str[] = {"out", "in"};
 537:tinyusb/src/common/tusb_types.h ****   return str[dir];
 538:tinyusb/src/common/tusb_types.h **** }
 539:tinyusb/src/common/tusb_types.h **** 
 540:tinyusb/src/common/tusb_types.h **** TU_ATTR_ALWAYS_INLINE static inline const char *tu_edpt_type_str(tusb_xfer_type_t t)
ARM GAS  /tmp/ccqgw09y.s 			page 28


 541:tinyusb/src/common/tusb_types.h **** {
 542:tinyusb/src/common/tusb_types.h ****   tu_static const char *str[] = {"control", "isochronous", "bulk", "interrupt"};
 543:tinyusb/src/common/tusb_types.h ****   return str[t];
 544:tinyusb/src/common/tusb_types.h **** }
 545:tinyusb/src/common/tusb_types.h **** #endif
 546:tinyusb/src/common/tusb_types.h **** 
 547:tinyusb/src/common/tusb_types.h **** //--------------------------------------------------------------------+
 548:tinyusb/src/common/tusb_types.h **** // Descriptor helper
 549:tinyusb/src/common/tusb_types.h **** //--------------------------------------------------------------------+
 550:tinyusb/src/common/tusb_types.h **** 
 551:tinyusb/src/common/tusb_types.h **** // return next descriptor
 552:tinyusb/src/common/tusb_types.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t const * tu_desc_next(void const* desc)
 711              		.loc 2 552 53 view .LVU200
 712              	.LBB67:
 553:tinyusb/src/common/tusb_types.h **** {
 554:tinyusb/src/common/tusb_types.h ****   uint8_t const* desc8 = (uint8_t const*) desc;
 713              		.loc 2 554 3 view .LVU201
 555:tinyusb/src/common/tusb_types.h ****   return desc8 + desc8[DESC_OFFSET_LEN];
 714              		.loc 2 555 3 view .LVU202
 715              		.loc 2 555 23 is_stmt 0 view .LVU203
 716 0008 91F800C0 		ldrb	ip, [r1]	@ zero_extendqisi2
 717              		.loc 2 555 16 view .LVU204
 718 000c 6144     		add	r1, r1, ip
 719              	.LVL53:
 720              	.L74:
 721              		.loc 2 555 16 view .LVU205
 722              	.LBE67:
 723              	.LBE66:
 197:tinyusb/src/tusb.c ****   {
 724              		.loc 1 197 8 is_stmt 1 view .LVU206
 725 000e 9142     		cmp	r1, r2
 726 0010 1AD2     		bcs	.L79
 199:tinyusb/src/tusb.c ****     {
 727              		.loc 1 199 5 view .LVU207
 728              	.LVL54:
 729              	.LBB69:
 730              	.LBI69:
 556:tinyusb/src/common/tusb_types.h **** }
 557:tinyusb/src/common/tusb_types.h **** 
 558:tinyusb/src/common/tusb_types.h **** // get descriptor type
 559:tinyusb/src/common/tusb_types.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_desc_type(void const* desc)
 731              		.loc 2 559 45 view .LVU208
 732              	.LBB70:
 560:tinyusb/src/common/tusb_types.h **** {
 561:tinyusb/src/common/tusb_types.h ****   return ((uint8_t const*) desc)[DESC_OFFSET_TYPE];
 733              		.loc 2 561 3 view .LVU209
 734              		.loc 2 561 33 is_stmt 0 view .LVU210
 735 0012 91F801C0 		ldrb	ip, [r1, #1]	@ zero_extendqisi2
 736              	.LVL55:
 737              		.loc 2 561 33 view .LVU211
 738              	.LBE70:
 739              	.LBE69:
 199:tinyusb/src/tusb.c ****     {
 740              		.loc 1 199 8 view .LVU212
 741 0016 BCF1050F 		cmp	ip, #5
 742 001a F5D1     		bne	.L80
 193:tinyusb/src/tusb.c ****   uint8_t const* p_desc = (uint8_t const*) desc_itf;
ARM GAS  /tmp/ccqgw09y.s 			page 29


 743              		.loc 1 193 1 view .LVU213
 744 001c 00B5     		push	{lr}
 745              	.LCFI5:
 746              		.cfi_def_cfa_offset 4
 747              		.cfi_offset 14, -4
 748              	.L75:
 749              	.LBB72:
 201:tinyusb/src/tusb.c **** 
 750              		.loc 1 201 7 is_stmt 1 view .LVU214
 201:tinyusb/src/tusb.c **** 
 751              		.loc 1 201 21 is_stmt 0 view .LVU215
 752 001e 91F802C0 		ldrb	ip, [r1, #2]	@ zero_extendqisi2
 753              	.LVL56:
 203:tinyusb/src/tusb.c ****       ep2drv[tu_edpt_number(ep_addr)][tu_edpt_dir(ep_addr)] = driver_id;
 754              		.loc 1 203 74 is_stmt 1 view .LVU216
 204:tinyusb/src/tusb.c ****     }
 755              		.loc 1 204 7 view .LVU217
 756              	.LBB73:
 757              	.LBI73:
 518:tinyusb/src/common/tusb_types.h **** {
 758              		.loc 2 518 45 view .LVU218
 759              	.LBB74:
 520:tinyusb/src/common/tusb_types.h **** }
 760              		.loc 2 520 3 view .LVU219
 520:tinyusb/src/common/tusb_types.h **** }
 761              		.loc 2 520 10 is_stmt 0 view .LVU220
 762 0022 0CF07F0E 		and	lr, ip, #127
 763              	.LVL57:
 520:tinyusb/src/common/tusb_types.h **** }
 764              		.loc 2 520 10 view .LVU221
 765              	.LBE74:
 766              	.LBE73:
 204:tinyusb/src/tusb.c ****     }
 767              		.loc 1 204 13 view .LVU222
 768 0026 00EB4E0E 		add	lr, r0, lr, lsl #1
 769              	.LVL58:
 770              	.LBB75:
 771              	.LBI75:
 512:tinyusb/src/common/tusb_types.h **** {
 772              		.loc 2 512 48 is_stmt 1 view .LVU223
 773              	.LBB76:
 514:tinyusb/src/common/tusb_types.h **** }
 774              		.loc 2 514 3 view .LVU224
 514:tinyusb/src/common/tusb_types.h **** }
 775              		.loc 2 514 50 is_stmt 0 view .LVU225
 776 002a 4FEADC1C 		lsr	ip, ip, #7
 777              	.LVL59:
 514:tinyusb/src/common/tusb_types.h **** }
 778              		.loc 2 514 50 view .LVU226
 779              	.LBE76:
 780              	.LBE75:
 204:tinyusb/src/tusb.c ****     }
 781              		.loc 1 204 61 view .LVU227
 782 002e 0EF80C30 		strb	r3, [lr, ip]
 783              	.LVL60:
 784              	.L71:
 204:tinyusb/src/tusb.c ****     }
ARM GAS  /tmp/ccqgw09y.s 			page 30


 785              		.loc 1 204 61 view .LVU228
 786              	.LBE72:
 207:tinyusb/src/tusb.c ****   }
 787              		.loc 1 207 5 is_stmt 1 view .LVU229
 788              	.LBB77:
 552:tinyusb/src/common/tusb_types.h **** {
 789              		.loc 2 552 53 view .LVU230
 790              	.LBB68:
 554:tinyusb/src/common/tusb_types.h ****   return desc8 + desc8[DESC_OFFSET_LEN];
 791              		.loc 2 554 3 view .LVU231
 555:tinyusb/src/common/tusb_types.h **** }
 792              		.loc 2 555 3 view .LVU232
 555:tinyusb/src/common/tusb_types.h **** }
 793              		.loc 2 555 23 is_stmt 0 view .LVU233
 794 0032 91F800C0 		ldrb	ip, [r1]	@ zero_extendqisi2
 555:tinyusb/src/common/tusb_types.h **** }
 795              		.loc 2 555 16 view .LVU234
 796 0036 6144     		add	r1, r1, ip
 797              	.LVL61:
 555:tinyusb/src/common/tusb_types.h **** }
 798              		.loc 2 555 16 view .LVU235
 799              	.LBE68:
 800              	.LBE77:
 197:tinyusb/src/tusb.c ****   {
 801              		.loc 1 197 8 is_stmt 1 view .LVU236
 802 0038 9142     		cmp	r1, r2
 803 003a E3D2     		bcs	.L81
 199:tinyusb/src/tusb.c ****     {
 804              		.loc 1 199 5 view .LVU237
 805              	.LVL62:
 806              	.LBB78:
 559:tinyusb/src/common/tusb_types.h **** {
 807              		.loc 2 559 45 view .LVU238
 808              	.LBB71:
 809              		.loc 2 561 3 view .LVU239
 810              		.loc 2 561 33 is_stmt 0 view .LVU240
 811 003c 91F801C0 		ldrb	ip, [r1, #1]	@ zero_extendqisi2
 812              	.LVL63:
 813              		.loc 2 561 33 view .LVU241
 814              	.LBE71:
 815              	.LBE78:
 199:tinyusb/src/tusb.c ****     {
 816              		.loc 1 199 8 view .LVU242
 817 0040 BCF1050F 		cmp	ip, #5
 818 0044 F5D1     		bne	.L71
 819 0046 EAE7     		b	.L75
 820              	.L79:
 821              	.LCFI6:
 822              		.cfi_def_cfa_offset 0
 823              		.cfi_restore 14
 199:tinyusb/src/tusb.c ****     {
 824              		.loc 1 199 8 view .LVU243
 825 0048 7047     		bx	lr
 826              		.cfi_endproc
 827              	.LFE87:
 829              		.section	.text.tu_desc_get_interface_total_len,"ax",%progbits
 830              		.align	1
ARM GAS  /tmp/ccqgw09y.s 			page 31


 831              		.global	tu_desc_get_interface_total_len
 832              		.syntax unified
 833              		.thumb
 834              		.thumb_func
 835              		.fpu fpv4-sp-d16
 837              	tu_desc_get_interface_total_len:
 838              	.LVL64:
 839              	.LFB88:
 210:tinyusb/src/tusb.c **** 
 211:tinyusb/src/tusb.c **** uint16_t tu_desc_get_interface_total_len(tusb_desc_interface_t const* desc_itf, uint8_t itf_count, 
 212:tinyusb/src/tusb.c **** {
 840              		.loc 1 212 1 is_stmt 1 view -0
 841              		.cfi_startproc
 842              		@ args = 0, pretend = 0, frame = 0
 843              		@ frame_needed = 0, uses_anonymous_args = 0
 844              		.loc 1 212 1 is_stmt 0 view .LVU245
 845 0000 00B5     		push	{lr}
 846              	.LCFI7:
 847              		.cfi_def_cfa_offset 4
 848              		.cfi_offset 14, -4
 849 0002 8446     		mov	ip, r0
 213:tinyusb/src/tusb.c ****   uint8_t const* p_desc = (uint8_t const*) desc_itf;
 850              		.loc 1 213 3 is_stmt 1 view .LVU246
 851              	.LVL65:
 214:tinyusb/src/tusb.c ****   uint16_t len = 0;
 852              		.loc 1 214 3 view .LVU247
 215:tinyusb/src/tusb.c **** 
 216:tinyusb/src/tusb.c ****   while (itf_count--)
 853              		.loc 1 216 3 view .LVU248
 213:tinyusb/src/tusb.c ****   uint16_t len = 0;
 854              		.loc 1 213 18 is_stmt 0 view .LVU249
 855 0004 0346     		mov	r3, r0
 214:tinyusb/src/tusb.c ****   uint16_t len = 0;
 856              		.loc 1 214 12 view .LVU250
 857 0006 0020     		movs	r0, #0
 858              	.LVL66:
 859              		.loc 1 216 9 view .LVU251
 860 0008 0EE0     		b	.L83
 861              	.LVL67:
 862              	.L86:
 217:tinyusb/src/tusb.c ****   {
 218:tinyusb/src/tusb.c ****     // Next on interface desc
 219:tinyusb/src/tusb.c ****     len += tu_desc_len(desc_itf);
 220:tinyusb/src/tusb.c ****     p_desc = tu_desc_next(p_desc);
 221:tinyusb/src/tusb.c **** 
 222:tinyusb/src/tusb.c ****     while (len < max_len)
 223:tinyusb/src/tusb.c ****     {
 224:tinyusb/src/tusb.c ****       // return on IAD regardless of itf count
 225:tinyusb/src/tusb.c ****       if ( tu_desc_type(p_desc) == TUSB_DESC_INTERFACE_ASSOCIATION ) return len;
 226:tinyusb/src/tusb.c **** 
 227:tinyusb/src/tusb.c ****       if ( (tu_desc_type(p_desc) == TUSB_DESC_INTERFACE) &&
 228:tinyusb/src/tusb.c ****            ((tusb_desc_interface_t const*) p_desc)->bAlternateSetting == 0 )
 229:tinyusb/src/tusb.c ****       {
 230:tinyusb/src/tusb.c ****         break;
 231:tinyusb/src/tusb.c ****       }
 232:tinyusb/src/tusb.c **** 
 233:tinyusb/src/tusb.c ****       len += tu_desc_len(p_desc);
ARM GAS  /tmp/ccqgw09y.s 			page 32


 863              		.loc 1 233 7 is_stmt 1 view .LVU252
 864              	.LBB79:
 865              	.LBI79:
 562:tinyusb/src/common/tusb_types.h **** }
 563:tinyusb/src/common/tusb_types.h **** 
 564:tinyusb/src/common/tusb_types.h **** // get descriptor length
 565:tinyusb/src/common/tusb_types.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_desc_len(void const* desc)
 866              		.loc 2 565 45 view .LVU253
 867              	.LBB80:
 566:tinyusb/src/common/tusb_types.h **** {
 567:tinyusb/src/common/tusb_types.h ****   return ((uint8_t const*) desc)[DESC_OFFSET_LEN];
 868              		.loc 2 567 3 view .LVU254
 869              		.loc 2 567 33 is_stmt 0 view .LVU255
 870 000a 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 871              	.LVL68:
 872              		.loc 2 567 33 view .LVU256
 873              	.LBE80:
 874              	.LBE79:
 875              		.loc 1 233 11 view .LVU257
 876 000c 0844     		add	r0, r0, r1
 877              	.LVL69:
 878              		.loc 1 233 11 view .LVU258
 879 000e 80B2     		uxth	r0, r0
 880              	.LVL70:
 234:tinyusb/src/tusb.c ****       p_desc = tu_desc_next(p_desc);
 881              		.loc 1 234 7 is_stmt 1 view .LVU259
 882              	.LBB81:
 883              	.LBI81:
 552:tinyusb/src/common/tusb_types.h **** {
 884              		.loc 2 552 53 view .LVU260
 885              	.LBB82:
 554:tinyusb/src/common/tusb_types.h ****   return desc8 + desc8[DESC_OFFSET_LEN];
 886              		.loc 2 554 3 view .LVU261
 555:tinyusb/src/common/tusb_types.h **** }
 887              		.loc 2 555 3 view .LVU262
 555:tinyusb/src/common/tusb_types.h **** }
 888              		.loc 2 555 16 is_stmt 0 view .LVU263
 889 0010 0B44     		add	r3, r3, r1
 890              	.LVL71:
 891              	.L84:
 555:tinyusb/src/common/tusb_types.h **** }
 892              		.loc 2 555 16 view .LVU264
 893              	.LBE82:
 894              	.LBE81:
 222:tinyusb/src/tusb.c ****     {
 895              		.loc 1 222 11 is_stmt 1 view .LVU265
 896 0012 9042     		cmp	r0, r2
 897 0014 07D2     		bcs	.L87
 225:tinyusb/src/tusb.c **** 
 898              		.loc 1 225 7 view .LVU266
 899              	.LVL72:
 900              	.LBB83:
 901              	.LBI83:
 559:tinyusb/src/common/tusb_types.h **** {
 902              		.loc 2 559 45 view .LVU267
 903              	.LBB84:
 561:tinyusb/src/common/tusb_types.h **** }
ARM GAS  /tmp/ccqgw09y.s 			page 33


 904              		.loc 2 561 3 view .LVU268
 561:tinyusb/src/common/tusb_types.h **** }
 905              		.loc 2 561 33 is_stmt 0 view .LVU269
 906 0016 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 907              	.LVL73:
 561:tinyusb/src/common/tusb_types.h **** }
 908              		.loc 2 561 33 view .LVU270
 909              	.LBE84:
 910              	.LBE83:
 225:tinyusb/src/tusb.c **** 
 911              		.loc 1 225 10 view .LVU271
 912 0018 0B29     		cmp	r1, #11
 913 001a 11D0     		beq	.L85
 227:tinyusb/src/tusb.c ****            ((tusb_desc_interface_t const*) p_desc)->bAlternateSetting == 0 )
 914              		.loc 1 227 7 is_stmt 1 view .LVU272
 915              	.LVL74:
 561:tinyusb/src/common/tusb_types.h **** }
 916              		.loc 2 561 3 view .LVU273
 227:tinyusb/src/tusb.c ****            ((tusb_desc_interface_t const*) p_desc)->bAlternateSetting == 0 )
 917              		.loc 1 227 10 is_stmt 0 view .LVU274
 918 001c 0429     		cmp	r1, #4
 919 001e F4D1     		bne	.L86
 228:tinyusb/src/tusb.c ****       {
 920              		.loc 1 228 51 discriminator 1 view .LVU275
 921 0020 D978     		ldrb	r1, [r3, #3]	@ zero_extendqisi2
 227:tinyusb/src/tusb.c ****            ((tusb_desc_interface_t const*) p_desc)->bAlternateSetting == 0 )
 922              		.loc 1 227 58 discriminator 1 view .LVU276
 923 0022 0029     		cmp	r1, #0
 924 0024 F1D1     		bne	.L86
 925              	.L87:
 212:tinyusb/src/tusb.c ****   uint8_t const* p_desc = (uint8_t const*) desc_itf;
 926              		.loc 1 212 1 view .LVU277
 927 0026 7146     		mov	r1, lr
 928              	.LVL75:
 929              	.L83:
 216:tinyusb/src/tusb.c ****   {
 930              		.loc 1 216 9 is_stmt 1 view .LVU278
 216:tinyusb/src/tusb.c ****   {
 931              		.loc 1 216 19 is_stmt 0 view .LVU279
 932 0028 01F1FF3E 		add	lr, r1, #-1
 933 002c 5FFA8EFE 		uxtb	lr, lr
 934              	.LVL76:
 216:tinyusb/src/tusb.c ****   {
 935              		.loc 1 216 9 view .LVU280
 936 0030 31B1     		cbz	r1, .L85
 219:tinyusb/src/tusb.c ****     p_desc = tu_desc_next(p_desc);
 937              		.loc 1 219 5 is_stmt 1 view .LVU281
 938              	.LVL77:
 939              	.LBB85:
 940              	.LBI85:
 565:tinyusb/src/common/tusb_types.h **** {
 941              		.loc 2 565 45 view .LVU282
 942              	.LBB86:
 943              		.loc 2 567 3 view .LVU283
 944              		.loc 2 567 3 is_stmt 0 view .LVU284
 945              	.LBE86:
 946              	.LBE85:
ARM GAS  /tmp/ccqgw09y.s 			page 34


 219:tinyusb/src/tusb.c ****     p_desc = tu_desc_next(p_desc);
 947              		.loc 1 219 12 view .LVU285
 948 0032 9CF80010 		ldrb	r1, [ip]	@ zero_extendqisi2
 219:tinyusb/src/tusb.c ****     p_desc = tu_desc_next(p_desc);
 949              		.loc 1 219 9 view .LVU286
 950 0036 0844     		add	r0, r0, r1
 951              	.LVL78:
 219:tinyusb/src/tusb.c ****     p_desc = tu_desc_next(p_desc);
 952              		.loc 1 219 9 view .LVU287
 953 0038 80B2     		uxth	r0, r0
 954              	.LVL79:
 220:tinyusb/src/tusb.c **** 
 955              		.loc 1 220 5 is_stmt 1 view .LVU288
 956              	.LBB87:
 957              	.LBI87:
 552:tinyusb/src/common/tusb_types.h **** {
 958              		.loc 2 552 53 view .LVU289
 959              	.LBB88:
 554:tinyusb/src/common/tusb_types.h ****   return desc8 + desc8[DESC_OFFSET_LEN];
 960              		.loc 2 554 3 view .LVU290
 555:tinyusb/src/common/tusb_types.h **** }
 961              		.loc 2 555 3 view .LVU291
 555:tinyusb/src/common/tusb_types.h **** }
 962              		.loc 2 555 23 is_stmt 0 view .LVU292
 963 003a 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 555:tinyusb/src/common/tusb_types.h **** }
 964              		.loc 2 555 16 view .LVU293
 965 003c 0B44     		add	r3, r3, r1
 966              	.LVL80:
 555:tinyusb/src/common/tusb_types.h **** }
 967              		.loc 2 555 16 view .LVU294
 968              	.LBE88:
 969              	.LBE87:
 222:tinyusb/src/tusb.c ****     {
 970              		.loc 1 222 5 is_stmt 1 view .LVU295
 222:tinyusb/src/tusb.c ****     {
 971              		.loc 1 222 11 is_stmt 0 view .LVU296
 972 003e E8E7     		b	.L84
 973              	.L85:
 235:tinyusb/src/tusb.c ****     }
 236:tinyusb/src/tusb.c ****   }
 237:tinyusb/src/tusb.c **** 
 238:tinyusb/src/tusb.c ****   return len;
 239:tinyusb/src/tusb.c **** }
 974              		.loc 1 239 1 view .LVU297
 975 0040 5DF804FB 		ldr	pc, [sp], #4
 976              		.cfi_endproc
 977              	.LFE88:
 979              		.section	.text.tu_edpt_stream_init,"ax",%progbits
 980              		.align	1
 981              		.global	tu_edpt_stream_init
 982              		.syntax unified
 983              		.thumb
 984              		.thumb_func
 985              		.fpu fpv4-sp-d16
 987              	tu_edpt_stream_init:
 988              	.LVL81:
ARM GAS  /tmp/ccqgw09y.s 			page 35


 989              	.LFB89:
 240:tinyusb/src/tusb.c **** 
 241:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
 242:tinyusb/src/tusb.c **** // Endpoint Stream Helper for both Host and Device stack
 243:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
 244:tinyusb/src/tusb.c **** 
 245:tinyusb/src/tusb.c **** bool tu_edpt_stream_init(tu_edpt_stream_t* s, bool is_host, bool is_tx, bool overwritable,
 246:tinyusb/src/tusb.c ****                          void* ff_buf, uint16_t ff_bufsize, uint8_t* ep_buf, uint16_t ep_bufsize)
 247:tinyusb/src/tusb.c **** {
 990              		.loc 1 247 1 is_stmt 1 view -0
 991              		.cfi_startproc
 992              		@ args = 16, pretend = 0, frame = 0
 993              		@ frame_needed = 0, uses_anonymous_args = 0
 994              		.loc 1 247 1 is_stmt 0 view .LVU299
 995 0000 10B5     		push	{r4, lr}
 996              	.LCFI8:
 997              		.cfi_def_cfa_offset 8
 998              		.cfi_offset 4, -8
 999              		.cfi_offset 14, -4
 1000 0002 82B0     		sub	sp, sp, #8
 1001              	.LCFI9:
 1002              		.cfi_def_cfa_offset 16
 1003 0004 0446     		mov	r4, r0
 248:tinyusb/src/tusb.c ****   osal_mutex_t new_mutex = osal_mutex_create(&s->ff_mutex);
 1004              		.loc 1 248 3 is_stmt 1 view .LVU300
 1005              	.LVL82:
 249:tinyusb/src/tusb.c ****   (void) new_mutex;
 1006              		.loc 1 249 3 view .LVU301
 250:tinyusb/src/tusb.c ****   (void) is_tx;
 1007              		.loc 1 250 3 view .LVU302
 251:tinyusb/src/tusb.c **** 
 252:tinyusb/src/tusb.c ****   s->is_host = is_host;
 1008              		.loc 1 252 3 view .LVU303
 1009              		.loc 1 252 14 is_stmt 0 view .LVU304
 1010 0006 00F80C1B 		strb	r1, [r0], #12
 1011              	.LVL83:
 253:tinyusb/src/tusb.c ****   tu_fifo_config(&s->ff, ff_buf, ff_bufsize, 1, overwritable);
 1012              		.loc 1 253 3 is_stmt 1 view .LVU305
 1013 000a 0093     		str	r3, [sp]
 1014 000c 0123     		movs	r3, #1
 1015              	.LVL84:
 1016              		.loc 1 253 3 is_stmt 0 view .LVU306
 1017 000e BDF81420 		ldrh	r2, [sp, #20]
 1018              	.LVL85:
 1019              		.loc 1 253 3 view .LVU307
 1020 0012 0499     		ldr	r1, [sp, #16]
 1021              	.LVL86:
 1022              		.loc 1 253 3 view .LVU308
 1023 0014 FFF7FEFF 		bl	tu_fifo_config
 1024              	.LVL87:
 254:tinyusb/src/tusb.c ****   tu_fifo_config_mutex(&s->ff, is_tx ? new_mutex : NULL, is_tx ? NULL : new_mutex);
 1025              		.loc 1 254 83 is_stmt 1 view .LVU309
 255:tinyusb/src/tusb.c **** 
 256:tinyusb/src/tusb.c ****   s->ep_buf = ep_buf;
 1026              		.loc 1 256 3 view .LVU310
 1027              		.loc 1 256 13 is_stmt 0 view .LVU311
 1028 0018 069B     		ldr	r3, [sp, #24]
ARM GAS  /tmp/ccqgw09y.s 			page 36


 1029 001a A360     		str	r3, [r4, #8]
 257:tinyusb/src/tusb.c ****   s->ep_bufsize = ep_bufsize;
 1030              		.loc 1 257 3 is_stmt 1 view .LVU312
 1031              		.loc 1 257 17 is_stmt 0 view .LVU313
 1032 001c BDF81C30 		ldrh	r3, [sp, #28]
 1033 0020 E380     		strh	r3, [r4, #6]	@ movhi
 258:tinyusb/src/tusb.c **** 
 259:tinyusb/src/tusb.c ****   return true;
 1034              		.loc 1 259 3 is_stmt 1 view .LVU314
 260:tinyusb/src/tusb.c **** }
 1035              		.loc 1 260 1 is_stmt 0 view .LVU315
 1036 0022 0120     		movs	r0, #1
 1037 0024 02B0     		add	sp, sp, #8
 1038              	.LCFI10:
 1039              		.cfi_def_cfa_offset 8
 1040              		@ sp needed
 1041 0026 10BD     		pop	{r4, pc}
 1042              		.loc 1 260 1 view .LVU316
 1043              		.cfi_endproc
 1044              	.LFE89:
 1046              		.section	.text.tu_edpt_stream_write_zlp_if_needed,"ax",%progbits
 1047              		.align	1
 1048              		.global	tu_edpt_stream_write_zlp_if_needed
 1049              		.syntax unified
 1050              		.thumb
 1051              		.thumb_func
 1052              		.fpu fpv4-sp-d16
 1054              	tu_edpt_stream_write_zlp_if_needed:
 1055              	.LVL88:
 1056              	.LFB93:
 261:tinyusb/src/tusb.c **** 
 262:tinyusb/src/tusb.c **** TU_ATTR_ALWAYS_INLINE static inline
 263:tinyusb/src/tusb.c **** bool stream_claim(tu_edpt_stream_t* s)
 264:tinyusb/src/tusb.c **** {
 265:tinyusb/src/tusb.c ****   if (s->is_host)
 266:tinyusb/src/tusb.c ****   {
 267:tinyusb/src/tusb.c ****     #if CFG_TUH_ENABLED
 268:tinyusb/src/tusb.c ****     return usbh_edpt_claim(s->daddr, s->ep_addr);
 269:tinyusb/src/tusb.c ****     #endif
 270:tinyusb/src/tusb.c ****   }else
 271:tinyusb/src/tusb.c ****   {
 272:tinyusb/src/tusb.c ****     #if CFG_TUD_ENABLED
 273:tinyusb/src/tusb.c ****     return usbd_edpt_claim(s->rhport, s->ep_addr);
 274:tinyusb/src/tusb.c ****     #endif
 275:tinyusb/src/tusb.c ****   }
 276:tinyusb/src/tusb.c **** 
 277:tinyusb/src/tusb.c ****   return false;
 278:tinyusb/src/tusb.c **** }
 279:tinyusb/src/tusb.c **** 
 280:tinyusb/src/tusb.c **** TU_ATTR_ALWAYS_INLINE static inline
 281:tinyusb/src/tusb.c **** bool stream_xfer(tu_edpt_stream_t* s, uint16_t count)
 282:tinyusb/src/tusb.c **** {
 283:tinyusb/src/tusb.c ****   if (s->is_host)
 284:tinyusb/src/tusb.c ****   {
 285:tinyusb/src/tusb.c ****     #if CFG_TUH_ENABLED
 286:tinyusb/src/tusb.c ****     return usbh_edpt_xfer(s->daddr, s->ep_addr, count ? s->ep_buf : NULL, count);
 287:tinyusb/src/tusb.c ****     #endif
ARM GAS  /tmp/ccqgw09y.s 			page 37


 288:tinyusb/src/tusb.c ****   }else
 289:tinyusb/src/tusb.c ****   {
 290:tinyusb/src/tusb.c ****     #if CFG_TUD_ENABLED
 291:tinyusb/src/tusb.c ****     return usbd_edpt_xfer(s->rhport, s->ep_addr, count ? s->ep_buf : NULL, count);
 292:tinyusb/src/tusb.c ****     #endif
 293:tinyusb/src/tusb.c ****   }
 294:tinyusb/src/tusb.c **** 
 295:tinyusb/src/tusb.c ****   return false;
 296:tinyusb/src/tusb.c **** }
 297:tinyusb/src/tusb.c **** 
 298:tinyusb/src/tusb.c **** TU_ATTR_ALWAYS_INLINE static inline
 299:tinyusb/src/tusb.c **** bool stream_release(tu_edpt_stream_t* s)
 300:tinyusb/src/tusb.c **** {
 301:tinyusb/src/tusb.c ****   if (s->is_host)
 302:tinyusb/src/tusb.c ****   {
 303:tinyusb/src/tusb.c ****     #if CFG_TUH_ENABLED
 304:tinyusb/src/tusb.c ****     return usbh_edpt_release(s->daddr, s->ep_addr);
 305:tinyusb/src/tusb.c ****     #endif
 306:tinyusb/src/tusb.c ****   }else
 307:tinyusb/src/tusb.c ****   {
 308:tinyusb/src/tusb.c ****     #if CFG_TUD_ENABLED
 309:tinyusb/src/tusb.c ****     return usbd_edpt_release(s->rhport, s->ep_addr);
 310:tinyusb/src/tusb.c ****     #endif
 311:tinyusb/src/tusb.c ****   }
 312:tinyusb/src/tusb.c **** 
 313:tinyusb/src/tusb.c ****   return false;
 314:tinyusb/src/tusb.c **** }
 315:tinyusb/src/tusb.c **** 
 316:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
 317:tinyusb/src/tusb.c **** // Stream Write
 318:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
 319:tinyusb/src/tusb.c **** 
 320:tinyusb/src/tusb.c **** bool tu_edpt_stream_write_zlp_if_needed(tu_edpt_stream_t* s, uint32_t last_xferred_bytes)
 321:tinyusb/src/tusb.c **** {
 1057              		.loc 1 321 1 is_stmt 1 view -0
 1058              		.cfi_startproc
 1059              		@ args = 0, pretend = 0, frame = 0
 1060              		@ frame_needed = 0, uses_anonymous_args = 0
 1061              		.loc 1 321 1 is_stmt 0 view .LVU318
 1062 0000 38B5     		push	{r3, r4, r5, lr}
 1063              	.LCFI11:
 1064              		.cfi_def_cfa_offset 16
 1065              		.cfi_offset 3, -16
 1066              		.cfi_offset 4, -12
 1067              		.cfi_offset 5, -8
 1068              		.cfi_offset 14, -4
 1069 0002 0446     		mov	r4, r0
 1070 0004 0D46     		mov	r5, r1
 322:tinyusb/src/tusb.c ****   // ZLP condition: no pending data, last transferred bytes is multiple of packet size
 323:tinyusb/src/tusb.c ****   TU_VERIFY( !tu_fifo_count(&s->ff) && last_xferred_bytes && (0 == (last_xferred_bytes & (s->ep_pac
 1071              		.loc 1 323 3 is_stmt 1 view .LVU319
 1072              		.loc 1 323 3 view .LVU320
 1073 0006 0C30     		adds	r0, r0, #12
 1074              	.LVL89:
 1075              		.loc 1 323 3 is_stmt 0 view .LVU321
 1076 0008 FFF7FEFF 		bl	tu_fifo_count
 1077              	.LVL90:
ARM GAS  /tmp/ccqgw09y.s 			page 38


 1078              		.loc 1 323 3 view .LVU322
 1079 000c 10BB     		cbnz	r0, .L99
 1080              		.loc 1 323 3 discriminator 2 view .LVU323
 1081 000e 25B3     		cbz	r5, .L100
 1082              		.loc 1 323 3 discriminator 4 view .LVU324
 1083 0010 A388     		ldrh	r3, [r4, #4]
 1084 0012 013B     		subs	r3, r3, #1
 1085 0014 2B42     		tst	r3, r5
 1086 0016 22D1     		bne	.L101
 1087              		.loc 1 323 3 is_stmt 1 view .LVU325
 324:tinyusb/src/tusb.c **** 
 325:tinyusb/src/tusb.c ****   TU_VERIFY( stream_claim(s) );
 1088              		.loc 1 325 3 view .LVU326
 1089              		.loc 1 325 3 view .LVU327
 1090              	.LVL91:
 1091              	.LBB89:
 1092              	.LBI89:
 263:tinyusb/src/tusb.c **** {
 1093              		.loc 1 263 6 view .LVU328
 1094              	.LBB90:
 265:tinyusb/src/tusb.c ****   {
 1095              		.loc 1 265 3 view .LVU329
 265:tinyusb/src/tusb.c ****   {
 1096              		.loc 1 265 8 is_stmt 0 view .LVU330
 1097 0018 2578     		ldrb	r5, [r4]	@ zero_extendqisi2
 1098              	.LVL92:
 265:tinyusb/src/tusb.c ****   {
 1099              		.loc 1 265 6 view .LVU331
 1100 001a 0DB1     		cbz	r5, .L104
 1101              	.LVL93:
 1102              	.L95:
 265:tinyusb/src/tusb.c ****   {
 1103              		.loc 1 265 6 view .LVU332
 1104              	.LBE90:
 1105              	.LBE89:
 1106              		.loc 1 325 3 is_stmt 1 discriminator 1 view .LVU333
 1107 001c 0025     		movs	r5, #0
 1108 001e 1AE0     		b	.L94
 1109              	.LVL94:
 1110              	.L104:
 1111              	.LBB92:
 1112              	.LBB91:
 273:tinyusb/src/tusb.c ****     #endif
 1113              		.loc 1 273 5 view .LVU334
 273:tinyusb/src/tusb.c ****     #endif
 1114              		.loc 1 273 12 is_stmt 0 view .LVU335
 1115 0020 A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1116 0022 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1117 0024 FFF7FEFF 		bl	usbd_edpt_claim
 1118              	.LVL95:
 273:tinyusb/src/tusb.c ****     #endif
 1119              		.loc 1 273 12 view .LVU336
 1120              	.LBE91:
 1121              	.LBE92:
 1122              		.loc 1 325 3 view .LVU337
 1123 0028 0028     		cmp	r0, #0
 1124 002a F7D0     		beq	.L95
ARM GAS  /tmp/ccqgw09y.s 			page 39


 1125              		.loc 1 325 3 is_stmt 1 view .LVU338
 326:tinyusb/src/tusb.c ****   TU_ASSERT( stream_xfer(s, 0) );
 1126              		.loc 1 326 3 view .LVU339
 1127              		.loc 1 326 3 view .LVU340
 1128              	.LVL96:
 1129              	.LBB93:
 1130              	.LBI93:
 281:tinyusb/src/tusb.c **** {
 1131              		.loc 1 281 6 view .LVU341
 1132              	.LBB94:
 283:tinyusb/src/tusb.c ****   {
 1133              		.loc 1 283 3 view .LVU342
 283:tinyusb/src/tusb.c ****   {
 1134              		.loc 1 283 8 is_stmt 0 view .LVU343
 1135 002c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 283:tinyusb/src/tusb.c ****   {
 1136              		.loc 1 283 6 view .LVU344
 1137 002e 43B1     		cbz	r3, .L105
 1138              	.LVL97:
 1139              	.L97:
 283:tinyusb/src/tusb.c ****   {
 1140              		.loc 1 283 6 view .LVU345
 1141              	.LBE94:
 1142              	.LBE93:
 1143              		.loc 1 326 3 is_stmt 1 discriminator 1 view .LVU346
 1144              		.loc 1 326 3 discriminator 1 view .LVU347
 1145              		.loc 1 326 3 discriminator 1 view .LVU348
 1146              		.loc 1 326 3 discriminator 1 view .LVU349
 1147              	.LBB96:
 1148              		.loc 1 326 3 discriminator 1 view .LVU350
 1149              		.loc 1 326 3 discriminator 1 view .LVU351
 1150 0030 4FF0E023 		mov	r3, #-536813568
 1151 0034 D3F8F03D 		ldr	r3, [r3, #3568]
 1152 0038 13F0010F 		tst	r3, #1
 1153 003c 0BD0     		beq	.L94
 1154              		.loc 1 326 3 discriminator 3 view .LVU352
 1155              		.syntax unified
 1156              	@ 326 "tinyusb/src/tusb.c" 1
 1157 003e 00BE     		BKPT #0
 1158              	
 1159              	@ 0 "" 2
 1160              		.thumb
 1161              		.syntax unified
 1162              	.LBE96:
 1163              		.loc 1 326 3 discriminator 3 view .LVU353
 1164              		.loc 1 326 3 discriminator 3 view .LVU354
 1165 0040 09E0     		b	.L94
 1166              	.LVL98:
 1167              	.L105:
 1168              	.LBB97:
 1169              	.LBB95:
 291:tinyusb/src/tusb.c ****     #endif
 1170              		.loc 1 291 5 view .LVU355
 291:tinyusb/src/tusb.c ****     #endif
 1171              		.loc 1 291 12 is_stmt 0 view .LVU356
 1172 0042 1A46     		mov	r2, r3
 1173 0044 A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
ARM GAS  /tmp/ccqgw09y.s 			page 40


 1174 0046 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1175 0048 FFF7FEFF 		bl	usbd_edpt_xfer
 1176              	.LVL99:
 291:tinyusb/src/tusb.c ****     #endif
 1177              		.loc 1 291 12 view .LVU357
 1178              	.LBE95:
 1179              	.LBE97:
 1180              		.loc 1 326 3 view .LVU358
 1181 004c 0028     		cmp	r0, #0
 1182 004e EFD0     		beq	.L97
 327:tinyusb/src/tusb.c **** 
 328:tinyusb/src/tusb.c ****   return true;
 1183              		.loc 1 328 10 view .LVU359
 1184 0050 0546     		mov	r5, r0
 1185 0052 00E0     		b	.L94
 1186              	.LVL100:
 1187              	.L99:
 323:tinyusb/src/tusb.c **** 
 1188              		.loc 1 323 3 view .LVU360
 1189 0054 0025     		movs	r5, #0
 1190              	.LVL101:
 1191              	.L94:
 329:tinyusb/src/tusb.c **** }
 1192              		.loc 1 329 1 view .LVU361
 1193 0056 2846     		mov	r0, r5
 1194 0058 38BD     		pop	{r3, r4, r5, pc}
 1195              	.LVL102:
 1196              	.L100:
 323:tinyusb/src/tusb.c **** 
 1197              		.loc 1 323 3 view .LVU362
 1198 005a 0025     		movs	r5, #0
 1199              	.LVL103:
 323:tinyusb/src/tusb.c **** 
 1200              		.loc 1 323 3 view .LVU363
 1201 005c FBE7     		b	.L94
 1202              	.LVL104:
 1203              	.L101:
 323:tinyusb/src/tusb.c **** 
 1204              		.loc 1 323 3 view .LVU364
 1205 005e 0025     		movs	r5, #0
 1206              	.LVL105:
 323:tinyusb/src/tusb.c **** 
 1207              		.loc 1 323 3 view .LVU365
 1208 0060 F9E7     		b	.L94
 1209              		.cfi_endproc
 1210              	.LFE93:
 1212              		.section	.text.tu_edpt_stream_write_xfer,"ax",%progbits
 1213              		.align	1
 1214              		.global	tu_edpt_stream_write_xfer
 1215              		.syntax unified
 1216              		.thumb
 1217              		.thumb_func
 1218              		.fpu fpv4-sp-d16
 1220              	tu_edpt_stream_write_xfer:
 1221              	.LVL106:
 1222              	.LFB94:
 330:tinyusb/src/tusb.c **** 
ARM GAS  /tmp/ccqgw09y.s 			page 41


 331:tinyusb/src/tusb.c **** uint32_t tu_edpt_stream_write_xfer(tu_edpt_stream_t* s)
 332:tinyusb/src/tusb.c **** {
 1223              		.loc 1 332 1 is_stmt 1 view -0
 1224              		.cfi_startproc
 1225              		@ args = 0, pretend = 0, frame = 0
 1226              		@ frame_needed = 0, uses_anonymous_args = 0
 1227              		.loc 1 332 1 is_stmt 0 view .LVU367
 1228 0000 38B5     		push	{r3, r4, r5, lr}
 1229              	.LCFI12:
 1230              		.cfi_def_cfa_offset 16
 1231              		.cfi_offset 3, -16
 1232              		.cfi_offset 4, -12
 1233              		.cfi_offset 5, -8
 1234              		.cfi_offset 14, -4
 1235 0002 0446     		mov	r4, r0
 333:tinyusb/src/tusb.c ****   // skip if no data
 334:tinyusb/src/tusb.c ****   TU_VERIFY( tu_fifo_count(&s->ff), 0 );
 1236              		.loc 1 334 3 is_stmt 1 view .LVU368
 1237              		.loc 1 334 3 view .LVU369
 1238 0004 00F10C05 		add	r5, r0, #12
 1239 0008 2846     		mov	r0, r5
 1240              	.LVL107:
 1241              		.loc 1 334 3 is_stmt 0 view .LVU370
 1242 000a FFF7FEFF 		bl	tu_fifo_count
 1243              	.LVL108:
 1244 000e 0028     		cmp	r0, #0
 1245 0010 2FD0     		beq	.L115
 1246              		.loc 1 334 3 is_stmt 1 view .LVU371
 335:tinyusb/src/tusb.c **** 
 336:tinyusb/src/tusb.c ****   // Claim the endpoint
 337:tinyusb/src/tusb.c ****   TU_VERIFY( stream_claim(s), 0 );
 1247              		.loc 1 337 3 view .LVU372
 1248              		.loc 1 337 3 view .LVU373
 1249              	.LVL109:
 1250              	.LBB98:
 1251              	.LBI98:
 263:tinyusb/src/tusb.c **** {
 1252              		.loc 1 263 6 view .LVU374
 1253              	.LBB99:
 265:tinyusb/src/tusb.c ****   {
 1254              		.loc 1 265 3 view .LVU375
 265:tinyusb/src/tusb.c ****   {
 1255              		.loc 1 265 8 is_stmt 0 view .LVU376
 1256 0012 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 265:tinyusb/src/tusb.c ****   {
 1257              		.loc 1 265 6 view .LVU377
 1258 0014 0BB1     		cbz	r3, .L117
 1259              	.LVL110:
 1260              	.L108:
 265:tinyusb/src/tusb.c ****   {
 1261              		.loc 1 265 6 view .LVU378
 1262              	.LBE99:
 1263              	.LBE98:
 1264              		.loc 1 337 3 is_stmt 1 discriminator 1 view .LVU379
 1265 0016 0020     		movs	r0, #0
 1266              	.L106:
 338:tinyusb/src/tusb.c **** 
ARM GAS  /tmp/ccqgw09y.s 			page 42


 339:tinyusb/src/tusb.c ****   // Pull data from FIFO -> EP buf
 340:tinyusb/src/tusb.c ****   uint16_t const count = tu_fifo_read_n(&s->ff, s->ep_buf, s->ep_bufsize);
 341:tinyusb/src/tusb.c **** 
 342:tinyusb/src/tusb.c ****   if ( count )
 343:tinyusb/src/tusb.c ****   {
 344:tinyusb/src/tusb.c ****     TU_ASSERT( stream_xfer(s, count), 0 );
 345:tinyusb/src/tusb.c ****     return count;
 346:tinyusb/src/tusb.c ****   }else
 347:tinyusb/src/tusb.c ****   {
 348:tinyusb/src/tusb.c ****     // Release endpoint since we don't make any transfer
 349:tinyusb/src/tusb.c ****     // Note: data is dropped if terminal is not connected
 350:tinyusb/src/tusb.c ****     stream_release(s);
 351:tinyusb/src/tusb.c ****     return 0;
 352:tinyusb/src/tusb.c ****   }
 353:tinyusb/src/tusb.c **** }
 1267              		.loc 1 353 1 is_stmt 0 view .LVU380
 1268 0018 38BD     		pop	{r3, r4, r5, pc}
 1269              	.LVL111:
 1270              	.L117:
 1271              	.LBB101:
 1272              	.LBB100:
 273:tinyusb/src/tusb.c ****     #endif
 1273              		.loc 1 273 5 is_stmt 1 view .LVU381
 273:tinyusb/src/tusb.c ****     #endif
 1274              		.loc 1 273 12 is_stmt 0 view .LVU382
 1275 001a A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1276 001c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1277 001e FFF7FEFF 		bl	usbd_edpt_claim
 1278              	.LVL112:
 273:tinyusb/src/tusb.c ****     #endif
 1279              		.loc 1 273 12 view .LVU383
 1280              	.LBE100:
 1281              	.LBE101:
 337:tinyusb/src/tusb.c **** 
 1282              		.loc 1 337 3 view .LVU384
 1283 0022 0028     		cmp	r0, #0
 1284 0024 F7D0     		beq	.L108
 337:tinyusb/src/tusb.c **** 
 1285              		.loc 1 337 3 is_stmt 1 discriminator 2 view .LVU385
 340:tinyusb/src/tusb.c **** 
 1286              		.loc 1 340 3 discriminator 2 view .LVU386
 340:tinyusb/src/tusb.c **** 
 1287              		.loc 1 340 26 is_stmt 0 discriminator 2 view .LVU387
 1288 0026 E288     		ldrh	r2, [r4, #6]
 1289 0028 A168     		ldr	r1, [r4, #8]
 1290 002a 2846     		mov	r0, r5
 1291 002c FFF7FEFF 		bl	tu_fifo_read_n
 1292              	.LVL113:
 342:tinyusb/src/tusb.c ****   {
 1293              		.loc 1 342 3 is_stmt 1 discriminator 2 view .LVU388
 342:tinyusb/src/tusb.c ****   {
 1294              		.loc 1 342 6 is_stmt 0 discriminator 2 view .LVU389
 1295 0030 0546     		mov	r5, r0
 1296 0032 A8B1     		cbz	r0, .L110
 344:tinyusb/src/tusb.c ****     return count;
 1297              		.loc 1 344 5 is_stmt 1 view .LVU390
 344:tinyusb/src/tusb.c ****     return count;
ARM GAS  /tmp/ccqgw09y.s 			page 43


 1298              		.loc 1 344 5 view .LVU391
 1299              	.LVL114:
 1300              	.LBB102:
 1301              	.LBI102:
 281:tinyusb/src/tusb.c **** {
 1302              		.loc 1 281 6 view .LVU392
 1303              	.LBB103:
 283:tinyusb/src/tusb.c ****   {
 1304              		.loc 1 283 3 view .LVU393
 283:tinyusb/src/tusb.c ****   {
 1305              		.loc 1 283 8 is_stmt 0 view .LVU394
 1306 0034 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 283:tinyusb/src/tusb.c ****   {
 1307              		.loc 1 283 6 view .LVU395
 1308 0036 4BB1     		cbz	r3, .L118
 1309              	.LVL115:
 1310              	.L111:
 283:tinyusb/src/tusb.c ****   {
 1311              		.loc 1 283 6 view .LVU396
 1312              	.LBE103:
 1313              	.LBE102:
 344:tinyusb/src/tusb.c ****     return count;
 1314              		.loc 1 344 5 is_stmt 1 discriminator 1 view .LVU397
 344:tinyusb/src/tusb.c ****     return count;
 1315              		.loc 1 344 5 discriminator 1 view .LVU398
 344:tinyusb/src/tusb.c ****     return count;
 1316              		.loc 1 344 5 discriminator 1 view .LVU399
 344:tinyusb/src/tusb.c ****     return count;
 1317              		.loc 1 344 5 discriminator 1 view .LVU400
 1318              	.LBB105:
 344:tinyusb/src/tusb.c ****     return count;
 1319              		.loc 1 344 5 discriminator 1 view .LVU401
 344:tinyusb/src/tusb.c ****     return count;
 1320              		.loc 1 344 5 discriminator 1 view .LVU402
 1321 0038 4FF0E023 		mov	r3, #-536813568
 1322 003c D3F8F03D 		ldr	r3, [r3, #3568]
 1323 0040 13F0010F 		tst	r3, #1
 1324 0044 00D0     		beq	.L113
 344:tinyusb/src/tusb.c ****     return count;
 1325              		.loc 1 344 5 discriminator 3 view .LVU403
 1326              		.syntax unified
 1327              	@ 344 "tinyusb/src/tusb.c" 1
 1328 0046 00BE     		BKPT #0
 1329              	
 1330              	@ 0 "" 2
 1331              		.thumb
 1332              		.syntax unified
 1333              	.L113:
 1334              	.LBE105:
 344:tinyusb/src/tusb.c ****     return count;
 1335              		.loc 1 344 5 discriminator 5 view .LVU404
 344:tinyusb/src/tusb.c ****     return count;
 1336              		.loc 1 344 5 discriminator 5 view .LVU405
 1337 0048 0020     		movs	r0, #0
 1338 004a E5E7     		b	.L106
 1339              	.LVL116:
 1340              	.L118:
ARM GAS  /tmp/ccqgw09y.s 			page 44


 1341              	.LBB106:
 1342              	.LBB104:
 291:tinyusb/src/tusb.c ****     #endif
 1343              		.loc 1 291 5 view .LVU406
 291:tinyusb/src/tusb.c ****     #endif
 1344              		.loc 1 291 12 is_stmt 0 view .LVU407
 1345 004c 0346     		mov	r3, r0
 1346 004e A268     		ldr	r2, [r4, #8]
 1347 0050 A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1348 0052 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1349              	.LVL117:
 291:tinyusb/src/tusb.c ****     #endif
 1350              		.loc 1 291 12 view .LVU408
 1351 0054 FFF7FEFF 		bl	usbd_edpt_xfer
 1352              	.LVL118:
 291:tinyusb/src/tusb.c ****     #endif
 1353              		.loc 1 291 12 view .LVU409
 1354              	.LBE104:
 1355              	.LBE106:
 344:tinyusb/src/tusb.c ****     return count;
 1356              		.loc 1 344 5 view .LVU410
 1357 0058 0028     		cmp	r0, #0
 1358 005a EDD0     		beq	.L111
 344:tinyusb/src/tusb.c ****     return count;
 1359              		.loc 1 344 5 is_stmt 1 discriminator 2 view .LVU411
 345:tinyusb/src/tusb.c ****   }else
 1360              		.loc 1 345 5 discriminator 2 view .LVU412
 345:tinyusb/src/tusb.c ****   }else
 1361              		.loc 1 345 12 is_stmt 0 discriminator 2 view .LVU413
 1362 005c 2846     		mov	r0, r5
 1363 005e DBE7     		b	.L106
 1364              	.LVL119:
 1365              	.L110:
 350:tinyusb/src/tusb.c ****     return 0;
 1366              		.loc 1 350 5 is_stmt 1 view .LVU414
 1367              	.LBB107:
 1368              	.LBI107:
 299:tinyusb/src/tusb.c **** {
 1369              		.loc 1 299 6 view .LVU415
 1370              	.LBB108:
 301:tinyusb/src/tusb.c ****   {
 1371              		.loc 1 301 3 view .LVU416
 301:tinyusb/src/tusb.c ****   {
 1372              		.loc 1 301 8 is_stmt 0 view .LVU417
 1373 0060 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 301:tinyusb/src/tusb.c ****   {
 1374              		.loc 1 301 6 view .LVU418
 1375 0062 0BB1     		cbz	r3, .L119
 1376              	.LVL120:
 1377              	.L114:
 301:tinyusb/src/tusb.c ****   {
 1378              		.loc 1 301 6 view .LVU419
 1379              	.LBE108:
 1380              	.LBE107:
 351:tinyusb/src/tusb.c ****   }
 1381              		.loc 1 351 5 is_stmt 1 view .LVU420
 351:tinyusb/src/tusb.c ****   }
ARM GAS  /tmp/ccqgw09y.s 			page 45


 1382              		.loc 1 351 12 is_stmt 0 view .LVU421
 1383 0064 0020     		movs	r0, #0
 1384 0066 D7E7     		b	.L106
 1385              	.LVL121:
 1386              	.L119:
 1387              	.LBB110:
 1388              	.LBB109:
 309:tinyusb/src/tusb.c ****     #endif
 1389              		.loc 1 309 5 is_stmt 1 view .LVU422
 309:tinyusb/src/tusb.c ****     #endif
 1390              		.loc 1 309 12 is_stmt 0 view .LVU423
 1391 0068 A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1392 006a 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1393              	.LVL122:
 309:tinyusb/src/tusb.c ****     #endif
 1394              		.loc 1 309 12 view .LVU424
 1395 006c FFF7FEFF 		bl	usbd_edpt_release
 1396              	.LVL123:
 1397 0070 F8E7     		b	.L114
 1398              	.LVL124:
 1399              	.L115:
 309:tinyusb/src/tusb.c ****     #endif
 1400              		.loc 1 309 12 view .LVU425
 1401              	.LBE109:
 1402              	.LBE110:
 334:tinyusb/src/tusb.c **** 
 1403              		.loc 1 334 3 view .LVU426
 1404 0072 0020     		movs	r0, #0
 1405 0074 D0E7     		b	.L106
 1406              		.cfi_endproc
 1407              	.LFE94:
 1409              		.section	.text.tu_edpt_stream_write,"ax",%progbits
 1410              		.align	1
 1411              		.global	tu_edpt_stream_write
 1412              		.syntax unified
 1413              		.thumb
 1414              		.thumb_func
 1415              		.fpu fpv4-sp-d16
 1417              	tu_edpt_stream_write:
 1418              	.LVL125:
 1419              	.LFB95:
 354:tinyusb/src/tusb.c **** 
 355:tinyusb/src/tusb.c **** uint32_t tu_edpt_stream_write(tu_edpt_stream_t* s, void const *buffer, uint32_t bufsize)
 356:tinyusb/src/tusb.c **** {
 1420              		.loc 1 356 1 is_stmt 1 view -0
 1421              		.cfi_startproc
 1422              		@ args = 0, pretend = 0, frame = 0
 1423              		@ frame_needed = 0, uses_anonymous_args = 0
 1424              		.loc 1 356 1 is_stmt 0 view .LVU428
 1425 0000 70B5     		push	{r4, r5, r6, lr}
 1426              	.LCFI13:
 1427              		.cfi_def_cfa_offset 16
 1428              		.cfi_offset 4, -16
 1429              		.cfi_offset 5, -12
 1430              		.cfi_offset 6, -8
 1431              		.cfi_offset 14, -4
 1432 0002 0546     		mov	r5, r0
ARM GAS  /tmp/ccqgw09y.s 			page 46


 357:tinyusb/src/tusb.c ****   TU_VERIFY(bufsize); // TODO support ZLP
 1433              		.loc 1 357 3 is_stmt 1 view .LVU429
 1434              		.loc 1 357 3 view .LVU430
 1435 0004 1046     		mov	r0, r2
 1436              	.LVL126:
 1437              		.loc 1 357 3 is_stmt 0 view .LVU431
 1438 0006 02B9     		cbnz	r2, .L125
 1439              	.LVL127:
 1440              	.L121:
 358:tinyusb/src/tusb.c **** 
 359:tinyusb/src/tusb.c ****   uint16_t ret = tu_fifo_write_n(&s->ff, buffer, (uint16_t) bufsize);
 360:tinyusb/src/tusb.c **** 
 361:tinyusb/src/tusb.c ****   // flush if fifo has more than packet size or
 362:tinyusb/src/tusb.c ****   // in rare case: fifo depth is configured too small (which never reach packet size)
 363:tinyusb/src/tusb.c ****   if ( (tu_fifo_count(&s->ff) >= s->ep_packetsize) || (tu_fifo_depth(&s->ff) < s->ep_packetsize) )
 364:tinyusb/src/tusb.c ****   {
 365:tinyusb/src/tusb.c ****     tu_edpt_stream_write_xfer(s);
 366:tinyusb/src/tusb.c ****   }
 367:tinyusb/src/tusb.c **** 
 368:tinyusb/src/tusb.c ****   return ret;
 369:tinyusb/src/tusb.c **** }
 1441              		.loc 1 369 1 view .LVU432
 1442 0008 70BD     		pop	{r4, r5, r6, pc}
 1443              	.LVL128:
 1444              	.L125:
 357:tinyusb/src/tusb.c ****   TU_VERIFY(bufsize); // TODO support ZLP
 1445              		.loc 1 357 3 is_stmt 1 discriminator 2 view .LVU433
 359:tinyusb/src/tusb.c **** 
 1446              		.loc 1 359 3 discriminator 2 view .LVU434
 359:tinyusb/src/tusb.c **** 
 1447              		.loc 1 359 18 is_stmt 0 discriminator 2 view .LVU435
 1448 000a 05F10C06 		add	r6, r5, #12
 1449 000e 92B2     		uxth	r2, r2
 1450 0010 3046     		mov	r0, r6
 1451              	.LVL129:
 359:tinyusb/src/tusb.c **** 
 1452              		.loc 1 359 18 discriminator 2 view .LVU436
 1453 0012 FFF7FEFF 		bl	tu_fifo_write_n
 1454              	.LVL130:
 359:tinyusb/src/tusb.c **** 
 1455              		.loc 1 359 18 discriminator 2 view .LVU437
 1456 0016 0446     		mov	r4, r0
 1457              	.LVL131:
 363:tinyusb/src/tusb.c ****   {
 1458              		.loc 1 363 3 is_stmt 1 discriminator 2 view .LVU438
 363:tinyusb/src/tusb.c ****   {
 1459              		.loc 1 363 9 is_stmt 0 discriminator 2 view .LVU439
 1460 0018 3046     		mov	r0, r6
 1461 001a FFF7FEFF 		bl	tu_fifo_count
 1462              	.LVL132:
 363:tinyusb/src/tusb.c ****   {
 1463              		.loc 1 363 35 discriminator 2 view .LVU440
 1464 001e AB88     		ldrh	r3, [r5, #4]
 363:tinyusb/src/tusb.c ****   {
 1465              		.loc 1 363 6 discriminator 2 view .LVU441
 1466 0020 9842     		cmp	r0, r3
 1467 0022 02D2     		bcs	.L122
ARM GAS  /tmp/ccqgw09y.s 			page 47


 1468              	.LVL133:
 1469              	.LBB111:
 1470              	.LBI111:
 1471              		.file 3 "tinyusb/src/common/tusb_fifo.h"
   1:tinyusb/src/common/tusb_fifo.h **** /*
   2:tinyusb/src/common/tusb_fifo.h ****  * The MIT License (MIT)
   3:tinyusb/src/common/tusb_fifo.h ****  *
   4:tinyusb/src/common/tusb_fifo.h ****  * Copyright (c) 2019 Ha Thach (tinyusb.org)
   5:tinyusb/src/common/tusb_fifo.h ****  * Copyright (c) 2020 Reinhard Panhuber - rework to unmasked pointers
   6:tinyusb/src/common/tusb_fifo.h ****  *
   7:tinyusb/src/common/tusb_fifo.h ****  * Permission is hereby granted, free of charge, to any person obtaining a copy
   8:tinyusb/src/common/tusb_fifo.h ****  * of this software and associated documentation files (the "Software"), to deal
   9:tinyusb/src/common/tusb_fifo.h ****  * in the Software without restriction, including without limitation the rights
  10:tinyusb/src/common/tusb_fifo.h ****  * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  11:tinyusb/src/common/tusb_fifo.h ****  * copies of the Software, and to permit persons to whom the Software is
  12:tinyusb/src/common/tusb_fifo.h ****  * furnished to do so, subject to the following conditions:
  13:tinyusb/src/common/tusb_fifo.h ****  *
  14:tinyusb/src/common/tusb_fifo.h ****  * The above copyright notice and this permission notice shall be included in
  15:tinyusb/src/common/tusb_fifo.h ****  * all copies or substantial portions of the Software.
  16:tinyusb/src/common/tusb_fifo.h ****  *
  17:tinyusb/src/common/tusb_fifo.h ****  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  18:tinyusb/src/common/tusb_fifo.h ****  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  19:tinyusb/src/common/tusb_fifo.h ****  * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  20:tinyusb/src/common/tusb_fifo.h ****  * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  21:tinyusb/src/common/tusb_fifo.h ****  * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  22:tinyusb/src/common/tusb_fifo.h ****  * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  23:tinyusb/src/common/tusb_fifo.h ****  * THE SOFTWARE.
  24:tinyusb/src/common/tusb_fifo.h ****  *
  25:tinyusb/src/common/tusb_fifo.h ****  * This file is part of the TinyUSB stack.
  26:tinyusb/src/common/tusb_fifo.h ****  */
  27:tinyusb/src/common/tusb_fifo.h **** 
  28:tinyusb/src/common/tusb_fifo.h **** #ifndef _TUSB_FIFO_H_
  29:tinyusb/src/common/tusb_fifo.h **** #define _TUSB_FIFO_H_
  30:tinyusb/src/common/tusb_fifo.h **** 
  31:tinyusb/src/common/tusb_fifo.h **** #ifdef __cplusplus
  32:tinyusb/src/common/tusb_fifo.h **** extern "C" {
  33:tinyusb/src/common/tusb_fifo.h **** #endif
  34:tinyusb/src/common/tusb_fifo.h **** 
  35:tinyusb/src/common/tusb_fifo.h **** // Due to the use of unmasked pointers, this FIFO does not suffer from losing
  36:tinyusb/src/common/tusb_fifo.h **** // one item slice. Furthermore, write and read operations are completely
  37:tinyusb/src/common/tusb_fifo.h **** // decoupled as write and read functions do not modify a common state. Henceforth,
  38:tinyusb/src/common/tusb_fifo.h **** // writing or reading from the FIFO within an ISR is safe as long as no other
  39:tinyusb/src/common/tusb_fifo.h **** // process (thread or ISR) interferes.
  40:tinyusb/src/common/tusb_fifo.h **** // Also, this FIFO is ready to be used in combination with a DMA as the write and
  41:tinyusb/src/common/tusb_fifo.h **** // read pointers can be updated from within a DMA ISR. Overflows are detectable
  42:tinyusb/src/common/tusb_fifo.h **** // within a certain number (see tu_fifo_overflow()).
  43:tinyusb/src/common/tusb_fifo.h **** 
  44:tinyusb/src/common/tusb_fifo.h **** #include "common/tusb_common.h"
  45:tinyusb/src/common/tusb_fifo.h **** #include "osal/osal.h"
  46:tinyusb/src/common/tusb_fifo.h **** 
  47:tinyusb/src/common/tusb_fifo.h **** // mutex is only needed for RTOS
  48:tinyusb/src/common/tusb_fifo.h **** // for OS None, we don't get preempted
  49:tinyusb/src/common/tusb_fifo.h **** #define CFG_FIFO_MUTEX      OSAL_MUTEX_REQUIRED
  50:tinyusb/src/common/tusb_fifo.h **** 
  51:tinyusb/src/common/tusb_fifo.h **** /* Write/Read index is always in the range of:
  52:tinyusb/src/common/tusb_fifo.h ****  *      0 .. 2*depth-1
  53:tinyusb/src/common/tusb_fifo.h ****  * The extra window allow us to determine the fifo state of empty or full with only 2 indices
ARM GAS  /tmp/ccqgw09y.s 			page 48


  54:tinyusb/src/common/tusb_fifo.h ****  * Following are examples with depth = 3
  55:tinyusb/src/common/tusb_fifo.h ****  *
  56:tinyusb/src/common/tusb_fifo.h ****  * - empty: W = R
  57:tinyusb/src/common/tusb_fifo.h ****  *                |
  58:tinyusb/src/common/tusb_fifo.h ****  *    -------------------------
  59:tinyusb/src/common/tusb_fifo.h ****  *    | 0 | RW| 2 | 3 | 4 | 5 |
  60:tinyusb/src/common/tusb_fifo.h ****  *
  61:tinyusb/src/common/tusb_fifo.h ****  * - full 1: W > R
  62:tinyusb/src/common/tusb_fifo.h ****  *                |
  63:tinyusb/src/common/tusb_fifo.h ****  *    -------------------------
  64:tinyusb/src/common/tusb_fifo.h ****  *    | 0 | R | 2 | 3 | W | 5 |
  65:tinyusb/src/common/tusb_fifo.h ****  *
  66:tinyusb/src/common/tusb_fifo.h ****  * - full 2: W < R
  67:tinyusb/src/common/tusb_fifo.h ****  *                |
  68:tinyusb/src/common/tusb_fifo.h ****  *    -------------------------
  69:tinyusb/src/common/tusb_fifo.h ****  *    | 0 | 1 | W | 3 | 4 | R |
  70:tinyusb/src/common/tusb_fifo.h ****  *
  71:tinyusb/src/common/tusb_fifo.h ****  * - Number of items in the fifo can be determined in either cases:
  72:tinyusb/src/common/tusb_fifo.h ****  *    - case W >= R: Count = W - R
  73:tinyusb/src/common/tusb_fifo.h ****  *    - case W <  R: Count = 2*depth - (R - W)
  74:tinyusb/src/common/tusb_fifo.h ****  *
  75:tinyusb/src/common/tusb_fifo.h ****  * In non-overwritable mode, computed Count (in above 2 cases) is at most equal to depth.
  76:tinyusb/src/common/tusb_fifo.h ****  * However, in over-writable mode, write index can be repeatedly increased and count can be
  77:tinyusb/src/common/tusb_fifo.h ****  * temporarily larger than depth (overflowed condition) e.g
  78:tinyusb/src/common/tusb_fifo.h ****  *
  79:tinyusb/src/common/tusb_fifo.h ****  *  - Overflowed 1: write(3), write(1)
  80:tinyusb/src/common/tusb_fifo.h ****  *    In this case we will adjust Read index when read()/peek() is called so that count = depth.
  81:tinyusb/src/common/tusb_fifo.h ****  *                  |
  82:tinyusb/src/common/tusb_fifo.h ****  *      -------------------------
  83:tinyusb/src/common/tusb_fifo.h ****  *      | R | 1 | 2 | 3 | W | 5 |
  84:tinyusb/src/common/tusb_fifo.h ****  *
  85:tinyusb/src/common/tusb_fifo.h ****  *  - Double Overflowed i.e index is out of allowed range [0,2*depth)
  86:tinyusb/src/common/tusb_fifo.h ****  *    This occurs when we continue to write after 1st overflowed to 2nd overflowed. e.g:
  87:tinyusb/src/common/tusb_fifo.h ****  *      write(3), write(1), write(2)
  88:tinyusb/src/common/tusb_fifo.h ****  *    This must be prevented since it will cause unrecoverable state, in above example
  89:tinyusb/src/common/tusb_fifo.h ****  *    if not handled the fifo will be empty instead of continue-to-be full. Since we must not modif
  90:tinyusb/src/common/tusb_fifo.h ****  *    read index in write() function, which cause race condition. We will re-position write index s
  91:tinyusb/src/common/tusb_fifo.h ****  *    after data is written it is a full fifo i.e W = depth - R
  92:tinyusb/src/common/tusb_fifo.h ****  *
  93:tinyusb/src/common/tusb_fifo.h ****  *      re-position W = 1 before write(2)
  94:tinyusb/src/common/tusb_fifo.h ****  *      Note: we should also move data from mem[3] to read index as well, but deliberately skipped 
  95:tinyusb/src/common/tusb_fifo.h ****  *      since it is an expensive operation !!!
  96:tinyusb/src/common/tusb_fifo.h ****  *                  |
  97:tinyusb/src/common/tusb_fifo.h ****  *      -------------------------
  98:tinyusb/src/common/tusb_fifo.h ****  *      | R | W | 2 | 3 | 4 | 5 |
  99:tinyusb/src/common/tusb_fifo.h ****  *
 100:tinyusb/src/common/tusb_fifo.h ****  *      perform write(2), result is still a full fifo.
 101:tinyusb/src/common/tusb_fifo.h ****  *
 102:tinyusb/src/common/tusb_fifo.h ****  *                  |
 103:tinyusb/src/common/tusb_fifo.h ****  *      -------------------------
 104:tinyusb/src/common/tusb_fifo.h ****  *      | R | 1 | 2 | W | 4 | 5 |
 105:tinyusb/src/common/tusb_fifo.h **** 
 106:tinyusb/src/common/tusb_fifo.h ****  */
 107:tinyusb/src/common/tusb_fifo.h **** typedef struct
 108:tinyusb/src/common/tusb_fifo.h **** {
 109:tinyusb/src/common/tusb_fifo.h ****   uint8_t* buffer          ; // buffer pointer
 110:tinyusb/src/common/tusb_fifo.h ****   uint16_t depth           ; // max items
ARM GAS  /tmp/ccqgw09y.s 			page 49


 111:tinyusb/src/common/tusb_fifo.h **** 
 112:tinyusb/src/common/tusb_fifo.h ****   struct TU_ATTR_PACKED {
 113:tinyusb/src/common/tusb_fifo.h ****     uint16_t item_size : 15; // size of each item
 114:tinyusb/src/common/tusb_fifo.h ****     bool overwritable  : 1 ; // ovwerwritable when full
 115:tinyusb/src/common/tusb_fifo.h ****   };
 116:tinyusb/src/common/tusb_fifo.h **** 
 117:tinyusb/src/common/tusb_fifo.h ****   volatile uint16_t wr_idx ; // write index
 118:tinyusb/src/common/tusb_fifo.h ****   volatile uint16_t rd_idx ; // read index
 119:tinyusb/src/common/tusb_fifo.h **** 
 120:tinyusb/src/common/tusb_fifo.h **** #if OSAL_MUTEX_REQUIRED
 121:tinyusb/src/common/tusb_fifo.h ****   osal_mutex_t mutex_wr;
 122:tinyusb/src/common/tusb_fifo.h ****   osal_mutex_t mutex_rd;
 123:tinyusb/src/common/tusb_fifo.h **** #endif
 124:tinyusb/src/common/tusb_fifo.h **** 
 125:tinyusb/src/common/tusb_fifo.h **** } tu_fifo_t;
 126:tinyusb/src/common/tusb_fifo.h **** 
 127:tinyusb/src/common/tusb_fifo.h **** typedef struct
 128:tinyusb/src/common/tusb_fifo.h **** {
 129:tinyusb/src/common/tusb_fifo.h ****   uint16_t len_lin  ; ///< linear length in item size
 130:tinyusb/src/common/tusb_fifo.h ****   uint16_t len_wrap ; ///< wrapped length in item size
 131:tinyusb/src/common/tusb_fifo.h ****   void * ptr_lin    ; ///< linear part start pointer
 132:tinyusb/src/common/tusb_fifo.h ****   void * ptr_wrap   ; ///< wrapped part start pointer
 133:tinyusb/src/common/tusb_fifo.h **** } tu_fifo_buffer_info_t;
 134:tinyusb/src/common/tusb_fifo.h **** 
 135:tinyusb/src/common/tusb_fifo.h **** #define TU_FIFO_INIT(_buffer, _depth, _type, _overwritable) \
 136:tinyusb/src/common/tusb_fifo.h **** {                                                           \
 137:tinyusb/src/common/tusb_fifo.h ****   .buffer               = _buffer,                          \
 138:tinyusb/src/common/tusb_fifo.h ****   .depth                = _depth,                           \
 139:tinyusb/src/common/tusb_fifo.h ****   .item_size            = sizeof(_type),                    \
 140:tinyusb/src/common/tusb_fifo.h ****   .overwritable         = _overwritable,                    \
 141:tinyusb/src/common/tusb_fifo.h **** }
 142:tinyusb/src/common/tusb_fifo.h **** 
 143:tinyusb/src/common/tusb_fifo.h **** #define TU_FIFO_DEF(_name, _depth, _type, _overwritable)                      \
 144:tinyusb/src/common/tusb_fifo.h ****     uint8_t _name##_buf[_depth*sizeof(_type)];                                \
 145:tinyusb/src/common/tusb_fifo.h ****     tu_fifo_t _name = TU_FIFO_INIT(_name##_buf, _depth, _type, _overwritable)
 146:tinyusb/src/common/tusb_fifo.h **** 
 147:tinyusb/src/common/tusb_fifo.h **** 
 148:tinyusb/src/common/tusb_fifo.h **** bool tu_fifo_set_overwritable(tu_fifo_t *f, bool overwritable);
 149:tinyusb/src/common/tusb_fifo.h **** bool tu_fifo_clear(tu_fifo_t *f);
 150:tinyusb/src/common/tusb_fifo.h **** bool tu_fifo_config(tu_fifo_t *f, void* buffer, uint16_t depth, uint16_t item_size, bool overwritab
 151:tinyusb/src/common/tusb_fifo.h **** 
 152:tinyusb/src/common/tusb_fifo.h **** #if OSAL_MUTEX_REQUIRED
 153:tinyusb/src/common/tusb_fifo.h **** TU_ATTR_ALWAYS_INLINE static inline
 154:tinyusb/src/common/tusb_fifo.h **** void tu_fifo_config_mutex(tu_fifo_t *f, osal_mutex_t wr_mutex, osal_mutex_t rd_mutex)
 155:tinyusb/src/common/tusb_fifo.h **** {
 156:tinyusb/src/common/tusb_fifo.h ****   f->mutex_wr = wr_mutex;
 157:tinyusb/src/common/tusb_fifo.h ****   f->mutex_rd = rd_mutex;
 158:tinyusb/src/common/tusb_fifo.h **** }
 159:tinyusb/src/common/tusb_fifo.h **** 
 160:tinyusb/src/common/tusb_fifo.h **** #else
 161:tinyusb/src/common/tusb_fifo.h **** 
 162:tinyusb/src/common/tusb_fifo.h **** #define tu_fifo_config_mutex(_f, _wr_mutex, _rd_mutex)
 163:tinyusb/src/common/tusb_fifo.h **** 
 164:tinyusb/src/common/tusb_fifo.h **** #endif
 165:tinyusb/src/common/tusb_fifo.h **** 
 166:tinyusb/src/common/tusb_fifo.h **** bool     tu_fifo_write                  (tu_fifo_t* f, void const * p_data);
 167:tinyusb/src/common/tusb_fifo.h **** uint16_t tu_fifo_write_n                (tu_fifo_t* f, void const * p_data, uint16_t n);
ARM GAS  /tmp/ccqgw09y.s 			page 50


 168:tinyusb/src/common/tusb_fifo.h **** uint16_t tu_fifo_write_n_const_addr_full_words    (tu_fifo_t* f, const void * data, uint16_t n);
 169:tinyusb/src/common/tusb_fifo.h **** 
 170:tinyusb/src/common/tusb_fifo.h **** bool     tu_fifo_read                   (tu_fifo_t* f, void * p_buffer);
 171:tinyusb/src/common/tusb_fifo.h **** uint16_t tu_fifo_read_n                 (tu_fifo_t* f, void * p_buffer, uint16_t n);
 172:tinyusb/src/common/tusb_fifo.h **** uint16_t tu_fifo_read_n_const_addr_full_words     (tu_fifo_t* f, void * buffer, uint16_t n);
 173:tinyusb/src/common/tusb_fifo.h **** 
 174:tinyusb/src/common/tusb_fifo.h **** bool     tu_fifo_peek                   (tu_fifo_t* f, void * p_buffer);
 175:tinyusb/src/common/tusb_fifo.h **** uint16_t tu_fifo_peek_n                 (tu_fifo_t* f, void * p_buffer, uint16_t n);
 176:tinyusb/src/common/tusb_fifo.h **** 
 177:tinyusb/src/common/tusb_fifo.h **** uint16_t tu_fifo_count                  (tu_fifo_t* f);
 178:tinyusb/src/common/tusb_fifo.h **** uint16_t tu_fifo_remaining              (tu_fifo_t* f);
 179:tinyusb/src/common/tusb_fifo.h **** bool     tu_fifo_empty                  (tu_fifo_t* f);
 180:tinyusb/src/common/tusb_fifo.h **** bool     tu_fifo_full                   (tu_fifo_t* f);
 181:tinyusb/src/common/tusb_fifo.h **** bool     tu_fifo_overflowed             (tu_fifo_t* f);
 182:tinyusb/src/common/tusb_fifo.h **** void     tu_fifo_correct_read_pointer   (tu_fifo_t* f);
 183:tinyusb/src/common/tusb_fifo.h **** 
 184:tinyusb/src/common/tusb_fifo.h **** TU_ATTR_ALWAYS_INLINE static inline
 185:tinyusb/src/common/tusb_fifo.h **** uint16_t tu_fifo_depth(tu_fifo_t* f)
 1472              		.loc 3 185 10 is_stmt 1 discriminator 1 view .LVU442
 1473              	.LBB112:
 186:tinyusb/src/common/tusb_fifo.h **** {
 187:tinyusb/src/common/tusb_fifo.h ****   return f->depth;
 1474              		.loc 3 187 3 discriminator 1 view .LVU443
 1475              		.loc 3 187 11 is_stmt 0 discriminator 1 view .LVU444
 1476 0024 2A8A     		ldrh	r2, [r5, #16]
 1477              	.LVL134:
 1478              		.loc 3 187 11 discriminator 1 view .LVU445
 1479              	.LBE112:
 1480              	.LBE111:
 363:tinyusb/src/tusb.c ****   {
 1481              		.loc 1 363 52 discriminator 1 view .LVU446
 1482 0026 9342     		cmp	r3, r2
 1483 0028 02D9     		bls	.L123
 1484              	.L122:
 365:tinyusb/src/tusb.c ****   }
 1485              		.loc 1 365 5 is_stmt 1 view .LVU447
 1486 002a 2846     		mov	r0, r5
 1487 002c FFF7FEFF 		bl	tu_edpt_stream_write_xfer
 1488              	.LVL135:
 1489              	.L123:
 368:tinyusb/src/tusb.c **** }
 1490              		.loc 1 368 3 view .LVU448
 368:tinyusb/src/tusb.c **** }
 1491              		.loc 1 368 10 is_stmt 0 view .LVU449
 1492 0030 2046     		mov	r0, r4
 1493 0032 E9E7     		b	.L121
 1494              		.cfi_endproc
 1495              	.LFE95:
 1497              		.section	.text.tu_edpt_stream_read_xfer,"ax",%progbits
 1498              		.align	1
 1499              		.global	tu_edpt_stream_read_xfer
 1500              		.syntax unified
 1501              		.thumb
 1502              		.thumb_func
 1503              		.fpu fpv4-sp-d16
 1505              	tu_edpt_stream_read_xfer:
 1506              	.LVL136:
ARM GAS  /tmp/ccqgw09y.s 			page 51


 1507              	.LFB96:
 370:tinyusb/src/tusb.c **** 
 371:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
 372:tinyusb/src/tusb.c **** // Stream Read
 373:tinyusb/src/tusb.c **** //--------------------------------------------------------------------+
 374:tinyusb/src/tusb.c **** 
 375:tinyusb/src/tusb.c **** uint32_t tu_edpt_stream_read_xfer(tu_edpt_stream_t* s)
 376:tinyusb/src/tusb.c **** {
 1508              		.loc 1 376 1 is_stmt 1 view -0
 1509              		.cfi_startproc
 1510              		@ args = 0, pretend = 0, frame = 0
 1511              		@ frame_needed = 0, uses_anonymous_args = 0
 1512              		.loc 1 376 1 is_stmt 0 view .LVU451
 1513 0000 38B5     		push	{r3, r4, r5, lr}
 1514              	.LCFI14:
 1515              		.cfi_def_cfa_offset 16
 1516              		.cfi_offset 3, -16
 1517              		.cfi_offset 4, -12
 1518              		.cfi_offset 5, -8
 1519              		.cfi_offset 14, -4
 1520 0002 0446     		mov	r4, r0
 377:tinyusb/src/tusb.c ****   uint16_t available = tu_fifo_remaining(&s->ff);
 1521              		.loc 1 377 3 is_stmt 1 view .LVU452
 1522              		.loc 1 377 24 is_stmt 0 view .LVU453
 1523 0004 00F10C05 		add	r5, r0, #12
 1524 0008 2846     		mov	r0, r5
 1525              	.LVL137:
 1526              		.loc 1 377 24 view .LVU454
 1527 000a FFF7FEFF 		bl	tu_fifo_remaining
 1528              	.LVL138:
 378:tinyusb/src/tusb.c **** 
 379:tinyusb/src/tusb.c ****   // Prepare for incoming data but only allow what we can store in the ring buffer.
 380:tinyusb/src/tusb.c ****   // TODO Actually we can still carry out the transfer, keeping count of received bytes
 381:tinyusb/src/tusb.c ****   // and slowly move it to the FIFO when read().
 382:tinyusb/src/tusb.c ****   // This pre-check reduces endpoint claiming
 383:tinyusb/src/tusb.c ****   TU_VERIFY(available >= s->ep_packetsize);
 1529              		.loc 1 383 3 is_stmt 1 view .LVU455
 1530              		.loc 1 383 3 view .LVU456
 1531 000e A388     		ldrh	r3, [r4, #4]
 1532 0010 8342     		cmp	r3, r0
 1533 0012 39D8     		bhi	.L136
 1534              		.loc 1 383 3 view .LVU457
 384:tinyusb/src/tusb.c **** 
 385:tinyusb/src/tusb.c ****   // claim endpoint
 386:tinyusb/src/tusb.c ****   TU_VERIFY(stream_claim(s), 0);
 1535              		.loc 1 386 3 view .LVU458
 1536              		.loc 1 386 3 view .LVU459
 1537              	.LVL139:
 1538              	.LBB113:
 1539              	.LBI113:
 263:tinyusb/src/tusb.c **** {
 1540              		.loc 1 263 6 view .LVU460
 1541              	.LBB114:
 265:tinyusb/src/tusb.c ****   {
 1542              		.loc 1 265 3 view .LVU461
 265:tinyusb/src/tusb.c ****   {
 1543              		.loc 1 265 8 is_stmt 0 view .LVU462
ARM GAS  /tmp/ccqgw09y.s 			page 52


 1544 0014 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 265:tinyusb/src/tusb.c ****   {
 1545              		.loc 1 265 6 view .LVU463
 1546 0016 0BB1     		cbz	r3, .L139
 1547              	.LVL140:
 1548              	.L128:
 265:tinyusb/src/tusb.c ****   {
 1549              		.loc 1 265 6 view .LVU464
 1550              	.LBE114:
 1551              	.LBE113:
 1552              		.loc 1 386 3 is_stmt 1 discriminator 1 view .LVU465
 1553 0018 0020     		movs	r0, #0
 1554              	.L126:
 387:tinyusb/src/tusb.c **** 
 388:tinyusb/src/tusb.c ****   // get available again since fifo can be changed before endpoint is claimed
 389:tinyusb/src/tusb.c ****   available = tu_fifo_remaining(&s->ff);
 390:tinyusb/src/tusb.c **** 
 391:tinyusb/src/tusb.c ****   if ( available >= s->ep_packetsize )
 392:tinyusb/src/tusb.c ****   {
 393:tinyusb/src/tusb.c ****     // multiple of packet size limit by ep bufsize
 394:tinyusb/src/tusb.c ****     uint16_t count = (uint16_t) (available & ~(s->ep_packetsize -1));
 395:tinyusb/src/tusb.c ****     count = tu_min16(count, s->ep_bufsize);
 396:tinyusb/src/tusb.c **** 
 397:tinyusb/src/tusb.c ****     TU_ASSERT( stream_xfer(s, count), 0 );
 398:tinyusb/src/tusb.c **** 
 399:tinyusb/src/tusb.c ****     return count;
 400:tinyusb/src/tusb.c ****   }else
 401:tinyusb/src/tusb.c ****   {
 402:tinyusb/src/tusb.c ****     // Release endpoint since we don't make any transfer
 403:tinyusb/src/tusb.c ****     stream_release(s);
 404:tinyusb/src/tusb.c ****     return 0;
 405:tinyusb/src/tusb.c ****   }
 406:tinyusb/src/tusb.c **** }
 1555              		.loc 1 406 1 is_stmt 0 view .LVU466
 1556 001a 38BD     		pop	{r3, r4, r5, pc}
 1557              	.LVL141:
 1558              	.L139:
 1559              	.LBB116:
 1560              	.LBB115:
 273:tinyusb/src/tusb.c ****     #endif
 1561              		.loc 1 273 5 is_stmt 1 view .LVU467
 273:tinyusb/src/tusb.c ****     #endif
 1562              		.loc 1 273 12 is_stmt 0 view .LVU468
 1563 001c A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1564 001e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1565              	.LVL142:
 273:tinyusb/src/tusb.c ****     #endif
 1566              		.loc 1 273 12 view .LVU469
 1567 0020 FFF7FEFF 		bl	usbd_edpt_claim
 1568              	.LVL143:
 273:tinyusb/src/tusb.c ****     #endif
 1569              		.loc 1 273 12 view .LVU470
 1570              	.LBE115:
 1571              	.LBE116:
 386:tinyusb/src/tusb.c **** 
 1572              		.loc 1 386 3 view .LVU471
 1573 0024 0028     		cmp	r0, #0
ARM GAS  /tmp/ccqgw09y.s 			page 53


 1574 0026 F7D0     		beq	.L128
 386:tinyusb/src/tusb.c **** 
 1575              		.loc 1 386 3 is_stmt 1 discriminator 2 view .LVU472
 389:tinyusb/src/tusb.c **** 
 1576              		.loc 1 389 3 discriminator 2 view .LVU473
 389:tinyusb/src/tusb.c **** 
 1577              		.loc 1 389 15 is_stmt 0 discriminator 2 view .LVU474
 1578 0028 2846     		mov	r0, r5
 1579 002a FFF7FEFF 		bl	tu_fifo_remaining
 1580              	.LVL144:
 391:tinyusb/src/tusb.c ****   {
 1581              		.loc 1 391 3 is_stmt 1 discriminator 2 view .LVU475
 391:tinyusb/src/tusb.c ****   {
 1582              		.loc 1 391 22 is_stmt 0 discriminator 2 view .LVU476
 1583 002e A388     		ldrh	r3, [r4, #4]
 391:tinyusb/src/tusb.c ****   {
 1584              		.loc 1 391 6 discriminator 2 view .LVU477
 1585 0030 8342     		cmp	r3, r0
 1586 0032 20D8     		bhi	.L130
 1587              	.LBB117:
 394:tinyusb/src/tusb.c ****     count = tu_min16(count, s->ep_bufsize);
 1588              		.loc 1 394 5 is_stmt 1 view .LVU478
 394:tinyusb/src/tusb.c ****     count = tu_min16(count, s->ep_bufsize);
 1589              		.loc 1 394 44 is_stmt 0 view .LVU479
 1590 0034 5B42     		rsbs	r3, r3, #0
 1591 0036 03EA0005 		and	r5, r3, r0
 394:tinyusb/src/tusb.c ****     count = tu_min16(count, s->ep_bufsize);
 1592              		.loc 1 394 14 view .LVU480
 1593 003a ADB2     		uxth	r5, r5
 1594              	.LVL145:
 395:tinyusb/src/tusb.c **** 
 1595              		.loc 1 395 5 is_stmt 1 view .LVU481
 395:tinyusb/src/tusb.c **** 
 1596              		.loc 1 395 13 is_stmt 0 view .LVU482
 1597 003c E088     		ldrh	r0, [r4, #6]
 1598              	.LVL146:
 1599              	.LBB118:
 1600              	.LBI118:
 1601              		.file 4 "tinyusb/src/common/tusb_common.h"
   1:tinyusb/src/common/tusb_common.h **** /*
   2:tinyusb/src/common/tusb_common.h ****  * The MIT License (MIT)
   3:tinyusb/src/common/tusb_common.h ****  *
   4:tinyusb/src/common/tusb_common.h ****  * Copyright (c) 2019 Ha Thach (tinyusb.org)
   5:tinyusb/src/common/tusb_common.h ****  *
   6:tinyusb/src/common/tusb_common.h ****  * Permission is hereby granted, free of charge, to any person obtaining a copy
   7:tinyusb/src/common/tusb_common.h ****  * of this software and associated documentation files (the "Software"), to deal
   8:tinyusb/src/common/tusb_common.h ****  * in the Software without restriction, including without limitation the rights
   9:tinyusb/src/common/tusb_common.h ****  * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  10:tinyusb/src/common/tusb_common.h ****  * copies of the Software, and to permit persons to whom the Software is
  11:tinyusb/src/common/tusb_common.h ****  * furnished to do so, subject to the following conditions:
  12:tinyusb/src/common/tusb_common.h ****  *
  13:tinyusb/src/common/tusb_common.h ****  * The above copyright notice and this permission notice shall be included in
  14:tinyusb/src/common/tusb_common.h ****  * all copies or substantial portions of the Software.
  15:tinyusb/src/common/tusb_common.h ****  *
  16:tinyusb/src/common/tusb_common.h ****  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  17:tinyusb/src/common/tusb_common.h ****  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  18:tinyusb/src/common/tusb_common.h ****  * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
ARM GAS  /tmp/ccqgw09y.s 			page 54


  19:tinyusb/src/common/tusb_common.h ****  * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  20:tinyusb/src/common/tusb_common.h ****  * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  21:tinyusb/src/common/tusb_common.h ****  * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  22:tinyusb/src/common/tusb_common.h ****  * THE SOFTWARE.
  23:tinyusb/src/common/tusb_common.h ****  *
  24:tinyusb/src/common/tusb_common.h ****  * This file is part of the TinyUSB stack.
  25:tinyusb/src/common/tusb_common.h ****  */
  26:tinyusb/src/common/tusb_common.h **** 
  27:tinyusb/src/common/tusb_common.h **** #ifndef _TUSB_COMMON_H_
  28:tinyusb/src/common/tusb_common.h **** #define _TUSB_COMMON_H_
  29:tinyusb/src/common/tusb_common.h **** 
  30:tinyusb/src/common/tusb_common.h **** #ifdef __cplusplus
  31:tinyusb/src/common/tusb_common.h ****  extern "C" {
  32:tinyusb/src/common/tusb_common.h **** #endif
  33:tinyusb/src/common/tusb_common.h **** 
  34:tinyusb/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  35:tinyusb/src/common/tusb_common.h **** // Macros Helper
  36:tinyusb/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  37:tinyusb/src/common/tusb_common.h **** #define TU_ARRAY_SIZE(_arr)   ( sizeof(_arr) / sizeof(_arr[0]) )
  38:tinyusb/src/common/tusb_common.h **** #define TU_MIN(_x, _y)        ( ( (_x) < (_y) ) ? (_x) : (_y) )
  39:tinyusb/src/common/tusb_common.h **** #define TU_MAX(_x, _y)        ( ( (_x) > (_y) ) ? (_x) : (_y) )
  40:tinyusb/src/common/tusb_common.h **** 
  41:tinyusb/src/common/tusb_common.h **** #define TU_U16(_high, _low)   ((uint16_t) (((_high) << 8) | (_low)))
  42:tinyusb/src/common/tusb_common.h **** #define TU_U16_HIGH(_u16)     ((uint8_t) (((_u16) >> 8) & 0x00ff))
  43:tinyusb/src/common/tusb_common.h **** #define TU_U16_LOW(_u16)      ((uint8_t) ((_u16)       & 0x00ff))
  44:tinyusb/src/common/tusb_common.h **** #define U16_TO_U8S_BE(_u16)   TU_U16_HIGH(_u16), TU_U16_LOW(_u16)
  45:tinyusb/src/common/tusb_common.h **** #define U16_TO_U8S_LE(_u16)   TU_U16_LOW(_u16), TU_U16_HIGH(_u16)
  46:tinyusb/src/common/tusb_common.h **** 
  47:tinyusb/src/common/tusb_common.h **** #define TU_U32_BYTE3(_u32)    ((uint8_t) ((((uint32_t) _u32) >> 24) & 0x000000ff)) // MSB
  48:tinyusb/src/common/tusb_common.h **** #define TU_U32_BYTE2(_u32)    ((uint8_t) ((((uint32_t) _u32) >> 16) & 0x000000ff))
  49:tinyusb/src/common/tusb_common.h **** #define TU_U32_BYTE1(_u32)    ((uint8_t) ((((uint32_t) _u32) >>  8) & 0x000000ff))
  50:tinyusb/src/common/tusb_common.h **** #define TU_U32_BYTE0(_u32)    ((uint8_t) (((uint32_t)  _u32)        & 0x000000ff)) // LSB
  51:tinyusb/src/common/tusb_common.h **** 
  52:tinyusb/src/common/tusb_common.h **** #define U32_TO_U8S_BE(_u32)   TU_U32_BYTE3(_u32), TU_U32_BYTE2(_u32), TU_U32_BYTE1(_u32), TU_U32_BY
  53:tinyusb/src/common/tusb_common.h **** #define U32_TO_U8S_LE(_u32)   TU_U32_BYTE0(_u32), TU_U32_BYTE1(_u32), TU_U32_BYTE2(_u32), TU_U32_BY
  54:tinyusb/src/common/tusb_common.h **** 
  55:tinyusb/src/common/tusb_common.h **** #define TU_BIT(n)             (1UL << (n))
  56:tinyusb/src/common/tusb_common.h **** 
  57:tinyusb/src/common/tusb_common.h **** // Generate a mask with bit from high (31) to low (0) set, e.g TU_GENMASK(3, 0) = 0b1111
  58:tinyusb/src/common/tusb_common.h **** #define TU_GENMASK(h, l)      ( (UINT32_MAX << (l)) & (UINT32_MAX >> (31 - (h))) )
  59:tinyusb/src/common/tusb_common.h **** 
  60:tinyusb/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  61:tinyusb/src/common/tusb_common.h **** // Includes
  62:tinyusb/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  63:tinyusb/src/common/tusb_common.h **** 
  64:tinyusb/src/common/tusb_common.h **** // Standard Headers
  65:tinyusb/src/common/tusb_common.h **** #include <stdbool.h>
  66:tinyusb/src/common/tusb_common.h **** #include <stdint.h>
  67:tinyusb/src/common/tusb_common.h **** #include <stddef.h>
  68:tinyusb/src/common/tusb_common.h **** #include <string.h>
  69:tinyusb/src/common/tusb_common.h **** #include <stdio.h>
  70:tinyusb/src/common/tusb_common.h **** 
  71:tinyusb/src/common/tusb_common.h **** // Tinyusb Common Headers
  72:tinyusb/src/common/tusb_common.h **** #include "tusb_option.h"
  73:tinyusb/src/common/tusb_common.h **** #include "tusb_compiler.h"
  74:tinyusb/src/common/tusb_common.h **** #include "tusb_verify.h"
  75:tinyusb/src/common/tusb_common.h **** #include "tusb_types.h"
ARM GAS  /tmp/ccqgw09y.s 			page 55


  76:tinyusb/src/common/tusb_common.h **** #include "tusb_debug.h"
  77:tinyusb/src/common/tusb_common.h **** 
  78:tinyusb/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  79:tinyusb/src/common/tusb_common.h **** // Optional API implemented by application if needed
  80:tinyusb/src/common/tusb_common.h **** // TODO move to a more ovious place/file
  81:tinyusb/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  82:tinyusb/src/common/tusb_common.h **** 
  83:tinyusb/src/common/tusb_common.h **** // flush data cache
  84:tinyusb/src/common/tusb_common.h **** TU_ATTR_WEAK extern void tusb_app_dcache_flush(uintptr_t addr, uint32_t data_size);
  85:tinyusb/src/common/tusb_common.h **** 
  86:tinyusb/src/common/tusb_common.h **** // invalidate data cache
  87:tinyusb/src/common/tusb_common.h **** TU_ATTR_WEAK extern void tusb_app_dcache_invalidate(uintptr_t addr, uint32_t data_size);
  88:tinyusb/src/common/tusb_common.h **** 
  89:tinyusb/src/common/tusb_common.h **** // Optional physical <-> virtual address translation
  90:tinyusb/src/common/tusb_common.h **** TU_ATTR_WEAK extern void* tusb_app_virt_to_phys(void *virt_addr);
  91:tinyusb/src/common/tusb_common.h **** TU_ATTR_WEAK extern void* tusb_app_phys_to_virt(void *phys_addr);
  92:tinyusb/src/common/tusb_common.h **** 
  93:tinyusb/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  94:tinyusb/src/common/tusb_common.h **** // Internal Inline Functions
  95:tinyusb/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  96:tinyusb/src/common/tusb_common.h **** 
  97:tinyusb/src/common/tusb_common.h **** //------------- Mem -------------//
  98:tinyusb/src/common/tusb_common.h **** #define tu_memclr(buffer, size)  memset((buffer), 0, (size))
  99:tinyusb/src/common/tusb_common.h **** #define tu_varclr(_var)          tu_memclr(_var, sizeof(*(_var)))
 100:tinyusb/src/common/tusb_common.h **** 
 101:tinyusb/src/common/tusb_common.h **** // This is a backport of memset_s from c11
 102:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline int tu_memset_s(void *dest, size_t destsz, int ch, size_t count
 103:tinyusb/src/common/tusb_common.h ****   // TODO may check if desst and src is not NULL
 104:tinyusb/src/common/tusb_common.h ****   if ( count > destsz ) {
 105:tinyusb/src/common/tusb_common.h ****     return -1;
 106:tinyusb/src/common/tusb_common.h ****   }
 107:tinyusb/src/common/tusb_common.h ****   memset(dest, ch, count);
 108:tinyusb/src/common/tusb_common.h ****   return 0;
 109:tinyusb/src/common/tusb_common.h **** }
 110:tinyusb/src/common/tusb_common.h **** 
 111:tinyusb/src/common/tusb_common.h **** // This is a backport of memcpy_s from c11
 112:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline int tu_memcpy_s(void *dest, size_t destsz, const void *src, siz
 113:tinyusb/src/common/tusb_common.h ****   // TODO may check if desst and src is not NULL
 114:tinyusb/src/common/tusb_common.h ****   if ( count > destsz ) {
 115:tinyusb/src/common/tusb_common.h ****     return -1;
 116:tinyusb/src/common/tusb_common.h ****   }
 117:tinyusb/src/common/tusb_common.h ****   memcpy(dest, src, count);
 118:tinyusb/src/common/tusb_common.h ****   return 0;
 119:tinyusb/src/common/tusb_common.h **** }
 120:tinyusb/src/common/tusb_common.h **** 
 121:tinyusb/src/common/tusb_common.h **** 
 122:tinyusb/src/common/tusb_common.h **** //------------- Bytes -------------//
 123:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_u32(uint8_t b3, uint8_t b2, uint8_t b1, uint8_t b0)
 124:tinyusb/src/common/tusb_common.h ****   return ( ((uint32_t) b3) << 24) | ( ((uint32_t) b2) << 16) | ( ((uint32_t) b1) << 8) | b0;
 125:tinyusb/src/common/tusb_common.h **** }
 126:tinyusb/src/common/tusb_common.h **** 
 127:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_u16(uint8_t high, uint8_t low) {
 128:tinyusb/src/common/tusb_common.h ****   return (uint16_t) ((((uint16_t) high) << 8) | low);
 129:tinyusb/src/common/tusb_common.h **** }
 130:tinyusb/src/common/tusb_common.h **** 
 131:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u32_byte3(uint32_t ui32) { return TU_U32_BYTE3(ui32)
 132:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u32_byte2(uint32_t ui32) { return TU_U32_BYTE2(ui32)
ARM GAS  /tmp/ccqgw09y.s 			page 56


 133:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u32_byte1(uint32_t ui32) { return TU_U32_BYTE1(ui32)
 134:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u32_byte0(uint32_t ui32) { return TU_U32_BYTE0(ui32)
 135:tinyusb/src/common/tusb_common.h **** 
 136:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_u32_high16(uint32_t ui32) { return (uint16_t) (ui32
 137:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_u32_low16 (uint32_t ui32) { return (uint16_t) (ui32
 138:tinyusb/src/common/tusb_common.h **** 
 139:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u16_high(uint16_t ui16) { return TU_U16_HIGH(ui16); 
 140:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u16_low (uint16_t ui16) { return TU_U16_LOW(ui16); }
 141:tinyusb/src/common/tusb_common.h **** 
 142:tinyusb/src/common/tusb_common.h **** //------------- Bits -------------//
 143:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_bit_set  (uint32_t value, uint8_t pos) { return val
 144:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_bit_clear(uint32_t value, uint8_t pos) { return val
 145:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline bool     tu_bit_test (uint32_t value, uint8_t pos) { return (va
 146:tinyusb/src/common/tusb_common.h **** 
 147:tinyusb/src/common/tusb_common.h **** //------------- Min -------------//
 148:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t  tu_min8  (uint8_t  x, uint8_t y ) { return (x < y) ? x
 149:tinyusb/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_min16 (uint16_t x, uint16_t y) { return (x < y) ? x
 1602              		.loc 4 149 46 is_stmt 1 view .LVU483
 1603              	.LBB119:
 1604              		.loc 4 149 82 view .LVU484
 1605              		.loc 4 149 101 is_stmt 0 view .LVU485
 1606 003e 8542     		cmp	r5, r0
 1607 0040 28BF     		it	cs
 1608 0042 0546     		movcs	r5, r0
 1609              	.LVL147:
 1610              		.loc 4 149 101 view .LVU486
 1611              	.LBE119:
 1612              	.LBE118:
 397:tinyusb/src/tusb.c **** 
 1613              		.loc 1 397 5 is_stmt 1 view .LVU487
 397:tinyusb/src/tusb.c **** 
 1614              		.loc 1 397 5 view .LVU488
 1615              	.LBB120:
 1616              	.LBI120:
 281:tinyusb/src/tusb.c **** {
 1617              		.loc 1 281 6 view .LVU489
 1618              	.LBB121:
 283:tinyusb/src/tusb.c ****   {
 1619              		.loc 1 283 3 view .LVU490
 283:tinyusb/src/tusb.c ****   {
 1620              		.loc 1 283 8 is_stmt 0 view .LVU491
 1621 0044 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 283:tinyusb/src/tusb.c ****   {
 1622              		.loc 1 283 6 view .LVU492
 1623 0046 4BB1     		cbz	r3, .L140
 1624              	.LVL148:
 1625              	.L131:
 283:tinyusb/src/tusb.c ****   {
 1626              		.loc 1 283 6 view .LVU493
 1627              	.LBE121:
 1628              	.LBE120:
 397:tinyusb/src/tusb.c **** 
 1629              		.loc 1 397 5 is_stmt 1 discriminator 1 view .LVU494
 397:tinyusb/src/tusb.c **** 
 1630              		.loc 1 397 5 discriminator 1 view .LVU495
 397:tinyusb/src/tusb.c **** 
 1631              		.loc 1 397 5 discriminator 1 view .LVU496
ARM GAS  /tmp/ccqgw09y.s 			page 57


 397:tinyusb/src/tusb.c **** 
 1632              		.loc 1 397 5 discriminator 1 view .LVU497
 1633              	.LBB123:
 397:tinyusb/src/tusb.c **** 
 1634              		.loc 1 397 5 discriminator 1 view .LVU498
 397:tinyusb/src/tusb.c **** 
 1635              		.loc 1 397 5 discriminator 1 view .LVU499
 1636 0048 4FF0E023 		mov	r3, #-536813568
 1637 004c D3F8F03D 		ldr	r3, [r3, #3568]
 1638 0050 13F0010F 		tst	r3, #1
 1639 0054 00D0     		beq	.L134
 397:tinyusb/src/tusb.c **** 
 1640              		.loc 1 397 5 discriminator 3 view .LVU500
 1641              		.syntax unified
 1642              	@ 397 "tinyusb/src/tusb.c" 1
 1643 0056 00BE     		BKPT #0
 1644              	
 1645              	@ 0 "" 2
 1646              		.thumb
 1647              		.syntax unified
 1648              	.L134:
 1649              	.LBE123:
 397:tinyusb/src/tusb.c **** 
 1650              		.loc 1 397 5 discriminator 5 view .LVU501
 397:tinyusb/src/tusb.c **** 
 1651              		.loc 1 397 5 discriminator 5 view .LVU502
 1652 0058 0020     		movs	r0, #0
 1653 005a DEE7     		b	.L126
 1654              	.LVL149:
 1655              	.L140:
 1656              	.LBB124:
 1657              	.LBB122:
 291:tinyusb/src/tusb.c ****     #endif
 1658              		.loc 1 291 5 view .LVU503
 291:tinyusb/src/tusb.c ****     #endif
 1659              		.loc 1 291 12 is_stmt 0 view .LVU504
 1660 005c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1661 005e A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1662 0060 0DB1     		cbz	r5, .L137
 1663 0062 A268     		ldr	r2, [r4, #8]
 1664 0064 00E0     		b	.L132
 1665              	.L137:
 1666 0066 0022     		movs	r2, #0
 1667              	.L132:
 291:tinyusb/src/tusb.c ****     #endif
 1668              		.loc 1 291 12 view .LVU505
 1669 0068 2B46     		mov	r3, r5
 1670 006a FFF7FEFF 		bl	usbd_edpt_xfer
 1671              	.LVL150:
 291:tinyusb/src/tusb.c ****     #endif
 1672              		.loc 1 291 12 view .LVU506
 1673              	.LBE122:
 1674              	.LBE124:
 397:tinyusb/src/tusb.c **** 
 1675              		.loc 1 397 5 view .LVU507
 1676 006e 0028     		cmp	r0, #0
 1677 0070 EAD0     		beq	.L131
ARM GAS  /tmp/ccqgw09y.s 			page 58


 397:tinyusb/src/tusb.c **** 
 1678              		.loc 1 397 5 is_stmt 1 discriminator 2 view .LVU508
 399:tinyusb/src/tusb.c ****   }else
 1679              		.loc 1 399 5 discriminator 2 view .LVU509
 399:tinyusb/src/tusb.c ****   }else
 1680              		.loc 1 399 12 is_stmt 0 discriminator 2 view .LVU510
 1681 0072 2846     		mov	r0, r5
 1682 0074 D1E7     		b	.L126
 1683              	.LVL151:
 1684              	.L130:
 399:tinyusb/src/tusb.c ****   }else
 1685              		.loc 1 399 12 discriminator 2 view .LVU511
 1686              	.LBE117:
 403:tinyusb/src/tusb.c ****     return 0;
 1687              		.loc 1 403 5 is_stmt 1 view .LVU512
 1688              	.LBB125:
 1689              	.LBI125:
 299:tinyusb/src/tusb.c **** {
 1690              		.loc 1 299 6 view .LVU513
 1691              	.LBB126:
 301:tinyusb/src/tusb.c ****   {
 1692              		.loc 1 301 3 view .LVU514
 301:tinyusb/src/tusb.c ****   {
 1693              		.loc 1 301 8 is_stmt 0 view .LVU515
 1694 0076 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 301:tinyusb/src/tusb.c ****   {
 1695              		.loc 1 301 6 view .LVU516
 1696 0078 0BB1     		cbz	r3, .L141
 1697              	.LVL152:
 1698              	.L135:
 301:tinyusb/src/tusb.c ****   {
 1699              		.loc 1 301 6 view .LVU517
 1700              	.LBE126:
 1701              	.LBE125:
 404:tinyusb/src/tusb.c ****   }
 1702              		.loc 1 404 5 is_stmt 1 view .LVU518
 404:tinyusb/src/tusb.c ****   }
 1703              		.loc 1 404 12 is_stmt 0 view .LVU519
 1704 007a 0020     		movs	r0, #0
 1705 007c CDE7     		b	.L126
 1706              	.LVL153:
 1707              	.L141:
 1708              	.LBB128:
 1709              	.LBB127:
 309:tinyusb/src/tusb.c ****     #endif
 1710              		.loc 1 309 5 is_stmt 1 view .LVU520
 309:tinyusb/src/tusb.c ****     #endif
 1711              		.loc 1 309 12 is_stmt 0 view .LVU521
 1712 007e A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1713 0080 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1714              	.LVL154:
 309:tinyusb/src/tusb.c ****     #endif
 1715              		.loc 1 309 12 view .LVU522
 1716 0082 FFF7FEFF 		bl	usbd_edpt_release
 1717              	.LVL155:
 1718 0086 F8E7     		b	.L135
 1719              	.LVL156:
ARM GAS  /tmp/ccqgw09y.s 			page 59


 1720              	.L136:
 309:tinyusb/src/tusb.c ****     #endif
 1721              		.loc 1 309 12 view .LVU523
 1722              	.LBE127:
 1723              	.LBE128:
 383:tinyusb/src/tusb.c **** 
 1724              		.loc 1 383 3 view .LVU524
 1725 0088 0020     		movs	r0, #0
 1726              	.LVL157:
 383:tinyusb/src/tusb.c **** 
 1727              		.loc 1 383 3 view .LVU525
 1728 008a C6E7     		b	.L126
 1729              		.cfi_endproc
 1730              	.LFE96:
 1732              		.section	.text.tu_edpt_stream_read,"ax",%progbits
 1733              		.align	1
 1734              		.global	tu_edpt_stream_read
 1735              		.syntax unified
 1736              		.thumb
 1737              		.thumb_func
 1738              		.fpu fpv4-sp-d16
 1740              	tu_edpt_stream_read:
 1741              	.LVL158:
 1742              	.LFB97:
 407:tinyusb/src/tusb.c **** 
 408:tinyusb/src/tusb.c **** uint32_t tu_edpt_stream_read(tu_edpt_stream_t* s, void* buffer, uint32_t bufsize)
 409:tinyusb/src/tusb.c **** {
 1743              		.loc 1 409 1 is_stmt 1 view -0
 1744              		.cfi_startproc
 1745              		@ args = 0, pretend = 0, frame = 0
 1746              		@ frame_needed = 0, uses_anonymous_args = 0
 1747              		.loc 1 409 1 is_stmt 0 view .LVU527
 1748 0000 38B5     		push	{r3, r4, r5, lr}
 1749              	.LCFI15:
 1750              		.cfi_def_cfa_offset 16
 1751              		.cfi_offset 3, -16
 1752              		.cfi_offset 4, -12
 1753              		.cfi_offset 5, -8
 1754              		.cfi_offset 14, -4
 1755 0002 0446     		mov	r4, r0
 410:tinyusb/src/tusb.c ****   uint32_t num_read = tu_fifo_read_n(&s->ff, buffer, (uint16_t) bufsize);
 1756              		.loc 1 410 3 is_stmt 1 view .LVU528
 1757              		.loc 1 410 23 is_stmt 0 view .LVU529
 1758 0004 92B2     		uxth	r2, r2
 1759              	.LVL159:
 1760              		.loc 1 410 23 view .LVU530
 1761 0006 0C30     		adds	r0, r0, #12
 1762              	.LVL160:
 1763              		.loc 1 410 23 view .LVU531
 1764 0008 FFF7FEFF 		bl	tu_fifo_read_n
 1765              	.LVL161:
 1766              		.loc 1 410 23 view .LVU532
 1767 000c 0546     		mov	r5, r0
 1768              	.LVL162:
 411:tinyusb/src/tusb.c ****   tu_edpt_stream_read_xfer(s);
 1769              		.loc 1 411 3 is_stmt 1 view .LVU533
 1770 000e 2046     		mov	r0, r4
ARM GAS  /tmp/ccqgw09y.s 			page 60


 1771              	.LVL163:
 1772              		.loc 1 411 3 is_stmt 0 view .LVU534
 1773 0010 FFF7FEFF 		bl	tu_edpt_stream_read_xfer
 1774              	.LVL164:
 412:tinyusb/src/tusb.c ****   return num_read;
 1775              		.loc 1 412 3 is_stmt 1 view .LVU535
 413:tinyusb/src/tusb.c **** }
 1776              		.loc 1 413 1 is_stmt 0 view .LVU536
 1777 0014 2846     		mov	r0, r5
 1778 0016 38BD     		pop	{r3, r4, r5, pc}
 1779              		.loc 1 413 1 view .LVU537
 1780              		.cfi_endproc
 1781              	.LFE97:
 1783              		.text
 1784              	.Letext0:
 1785              		.file 5 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stdint.h"
 1786              		.file 6 "tinyusb/src/osal/osal_none.h"
 1787              		.file 7 "tinyusb/src/common/tusb_private.h"
 1788              		.file 8 "tinyusb/src/device/usbd_pvt.h"
 1789              		.file 9 "tinyusb/src/device/usbd.h"
ARM GAS  /tmp/ccqgw09y.s 			page 61


DEFINED SYMBOLS
                            *ABS*:0000000000000000 tusb.c
     /tmp/ccqgw09y.s:18     .text.tusb_init:0000000000000000 $t
     /tmp/ccqgw09y.s:26     .text.tusb_init:0000000000000000 tusb_init
     /tmp/ccqgw09y.s:76     .text.tusb_inited:0000000000000000 $t
     /tmp/ccqgw09y.s:83     .text.tusb_inited:0000000000000000 tusb_inited
     /tmp/ccqgw09y.s:112    .text.tu_desc_find:0000000000000000 $t
     /tmp/ccqgw09y.s:119    .text.tu_desc_find:0000000000000000 tu_desc_find
     /tmp/ccqgw09y.s:162    .text.tu_desc_find2:0000000000000000 $t
     /tmp/ccqgw09y.s:169    .text.tu_desc_find2:0000000000000000 tu_desc_find2
     /tmp/ccqgw09y.s:217    .text.tu_desc_find3:0000000000000000 $t
     /tmp/ccqgw09y.s:224    .text.tu_desc_find3:0000000000000000 tu_desc_find3
     /tmp/ccqgw09y.s:283    .text.tu_edpt_claim:0000000000000000 $t
     /tmp/ccqgw09y.s:290    .text.tu_edpt_claim:0000000000000000 tu_edpt_claim
     /tmp/ccqgw09y.s:358    .text.tu_edpt_release:0000000000000000 $t
     /tmp/ccqgw09y.s:365    .text.tu_edpt_release:0000000000000000 tu_edpt_release
     /tmp/ccqgw09y.s:421    .text.tu_edpt_validate:0000000000000000 $t
     /tmp/ccqgw09y.s:428    .text.tu_edpt_validate:0000000000000000 tu_edpt_validate
     /tmp/ccqgw09y.s:674    .text.tu_edpt_bind_driver:0000000000000000 $t
     /tmp/ccqgw09y.s:681    .text.tu_edpt_bind_driver:0000000000000000 tu_edpt_bind_driver
     /tmp/ccqgw09y.s:830    .text.tu_desc_get_interface_total_len:0000000000000000 $t
     /tmp/ccqgw09y.s:837    .text.tu_desc_get_interface_total_len:0000000000000000 tu_desc_get_interface_total_len
     /tmp/ccqgw09y.s:980    .text.tu_edpt_stream_init:0000000000000000 $t
     /tmp/ccqgw09y.s:987    .text.tu_edpt_stream_init:0000000000000000 tu_edpt_stream_init
     /tmp/ccqgw09y.s:1047   .text.tu_edpt_stream_write_zlp_if_needed:0000000000000000 $t
     /tmp/ccqgw09y.s:1054   .text.tu_edpt_stream_write_zlp_if_needed:0000000000000000 tu_edpt_stream_write_zlp_if_needed
     /tmp/ccqgw09y.s:1213   .text.tu_edpt_stream_write_xfer:0000000000000000 $t
     /tmp/ccqgw09y.s:1220   .text.tu_edpt_stream_write_xfer:0000000000000000 tu_edpt_stream_write_xfer
     /tmp/ccqgw09y.s:1410   .text.tu_edpt_stream_write:0000000000000000 $t
     /tmp/ccqgw09y.s:1417   .text.tu_edpt_stream_write:0000000000000000 tu_edpt_stream_write
     /tmp/ccqgw09y.s:1498   .text.tu_edpt_stream_read_xfer:0000000000000000 $t
     /tmp/ccqgw09y.s:1505   .text.tu_edpt_stream_read_xfer:0000000000000000 tu_edpt_stream_read_xfer
     /tmp/ccqgw09y.s:1733   .text.tu_edpt_stream_read:0000000000000000 $t
     /tmp/ccqgw09y.s:1740   .text.tu_edpt_stream_read:0000000000000000 tu_edpt_stream_read

UNDEFINED SYMBOLS
tud_init
tud_inited
tu_fifo_config
tu_fifo_count
usbd_edpt_claim
usbd_edpt_xfer
tu_fifo_read_n
usbd_edpt_release
tu_fifo_write_n
tu_fifo_remaining
